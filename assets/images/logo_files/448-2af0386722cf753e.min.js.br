"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4c5a4ae3-b570-5edf-a2f8-4095af8c0c19")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[448],{187409:(e,t,n)=>{n.r(t),n.d(t,{activeButton:()=>l,chevron:()=>E,delightfulMenu:()=>c,disabledButton:()=>o,disabledFullHeightSidebarFlyout:()=>m,enabledButton:()=>a,flyout:()=>u,flyoutButton:()=>f,flyoutDropdownShown:()=>d,fullHeightSidebarFlyout:()=>p,fullHeightSidebarFlyoutButton:()=>h,fullHeightSidebarFlyoutChevron:()=>g,fullHeightSidebarFlyoutDropdownShown:()=>_,grid:()=>y,largeDisplayDropdown:()=>b,pointingDropdown:()=>s,selected:()=>r,updatesBadge:()=>i});let i="toolbar_styles--updatesBadge--NbkFp",r="toolbar_styles--selected--zUa6K",a="toolbar_styles--enabledButton--fEwmC",o="toolbar_styles--disabledButton--wv8Iu",l="toolbar_styles--activeButton--YHzcB",s="toolbar_styles--pointingDropdown--6rrL3",c="toolbar_styles--delightfulMenu--A6bY7",u="toolbar_styles--flyout--S3qfl",d="toolbar_styles--flyoutDropdownShown--WU8JV",p="toolbar_styles--fullHeightSidebarFlyout--d9LJ3 toolbar_styles--flyout--S3qfl",m="toolbar_styles--disabledFullHeightSidebarFlyout--hBPDA",f="toolbar_styles--flyoutButton--lyOUg",g="toolbar_styles--fullHeightSidebarFlyoutChevron--aENEg",h="toolbar_styles--fullHeightSidebarFlyoutButton--dU4LR toolbar_styles--flyout--S3qfl",_="toolbar_styles--fullHeightSidebarFlyoutDropdownShown--rT9w3 toolbar_styles--flyoutDropdownShown--WU8JV",y="toolbar_styles--grid--M8sVG",E="toolbar_styles--chevron--3YF14",b="toolbar_styles--largeDisplayDropdown--yFQ1V"},16112:(e,t,n)=>{n.d(t,{AQ:()=>f,Er:()=>A,Ex:()=>g,GC:()=>l,Jg:()=>r,KE:()=>i,Lq:()=>a,Pf:()=>b,R:()=>o,TE:()=>w,U:()=>_,V3:()=>p,WT:()=>y,XA:()=>u,Xs:()=>m,YT:()=>C,Zm:()=>x,by:()=>k,dM:()=>T,e1:()=>I,eh:()=>S,gb:()=>h,gt:()=>c,l3:()=>s,q3:()=>E,uX:()=>N,yM:()=>d,yT:()=>v});let i="toolbar_view--toolbar--RuPI6",r="toolbar_view--figjamBorder--KF3VY",a="toolbar_view--loading--fU68L",o="toolbar_view--hidden--eM-fR",l="toolbar_view--buttonGroup--UA9-B",s="toolbar_view--leftButtonGroup--qkjBh",c="toolbar_view--rightButtonGroup--weV86",u="toolbar_view--overviewRightButtonGroup--nPoWM",d="toolbar_view--hideTools--No4T8",p="toolbar_view--centerButtonGroup--kxpQA",m="toolbar_view--cachedFilenameViewSubtree--JoP3h",f="toolbar_view--menuButton--nAIP3",g="toolbar_view--unclickableMenuButtonUI3--Zzd1A",h="toolbar_view--iconButton--1MUm6",_="toolbar_view--wide--Mpb1c",y="toolbar_view--actionButtonContainer--7fDmd",E="toolbar_view--actionButtonBadge--2cmhk",b="toolbar_view--label--O5fOT ellipsis--ellipsis--Tjyfa",T="toolbar_view--textButtonContainer--17OKy",N="toolbar_view--textButton--THnFZ basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",v="toolbar_view--toolButtonContainer--IRGt-",w="toolbar_view--unreadDotActive--KHyuc",x="toolbar_view--unreadDot--zuWYA",S="toolbar_view--loginButton--kH7Jx",I="toolbar_view--unsavedChangesIconContainer--zEmEv",k="toolbar_view--unsavedChangesIcon--rYfws",A="toolbar_view--missingFontSvg--hHv5S",C="toolbar_view--focusModeVariantsToggleActiveButton--VqPiO"},384252:(e,t,n)=>{function i(){return null}n.d(t,{KL:()=>d,Px:()=>p,Ug:()=>s,Wr:()=>r,a8:()=>o,e4:()=>a,e_:()=>u,fy:()=>l,wF:()=>c});let r=i,a=i,o=i,l=i,s=i,c=i,u=i,d=i,p=i},626217:(e,t,n)=>{n.d(t,{i:()=>s,s:()=>l});var i=n(587670),r=n(794272),a=n(964881),o=n(227944);function l(e=!0){let t=(0,o.Ku)(["add-selection-ready-status","remove-selection-status"]);return t["add-selection-ready-status"]||t["remove-selection-status"]&&!e}function s(e){let t=(0,r.R)(e=>e.mirror.appModel.activeCanvasEditModeType),n=(0,a.l7)();return!!e&&(t===i.m1T.DEV_HANDOFF||t===i.m1T.DEV_HANDOFF_HISTORY||n)&&(e.isFrame||e.isSymbol||e.isSection)}},838e3:(e,t,n)=>{n.d(t,{Q:()=>h,S:()=>_});var i=n(130097),r=n(711525),a=n(776621),o=n(27087),l=n(881388),s=n(939863),c=n(392592),u=n(279453),d=n(320741),p=n(877627),m=n(280945),f=n(980820),g=n(507877);let h=(0,f.nF)(async(e,t,{loadingKey:n})=>{let o=!1;try{o=!!(0,r.oA)((await (0,i.Ek)(u.jmg,{fileKey:t.file_key})).deviceTryFile)}catch(e){(0,a.x1)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let i;i=o?m.L.claimDeviceFile({fileKey:t.file_key}):p.Uy.claimTryFile({fileKey:t.file_key}),(0,d.N)(i,e,n);let{data:r}=await i,{save_location:a,folder_name:l,org_id:u}=r.meta,{user:f,currentUserOrgId:h,selectedView:_}=e.getState(),y=(0,s.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===a&&l&&(y=(0,s.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:l})),u&&u!==h&&f){let t={userId:f.id,orgId:u};e.dispatch(g._l({workspace:t,view:_}))}e.dispatch(c.F.enqueue({message:y}))}catch(t){e.dispatch(l.s.error("Unable to save file. Please try again later."))}}),_=(0,f.nF)(async(e,{userName:t,file_key:n},{loadingKey:i})=>{try{await o.Ay.put(`/api/try/file/${n}`,{name:(0,s.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},550273:(e,t,n)=>{n.d(t,{Ey:()=>c,Gc:()=>p,fN:()=>l,mz:()=>m,nl:()=>s});var i=n(534611),r=n(707458),a=n(374626),o=n(92566);function l(e){let t=s(e);return t?u(t):void 0}function s(e){let t=d(e);return 1===t.length?t[0]:void 0}function c(e){return d(e).map(u)}function u(e){let t=r.q.instance.getCurrentPage(),n=t?.getSelectedTextRange(),i={node:e,nodeText:e.characters,effectiveText:e.characters};return n?.textNodeId===e.guid&&n.start!==n.end&&(i.selectionRange=n,i.effectiveText=e.characters.slice(n.start,n.end)),i}function d(e){return p(r.q.instance.getCurrentPage()?.directlySelectedNodes,e)}function p(e,t){if(!e)return[];let n=Array.isArray(e)?e:[e],i=[],r=e=>{for(let n of(function(e,t){if("TEXT"!==e.type)return!1;if(t?.excludeDigitsAndSpecialChar){let t=e.characters.trim(),n=RegExp("^[\\d!@#$%^&*().]+$");if(t.match(n))return!1}return t?.allowEmpty||e.characters.length>0}(e,t)&&i.push(e),e.childrenNodes??[]))r(n)};for(let e of n)r(e);return i}function m(){let e=(function(e){let t=a.zl.get(o.jI);if(!t||t===i.AD)return[];let n=r.q.instance.get(t);return n?p(n,e):[]})({allowEmpty:!1}).filter(e=>e.visible);return e.sort((e,t)=>{let n=e.absoluteTransform.m02-t.absoluteTransform.m02,i=e.absoluteTransform.m12-t.absoluteTransform.m12;return 0===n?0===i?e.guid.localeCompare(t.guid):i:n}),e}},287497:(e,t,n)=>{n.d(t,{YJ:()=>L});var i=n(634832),r=n(707458),a=n(354189),o=n(247368),l=n(202655),s=n(853069);function c(e){if(Array.isArray(e))return function(e){let t=e.map(e=>c(e)).join(",");return`[${t}]`}(e);switch(typeof e){case"object":if(null===e)return"null";return function(e){let t=Object.entries(e).map(([e,t])=>`${JSON.stringify(e)}: ${c(t)}`).join(",");return`{ ${t} }`}(e);case"string":if(e.startsWith("{"))return e;return JSON.stringify(e);case"number":case"boolean":case"undefined":return`${e}`;default:throw Error(`valueToString: Unknown value type for ${e}`)}}function u(e){return Object.entries(e).map(([e,t])=>{switch(typeof t){case"string":if(t.includes('"')&&!t.startsWith("{"))return{name:e,value:`{${c(t)}}`};return{name:e,value:c(t)};case"object":case"number":case"boolean":case"undefined":return{name:e,value:`{${c(t)}}`};default:throw Error(`toReactProps: Unknown value type for ${t}`)}}).map(({name:e,value:t})=>`${e}=${t}`).join(" ")}var d=n(256116),p=n(539780);class m{constructor(e,t){this.apiNode=e,this.getParentApiNode=t}get type(){return this.apiNode.type}get parent(){let e=this.getParentApiNode(this.apiNode.id);return e?new m(e,this.getParentApiNode):null}get isAutoLayout(){return"layoutMode"in this.apiNode&&"NONE"!==this.apiNode.layoutMode}get layoutDirection(){return"layoutMode"in this.apiNode?this.apiNode.layoutMode??"NONE":"NONE"}get padding(){if(!this.isAutoLayout)return null;let e="paddingTop"in this.apiNode?this.apiNode.paddingTop??0:0,t="paddingBottom"in this.apiNode?this.apiNode.paddingBottom??0:0,n="paddingLeft"in this.apiNode?this.apiNode.paddingLeft??0:0,i="paddingRight"in this.apiNode?this.apiNode.paddingRight??0:0;return e===t&&t===n&&n===i?e:{top:e,bottom:t,left:n,right:i}}get childrenGap(){return this.isAutoLayout?"primaryAxisAlignItems"in this.apiNode&&"SPACE_BETWEEN"===this.apiNode.primaryAxisAlignItems?"SPACE_BETWEEN":"itemSpacing"in this.apiNode?this.apiNode.itemSpacing??0:0:null}get layoutPosition(){if(this.parent?.isAutoLayout&&(!("layoutPositioning"in this.apiNode)||"ABSOLUTE"!==this.apiNode.layoutPositioning)||"COMPONENT"===this.type&&this.parent?.type==="COMPONENT_SET")return{type:"AUTO"};let{vertical:e,horizontal:t}=("constraints"in this.apiNode?this.apiNode.constraints:null)??{vertical:"TOP",horizontal:"LEFT"},{x:n,y:i}=this.computedPosition;return{type:"ABSOLUTE",xAxis:{type:t,value:n},yAxis:{type:e,value:i}}}get solidFillColorOrNull(){if("fills"in this.apiNode&&this.apiNode.fills&&0!==this.apiNode.fills.length){let e=this.apiNode.fills[0];if("SOLID"===e.type)return e.color}return null}get cornerRadius(){return"TEXT"===this.type?null:"rectangleCornerRadii"in this.apiNode&&this.apiNode.rectangleCornerRadii?{topLeft:this.apiNode.rectangleCornerRadii[0],topRight:this.apiNode.rectangleCornerRadii[1],bottomRight:this.apiNode.rectangleCornerRadii[2],bottomLeft:this.apiNode.rectangleCornerRadii[3]}:"cornerRadius"in this.apiNode?this.apiNode.cornerRadius??0:null}get backgroundColor(){return"TEXT"===this.apiNode.type?null:this.solidFillColorOrNull}get borderColor(){if("TEXT"===this.apiNode.type)return null;if("strokes"in this.apiNode&&this.apiNode.strokes&&0!==this.apiNode.strokes.length){let e=this.apiNode.strokes[0];if("SOLID"===e.type)return e.color}return null}get borderWidth(){if("TEXT"===this.apiNode.type||!("strokeWeight"in this.apiNode))return null;let e=this.apiNode.strokeWeight;if("number"!=typeof e)return null;let t="individualStrokeWeights"in this.apiNode?this.apiNode.individualStrokeWeights:null;if(t){let{top:e,bottom:n,left:i,right:r}=t;if(!(e===n&&n===i&&i===r))return{top:e,bottom:n,left:i,right:r}}return e}get textColor(){return"TEXT"!==this.apiNode.type?null:this.solidFillColorOrNull}get fontSize(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.fontSize??12}get textAlignHorizontal(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.textAlignHorizontal??"LEFT"}get textAlignVertical(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.textAlignVertical??"TOP"}get fontWeight(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.fontWeight}get fontFamily(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.fontFamily}get lineHeight(){if("TEXT"!==this.apiNode.type)return null;let e=this.apiNode.style;return"INTRINSIC_%"===e.lineHeightUnit?{type:"AUTO"}:"FONT_SIZE_%"!==e.lineHeightUnit&&"lineHeightPx"in e&&"number"==typeof e.lineHeightPx?{type:"PIXELS",value:e.lineHeightPx}:"PIXELS"!==e.lineHeightUnit&&"lineHeightPercentFontSize"in e&&"number"==typeof e.lineHeightPercentFontSize?{type:"PERCENT",value:e.lineHeightPercentFontSize}:null}get visible(){return!1===this.apiNode.visible}get textContent(){return"TEXT"!==this.apiNode.type?null:this.apiNode.characters??""}get computedPosition(){if(!("relativeTransform"in this.apiNode))throw Error("Property relativeTransform is missing. Make sure outputGeometry is true.");return{x:this.apiNode.relativeTransform[0][2],y:this.apiNode.relativeTransform[1][2]}}get layoutSize(){let{width:e,height:t}=this.computedSize,n={width:{type:"FIXED",value:e},height:{type:"FIXED",value:t}};if(this.isAutoLayout||this.parent?.isAutoLayout){let e="layoutSizingHorizontal"in this.apiNode&&this.apiNode.layoutSizingHorizontal;if(e)switch(e){case"FIXED":break;case"HUG":n.width={type:"HUG"};break;case"FILL":n.width={type:"FILL"};break;default:f(e)}let t="layoutSizingVertical"in this.apiNode&&this.apiNode.layoutSizingVertical;if(t)switch(t){case"FIXED":break;case"HUG":n.height={type:"HUG"};break;case"FILL":n.height={type:"FILL"};break;default:f(t)}}if((this.isAutoLayout||this.parent?.isAutoLayout)&&("minWidth"in this.apiNode&&(n.minWidth=this.apiNode.minWidth),"minHeight"in this.apiNode&&(n.minHeight=this.apiNode.minHeight),"maxWidth"in this.apiNode&&(n.maxWidth=this.apiNode.maxWidth),"maxHeight"in this.apiNode&&(n.maxHeight=this.apiNode.maxHeight)),"TEXT"===this.apiNode.type)switch(this.apiNode.style.textAutoResize){case"HEIGHT":n.height={type:"HUG"};break;case"WIDTH_AND_HEIGHT":n.height={type:"HUG"},n.width={type:"HUG"}}return n}get computedSize(){if(!("size"in this.apiNode))throw Error("Property size is missing. Make sure outputGeometry is true.");return{width:this.apiNode.size.x,height:this.apiNode.size.y}}get alignItems(){if(!this.isAutoLayout)return null;let e="counterAxisAlignItems"in this.apiNode?this.apiNode.counterAxisAlignItems:null;if(!e)return"START";switch(e){case"MIN":return"START";case"CENTER":return"CENTER";case"MAX":return"END";case"BASELINE":return"BASELINE";default:f(e)}}get justifyContents(){if(!this.isAutoLayout)return null;let e="primaryAxisAlignItems"in this.apiNode?this.apiNode.primaryAxisAlignItems:null;if(!e)return"START";switch(e){case"MIN":return"START";case"CENTER":return"CENTER";case"MAX":return"END";case"SPACE_BETWEEN":return"SPACE_BETWEEN";default:f(e)}}get children(){if("INSTANCE"===this.apiNode.type)return[];let e="children"in this.apiNode&&this.apiNode.children;return e?e.map(e=>new m(e,this.getParentApiNode)):[]}get tagName(){return"INSTANCE"===this.apiNode.type?"Component"+this.apiNode.name.split(" ").map(e=>(e[0]?.toUpperCase()??"")+e.slice(1)).join(""):"TEXT"===this.apiNode.type?"Text":"Box"}toTailwindClasses({ignorePosition:e=!1,layoutOnly:t=!1,positionOnly:n=!1,removeDefaults:i=!0}={}){let r=[];if(!e){let e=this.layoutPosition;if("AUTO"!==e.type&&this.parent){r.push("absolute");let{xAxis:t,yAxis:n}=e;switch(t.type){case"LEFT":r.push(`left-${(0,d.h)(t.value)}`);break;case"RIGHT":{let e=this.computedSize,n=this.parent?.computedSize;n&&r.push(`right-${(0,d.h)(n.width-t.value-e.width)}`)}}switch(n.type){case"TOP":r.push(`top-${(0,d.h)(n.value)}`);break;case"BOTTOM":{let e=this.computedSize,t=this.parent?.computedSize;t&&r.push(`bottom-${(0,d.h)(t.height-n.value-e.height)}`)}}}}if(n)return r;let{width:a,height:o,minWidth:l,maxWidth:s,minHeight:c,maxHeight:u}=this.layoutSize;if("FILL"===a.type?r.push("w-full"):"FIXED"===a.type&&r.push(`w-${(0,d.h)(a.value)}`),"FILL"===o.type?r.push("h-full"):"FIXED"===o.type&&r.push(`h-${(0,d.h)(o.value)}`),"number"==typeof l&&r.push(`min-w-${(0,d.h)(l)}`),"number"==typeof s&&r.push(`max-w-${(0,d.h)(s)}`),"number"==typeof c&&r.push(`min-h-${(0,d.h)(c)}`),"number"==typeof u&&r.push(`max-h-${(0,d.h)(u)}`),t)return r;if(this.isAutoLayout){if(r.push("flex"),"VERTICAL"===this.layoutDirection&&r.push("flex-col"),!i||this.children.length>1){let e=this.childrenGap;"number"!=typeof e||i&&0===e||r.push(`gap-${(0,d.h)(e)}`)}switch(this.alignItems){case"START":i||r.push("items-start");break;case"END":r.push("items-end");break;case"CENTER":r.push("items-center");break;case"BASELINE":r.push("items-baseline")}switch(this.justifyContents){case"START":i||r.push("justify-start");break;case"END":r.push("justify-end");break;case"CENTER":r.push("justify-center");break;case"SPACE_BETWEEN":r.push("justify-between")}let e=this.padding;if("number"==typeof e)i&&0===e||r.push(`p-${(0,d.h)(e)}`);else if(e){if(e.top===e.bottom){let t;t=e.top,i&&0===t||r.push(`py-${(0,d.h)(e.top)}`)}else{let t,n;t=e.top,i&&0===t||r.push(`pt-${(0,d.h)(e.top)}`),n=e.bottom,i&&0===n||r.push(`pb-${(0,d.h)(e.bottom)}`)}if(e.left===e.right){let t;t=e.left,i&&0===t||r.push(`px-${(0,d.h)(e.left)}`)}else{let t,n;t=e.left,i&&0===t||r.push(`pl-${(0,d.h)(e.left)}`),n=e.right,i&&0===n||r.push(`pr-${(0,d.h)(e.right)}`)}}}let m=this.cornerRadius;if("number"==typeof m)i&&0===m||r.push(`rounded-${(0,d.rA)(m)}`);else if(m){if(m.topLeft===m.topRight){let e;e=m.topLeft,i&&0===e||r.push(`rounded-t-${(0,d.rA)(m.topLeft)}`)}else{let e,t;e=m.topLeft,i&&0===e||r.push(`rounded-tl-${(0,d.rA)(m.topLeft)}`),t=m.topRight,i&&0===t||r.push(`rounded-tr-${(0,d.rA)(m.topRight)}`)}if(m.bottomLeft===m.bottomRight){let e;e=m.bottomLeft,i&&0===e||r.push(`rounded-b-${(0,d.rA)(m.bottomLeft)}`)}else{let e,t;e=m.bottomLeft,i&&0===e||r.push(`rounded-bl-${(0,d.rA)(m.bottomLeft)}`),t=m.bottomRight,i&&0===t||r.push(`rounded-br-${(0,d.rA)(m.bottomRight)}`)}}let f=this.backgroundColor;if(f){let e=(0,p.H)(f);r.push(`bg-${(0,d.iz)(e)}`)}let g=this.borderColor,h=this.borderWidth;if(g&&null!==h){let e=(0,p.H)(g);r.push(`border-${(0,d.iz)(e)}`);let t=e=>1===e?"":`-${(0,d.qK)(e)}`;"number"==typeof h?r.push(`border${t(h)}`):(h.top===h.bottom?r.push(`border-y${t(h.top)}`):(r.push(`border-t${t(h.top)}`),r.push(`border-b${t(h.bottom)}`)),h.left===h.right?r.push(`border-x${t(h.left)}`):(r.push(`border-l${t(h.left)}`),r.push(`border-r${t(h.right)}`)))}if("string"==typeof this.textContent){let e=this.fontSize,t=this.fontWeight;"number"!=typeof e||i&&15===e||r.push(`text-${(0,d.KY)(e)}`),"number"!=typeof t||i&&400===t||r.push(`font-${(0,d.jd)(t)}`);let n=this.lineHeight;if(n)switch(n.type){case"AUTO":i||r.push("leading-normal");break;case"PIXELS":case"PERCENT":r.push(`leading-${(0,d.rt)(n.value,n.type)}`)}let a=this.textColor;if(a){let e=(0,p.H)(a);i&&"#000000"===e||r.push(`text-${(0,d.iz)(e)}`)}switch(this.textAlignHorizontal){case"LEFT":i||r.push("text-left");break;case"RIGHT":r.push("text-right");break;case"CENTER":r.push("text-center");break;case"JUSTIFIED":r.push("text-justified")}switch(this.textAlignVertical){case"TOP":i||r.push("align-top");break;case"CENTER":r.push("align-middle");break;case"BOTTOM":r.push("align-bottom")}}return r}toJSX(){let e={id:this.apiNode.id},t=this.toTailwindClasses();0!==t.length&&(e.className=t.join(" "));let n=this.children,i=this.textContent?this.textContent:0!==this.children.length?n.map(e=>e.toJSX()).join(""):"";return i?`<${this.tagName} ${u(e)}>${i}</${this.tagName}>`:`<${this.tagName} ${u(e)} />`}toMinimalJSON(){let e={id:this.apiNode.id,name:this.apiNode.name,type:this.apiNode.type,layoutPosition:this.layoutPosition,layoutSize:this.layoutSize};return this.isAutoLayout&&(e.isAutoLayout=this.isAutoLayout,e.layoutDirection=this.layoutDirection,e.childrenGap=this.childrenGap,e.padding=this.padding,e.justifyContents=this.justifyContents,e.alignItems=this.alignItems),"string"==typeof this.textContent&&(e.fontSize=this.fontSize,e.fontWeight=this.fontWeight,e.fontFamily=this.fontFamily,e.textContent=this.textContent),this.children.length&&(e.children=this.children.map(e=>e.toMinimalJSON())),e}}function f(e,t){throw Error(t??`Unexpected value: ${e}`)}var g=n(747202);class h{constructor(){this.data=[]}append(e){return this.data.push(e),this}codefence(e,t="jsx"){return this.data.push("```"),this.data.push(t),this.data.push("\n"),this.data.push(e()),this.data.push("\n"),this.data.push("```"),this}newline(){return this.data.push("\n"),this}toString(){return this.data.join("")}}function _(e){return e.classPropName??"className"}function y(e,t={}){if(!e.symbolId)return{};let n=(0,o.Ye)(e.symbolId);if(!n)throw Error(`Could not find mainComponent for node ${e.guid}`);let i={};for(let[t,n]of Object.entries(e.componentProperties()))i[(0,l.aX)(t)]=n;let r={};for(let t of n.parsedDefs){if("DERIVED_BOOLEAN"===t.devFriendlyProp.type||"ARRAY"===t.devFriendlyProp.type)continue;let n=t.devFriendlyProp.key;if(n in i){if("SIMPLE"===t.devFriendlyProp.type){let e=i[n].value;t.def.defaultValue!==e&&(r[n]=e);continue}if("SIMPLE_CHOICE"===t.devFriendlyProp.type){let e=t.devFriendlyProp.validOptions;if("INSTANCE_SWAP"===t.def.type){let t=(0,g.cl)(i[n].value);if(!t)throw Error("Could not find component for componentProp");if("SYMBOL"===t.type){let i=Object.values(t.variantProperties??{})[0];-1!==e.indexOf(i)?r[n]=i:console.error(`Could not find ${i} in ${JSON.stringify(e)}`)}continue}if("VARIANT"===t.def.type){let t=i[n].value;-1!==e.indexOf(t)?r[n]=t:console.error(`Could not find ${t} in ${JSON.stringify(e)}`)}}}if("IMAGE"===t.def.type){let i=t.def.guidByParentComponentId[e.symbolId];if(i){let t=(0,g.uN)(e.guid,i);if(t){let e=D(T(t));e&&(r[n]={description:e})}}}}let s=a.v.toString(a.v.fromGuid(e.guid)),c=s.startsWith("I")?s:`I${s};`;for(let t of(0,g.g5)(e.guid))if(1===a.v.toString(a.v.fromGuid(t.guid)).replace(c,"").split(";").length&&t.isBubbled){let e=y(t,{isRoot:!1});Object.keys(e).length&&(r[(0,l.aX)(t.name)]=e)}for(let[e,t]of Object.entries((0,l.hM)(Object.keys(r))))for(let n of(r[e]=t.map(e=>r[e]),t))delete r[n];return t?.isRoot||1!==n.parsedDefs.length||1!==Object.keys(r).length?r:Object.values(r)[0]}let E={};function b(e){if(e in E)return E[e].simpleNode;throw Error(`Did not initialize node cache for nodeId=${e}`)}function T(e){let t=a.v.toString(a.v.fromGuid(e));if(t in E)return E[t].apiNode;throw Error(`Did not initialize node cache for nodeId=${e}`)}function N(e,t){let n=[e];for(;0!==n.length;){let e=n.shift();e&&(t(e),"children"in e&&n.push(...e.children))}}function v(e){if("INSTANCE"===e.type){let t=(0,o.Ye)(e.componentId);if(t?.jsxName)return t.jsxName}let t=function(e){let t=a.v.toGuid(a.v.fromString(e.id));return r.q.instance.get(t)}(e);if(t){let e=t.getSharedPluginData("jsx","type");if(e&&"HStack"!==e&&"VStack"!==e)return e}return null}function w(e,t){let n={};if(!t.skipNodeIds&&(!t.skipNodeIdsWithoutType||v(e))&&(n.id=e.id),t.includeName&&(n.name=e.name),t.includeType&&!("INSTANCE"===e.type&&!t.detachInstances)){let t=v(e);t&&(n.type=t)}if("DEFINITION"===t.componentUsageOrDefinition&&t.componentDefinitionTypeInfo&&"componentPropertyReferences"in e&&e.componentPropertyReferences?.visible){let i=e.componentPropertyReferences?.visible,r=t.componentDefinitionTypeInfo.parsedDefs.find(e=>e.rawProp===i);r&&(n.visible=`{${k(r.devFriendlyProp)}}`)}return n}function x(e,t){switch(t.classNameOptions){case"position-only":return e.toTailwindClasses({positionOnly:!0});case"layout-only":return e.toTailwindClasses({layoutOnly:!0});case"ignore-position":return e.toTailwindClasses({ignorePosition:!0});default:return e.toTailwindClasses()}}let S="AutoLayout",I="Frame";function k(e){let t="DERIVED_BOOLEAN"===e.type?e.devFriendlyProp:e,n=t.key;return("index"in t&&(n+=`[${t.index}]`),"DERIVED_BOOLEAN"===e.type)?`!!${n}`:n}async function A(e,t){let n=(0,l.BB)(e,{followInstances:!0}),i=[],r={};for(let e of n){let t=(0,o.Ye)(e.guid);if(!t)continue;let n=(0,s.vR)(t);if(n){r[n]=r[n]||[],r[n].push(e);continue}i.push(T(e.guid))}let a=await Promise.all(i.map(async e=>await C(e,t)));for(let[e]of Object.keys(r))a.push({nodeId:null,prefixTypes:[],jsxStr:`function ${(0,s.PJ)(e)}(props: ${(0,s.VV)(e)}) {
// Returns an element that satisfies the description provided.
}`});return a}async function C(e,t){let n=(0,o.Ye)(e.id);if(!n)throw Error(`Could not find typeInfo for node: ${e.id}`);let r=Object.values(n.prefixTypes),a={...t,componentUsageOrDefinition:"DEFINITION",componentDefinitionTypeInfo:n},l=new h,s=n.parsedDefs.map(e=>"DERIVED_BOOLEAN"===e.devFriendlyProp.type?"":"SIMPLE_CHOICE"===e.devFriendlyProp.type?"VARIANT"===e.def.type&&"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"GROUPED_INSTANCE_SWAP"===e.devFriendlyProp.type||"IMAGE"===e.devFriendlyProp.type?e.devFriendlyProp.key:"SIMPLE"===e.devFriendlyProp.type?"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"ARRAY"===e.devFriendlyProp.type?0!==e.devFriendlyProp.index?"":e.devFriendlyProp.key:void(0,i.assertNever)(e.devFriendlyProp)).filter(Boolean).join(", ");if(l.append(`const ${n.jsxName}: React.FC<${n.propsTypeRepr.typeDefBody??"{}"}> = (`),s?l.append(`{${s}}) => {`):l.append(") => {"),l.newline(),"COMPONENT"===e.type&&(l.append(`  return ${await O(e,a)}`),l.newline(),l.append("}")),"COMPONENT_SET"===e.type){let t=!0;for(let n of(0,g.Au)(e.id,["COMPONENT"])){if("SYMBOL"!==n.type||!n.variantProperties)continue;t||l.append(" else "),l.append("if ("),l.append(Object.entries(n.variantProperties).map(([e,t])=>`${e} === ${JSON.stringify(t)}`).join(" && ")),l.append(") {");let e=T(n.guid);l.append(`    return ${await O(e,a)}`),l.newline(),l.append("}"),t=!1}l.append("  return null;"),l.newline(),l.append("}")}return{nodeId:e.id,prefixTypes:r,jsxStr:l.toString()}}async function O(e,t){return await R(e,{...t,classNameOptions:"ignore-position"})||"null"}async function R(e,t){if(!1===e.visible)return null;let n=[];switch(e.type){case"INSTANCE":case"COMPONENT":case"SECTION":case"COMPONENT_SET":case"GROUP":case"FRAME":{if("INSTANCE"===e.type&&!t.detachInstances){n.push(function(e,t){let n=(0,g.So)(e.id,"INSTANCE"),i=(0,o.Ye)(e.componentId);if(!i)throw Error(`Could not find mainComponent for node ${e.id}`);let r=w(e,t),a=b(e.id);if(!t.skipClassNames){let e=x(a,{...t,classNameOptions:"position-only"});e.length&&(r[_(t)]=e.join(" "))}let c=(0,s.vR)(i);if(c){let t=(0,g.So)(e.componentId,"COMPONENT");return Object.assign(r,(0,g.Kp)(c,t)),`<${(0,s.PJ)(c)} ${u(r)}/>`}if(t.skipInstanceComponentProps||Object.assign(r,y(n,{isRoot:!0})),t.includeInstanceOverrides){let t=function(e){if(e.id.startsWith("I"))return null;let t=function(e){let t=T(e.componentId);if(t?.type!=="COMPONENT")return{};let n=new Set,i=[t];for(;0!==i.length;){let e=i.pop();if(!(!e||n.has(e.id)))for(let t of(n.add(e.id),function(e,t){let n=[];return N(e,e=>{e.type===t&&n.push(e)}),n}(e,"INSTANCE")))try{let e=T(t.componentId);e?.type==="COMPONENT"&&i.push(e)}catch{}}let r={};for(let e of n)N(T(e),e=>{r[(0,g.EJ)(e.id)]=e.id});return r}(e),n={},i=e=>e.split(";").slice(1).map(e=>t[e]??e).join(","),r=(e,t)=>{let r=T(e);if(r&&("characters"===t&&"TEXT"===r.type&&(n[i(e)]={children:r.characters}),"componentProperties"===t&&"INSTANCE"===r.type)){let t=i(e),r=(0,g.So)(e,"INSTANCE");n[t]={props:y(r,{isRoot:!0})}}};for(let{id:t,overriddenFields:n}of e.overrides??[])for(let e of n)if("characters"===e||"componentProperties"===e){r(t,e);continue}return n}(e);t&&0!==Object.keys(t).length&&(r.overrides=t)}let d="";if("DEFINITION"===t.componentUsageOrDefinition&&t.componentDefinitionTypeInfo){let n=e.componentPropertyReferences?.mainComponent,a=t.componentDefinitionTypeInfo.parsedDefs.find(i=>{if(e.isExposedInstance&&"NESTED_INSTANCE"===i.def.type){for(let n of(0,l.wn)(t.componentDefinitionTypeInfo?.componentId??"",i))if(n===e.id)return!0}return!!n&&i.rawProp===n});if(a){if("SLOT"===a.def.type)return`{${k(a.devFriendlyProp)}}`;if(1===i.parsedDefs.length){let e=i.parsedDefs[0].devFriendlyProp.key;e in r?r[e]=`{${k(a.devFriendlyProp)} ?? ${JSON.stringify(r[e])}}`:r[e]=`{${k(a.devFriendlyProp)}}`}else d=`{...${k(a.devFriendlyProp)}} `}}return`<${i.jsxName} ${u(r)} ${d}/>`}(e,t));break}if("COMPONENT"===e.type&&"DEFINITION"!==t.componentUsageOrDefinition){n.push(function(e,t){let n=w(e,t),i=(0,o.Ye)(e.id);if(!i)throw Error(`Could not find typeInfo for component: ${e.id}`);n.name=i.jsxName;let r=(0,g.cl)(e.id);if(!r)throw Error(`Could not find node for component: ${e.id}`);return"variantProperties"in r&&Object.assign(n,r.variantProperties),`<ComponentType ${u(n)} />`}(e,t));break}let[[r,a,c],d]=await Promise.all([function(e,t){let n=w(e,t),r=D(e);r&&(n.description=r);let a=x(b(e.id),t);a.length&&(n[_(t)]=a.join(" "));let o=function(e,t,n,r){switch(e.type){case"COMPONENT":case"INSTANCE":case"FRAME":case"GROUP":if(n)return"Image";return t?r.autoLayoutTagName??S:r.frameTagName??I;case"SECTION":return"Section";case"COMPONENT_SET":return t?r.autoLayoutTagName??S:r.frameTagName??I;default:(0,i.assertNever)(e)}}(e,-1!==a.indexOf("flex"),!!r,t);return[`<${o} ${u(n)}>`,`<${o} ${u(n)} />`,`</${o}>`]}(e,t),Promise.all(e.children.map(async e=>await R(e,{...t,classNameOptions:null})))]);if(d.length&&d.some(e=>e)){for(let e of(n.push(r),d))e&&n.push(e);n.push(c)}else n.push(a);break}case"TEXT":n.push(function(e,t){let n=w(e,t),i=x(b(e.id),t);i.length&&(n[_(t)]=i.join(" "));let r="";return"DEFINITION"===t.componentUsageOrDefinition&&e.componentPropertyReferences?.characters?r=`{${(0,l.aX)(e.componentPropertyReferences?.characters)}}`:(r=e.characters).includes('"')&&(r=`{${JSON.stringify(r)}}`),`<Text ${u(n)}>${r}</Text>`}(e,t));break;case"RECTANGLE":case"LINE":case"ELLIPSE":n.push(function(e,t){let n=w(e,t),r=x(b(e.id),t);switch(r.length&&(n[_(t)]=r.join(" ")),e.type){case"ELLIPSE":return`<Ellipse ${u(n)}/>`;case"RECTANGLE":return`<Rectangle ${u(n)}/>`;case"LINE":return`<Line ${u(n)}/>`;default:(0,i.assertNever)(e)}}(e,t));break;case"SLICE":case"REGULAR_POLYGON":case"STAR":case"VECTOR":case"BOOLEAN_OPERATION":case"TABLE":case"TABLE_CELL":case"WASHI_TAPE":case"CONNECTOR":case"WIDGET":case"EMBED":case"STICKY":case"SHAPE_WITH_TEXT":case"LINK_UNFURL":n.push(await function(e,t){let n=w(e,t);n.type=e.type;let i=x(b(e.id),{...t,classNameOptions:"layout-only"});return i.length&&(n[_(t)]=i.join(" ")),Promise.resolve(`<Unhandled ${u(n)} />`)}(e,t));break;case"CANVAS":case"DOCUMENT":throw Error(`Unexpected node type: ${e.type}`);default:(0,i.assertNever)(e)}return n.length>0?n.join(""):null}async function L({nodeIds:e,options:t}){let n=r.q.instance,i=e.map(e=>n.get(e)).filter(e=>e&&"DOCUMENT"!==e.type&&"CANVAS"!==e.type);if(0===i.length)return{};!function(e,t){for(let t of(E={},function(e){let t=new Set,n=[];for(let i of e)t.has(i.guid)||(t.add(i.guid),n.push(i));return n}([...e,...(0,l.BB)(e,{followInstances:!0})].map(e=>(function(e){let t=e;for(;t.parentGuid&&t.parentNode&&"CANVAS"!==t.parentNode.type;)t=t.parentNode;return t})(e)))))!function(e,t){let n=e?.getFirstDraftJSON();if(!n)return;let i=n.document;if("DOCUMENT"===i.type||"CANVAS"===i.type)throw Error(`Unexpected node type ${i.type}`);Object.assign(E,function(e){let t={},n={},i=[e];for(;0!==i.length;){let e=i.pop();if(e&&(t[e.id]=e,"children"in e))for(let t of e.children)n[t.id]=e.id,i.push(t)}let r=e=>{let i=n[e];if(!i)return null;let r=t[i];if(!r)throw Error(`Could not find parentNode node: ${i}`);return r},a={};for(let[e,n]of Object.entries(t))a[e]={apiNode:n,simpleNode:new m(n,r)};return a}(i))}(t,0)}(i,0);let[a,o]=await Promise.all([(async()=>{let e=await Promise.all(i.map(e=>R(T(e.guid),t)));return 1===e.length?e[0]:["<Selection>",...e,"</Selection>"].join("\n")})(),(async()=>{if(!t.includeComponentDependencies)return[];let e=(0,l.BB)(i,{followInstances:!0});return 0===e.length?[]:await A(e,t)})()]);return{jsxStr:a,jsxDefinitionInfo:o}}function D(e){if(!("fills"in e)||!e.fills.some(e=>"IMAGE"===e.type))return null;let t=e.id;e.id.startsWith("I")&&(t=a.v.toGuid(a.v.fromString(e.id)));let n=r.q.instance.get(t);return n&&n?.getSharedPluginData("jsx","isImage")==="true"&&e.fills.find(e=>"IMAGE"===e.type&&n?.getSharedPluginData("jsx","hash")===e.imageRef)&&(n?.getSharedPluginData("jsx","description")||n?.getSharedPluginData("jsx","altText"))||null}},256116:(e,t,n)=>{n.d(t,{Pw:()=>C,km:()=>L,qK:()=>K,Fm:()=>I,B9:()=>A,k$:()=>D,KY:()=>H,BM:()=>M,jd:()=>j,Cv:()=>z,iz:()=>q,bP:()=>P,rt:()=>W,W1:()=>v,Hg:()=>R,vW:()=>k,v4:()=>N,vQ:()=>w,h:()=>B,t1:()=>x,rA:()=>G,Fg:()=>O,gW:()=>U,Eu:()=>F,IT:()=>$});var i=n(634832),r=n(897459);function a(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[t,e]))}let o={none:1,tight:1.25,snug:1.375,normal:1.2,relaxed:1.625,loose:2},l={3:12,4:16,5:20,6:24,7:28,8:32,9:36,10:40},s={px:1,0:0,"0.5":2,1:4,"1.5":6,2:8,"2.5":10,3:12,"3.5":14,4:16,5:20,6:24,7:28,8:32,9:36,10:40,11:44,12:48,14:56,16:64,20:80,24:96,28:112,32:128,36:144,40:160,44:176,48:192,52:208,56:224,60:240,64:256,72:288,80:320,96:384,100:400},c={0:0,xs:320,sm:384,md:448,lg:512,xl:576,"2xl":672,"3xl":768,"4xl":896,"5xl":1024,"6xl":1152,"7xl":1280},u={none:0,"":4,sm:2,md:6,lg:8,xl:12,"2xl":16,"3xl":24,full:9999},d={black:"#000000",white:"#ffffff","slate-50":"#f8fafc","slate-100":"#f1f5f9","slate-200":"#e2e8f0","slate-300":"#cbd5e1","slate-400":"#94a3b8","slate-500":"#64748b","slate-600":"#475569","slate-700":"#334155","slate-800":"#1e293b","slate-900":"#0f172a","slate-950":"#020617","gray-50":"#f9fafb","gray-100":"#f3f4f6","gray-200":"#e5e7eb","gray-300":"#d1d5db","gray-400":"#9ca3af","gray-500":"#6b7280","gray-600":"#4b5563","gray-700":"#374151","gray-800":"#1f2937","gray-900":"#111827","gray-950":"#030712","neutral-50":"#fafafa","zinc-100":"#f4f4f5","zinc-200":"#e4e4e7","zinc-300":"#d4d4d8","zinc-400":"#a1a1aa","zinc-500":"#71717a","zinc-600":"#52525b","zinc-700":"#3f3f46","zinc-800":"#27272a","zinc-900":"#18181b","zinc-950":"#09090b","neutral-100":"#f5f5f5","neutral-200":"#e5e5e5","neutral-300":"#d4d4d4","neutral-400":"#a3a3a3","neutral-500":"#737373","neutral-600":"#525252","neutral-700":"#404040","neutral-800":"#262626","neutral-900":"#171717","neutral-950":"#0a0a0a","stone-50":"#fafaf9","stone-100":"#f5f5f4","stone-200":"#e7e5e4","stone-300":"#d6d3d1","stone-400":"#a8a29e","stone-500":"#78716c","stone-600":"#57534e","stone-700":"#44403c","stone-800":"#292524","stone-900":"#1c1917","stone-950":"#0c0a09","red-50":"#fef2f2","red-100":"#fee2e2","red-200":"#fecaca","red-300":"#fca5a5","red-400":"#f87171","red-500":"#ef4444","red-600":"#dc2626","red-700":"#b91c1c","red-800":"#991b1b","red-900":"#7f1d1d","red-950":"#450a0a","orange-50":"#fff7ed","orange-100":"#ffedd5","orange-200":"#fed7aa","orange-300":"#fdba74","orange-400":"#fb923c","orange-500":"#f97316","orange-600":"#ea580c","orange-700":"#c2410c","orange-800":"#9a3412","orange-900":"#7c2d12","orange-950":"#431407","amber-50":"#fffbeb","amber-100":"#fef3c7","amber-200":"#fde68a","amber-300":"#fcd34d","amber-400":"#fbbf24","amber-500":"#f59e0b","amber-600":"#d97706","amber-700":"#b45309","amber-800":"#92400e","amber-900":"#78350f","amber-950":"#451a03","yellow-50":"#fefce8","yellow-100":"#fef9c3","yellow-200":"#fef08a","yellow-300":"#fde047","yellow-400":"#facc15","yellow-500":"#eab308","yellow-600":"#ca8a04","yellow-700":"#a16207","yellow-800":"#854d0e","yellow-900":"#713f12","yellow-950":"#422006","lime-50":"#f7fee7","lime-100":"#ecfccb","lime-200":"#d9f99d","lime-300":"#bef264","lime-400":"#a3e635","lime-500":"#84cc16","lime-600":"#65a30d","lime-700":"#4d7c0f","lime-800":"#3f6212","lime-900":"#365314","lime-950":"#1a2e05","green-50":"#f0fdf4","green-100":"#dcfce7","green-200":"#bbf7d0","green-300":"#86efac","green-400":"#4ade80","green-500":"#22c55e","green-600":"#16a34a","green-700":"#15803d","green-800":"#166534","green-900":"#14532d","green-950":"#052e16","emerald-50":"#ecfdf5","emerald-100":"#d1fae5","emerald-200":"#a7f3d0","emerald-300":"#6ee7b7","emerald-400":"#34d399","emerald-500":"#10b981","emerald-600":"#059669","emerald-700":"#047857","emerald-800":"#065f46","emerald-900":"#064e3b","emerald-950":"#022c22","teal-50":"#f0fdfa","teal-100":"#ccfbf1","teal-200":"#99f6e4","teal-300":"#5eead4","teal-400":"#2dd4bf","teal-500":"#14b8a6","teal-600":"#0d9488","teal-700":"#0f766e","teal-800":"#115e59","teal-900":"#134e4a","teal-950":"#042f2e","cyan-50":"#ecfeff","cyan-100":"#cffafe","cyan-200":"#a5f3fc","cyan-300":"#67e8f9","cyan-400":"#22d3ee","cyan-500":"#06b6d4","cyan-600":"#0891b2","cyan-700":"#0e7490","cyan-800":"#155e75","cyan-900":"#164e63","cyan-950":"#083344","sky-50":"#f0f9ff","sky-100":"#e0f2fe","sky-200":"#bae6fd","sky-300":"#7dd3fc","sky-400":"#38bdf8","sky-500":"#0ea5e9","sky-600":"#0284c7","sky-700":"#0369a1","sky-800":"#075985","sky-900":"#0c4a6e","sky-950":"#082f49","blue-50":"#eff6ff","blue-100":"#dbeafe","blue-200":"#bfdbfe","blue-300":"#93c5fd","blue-400":"#60a5fa","blue-500":"#3b82f6","blue-600":"#2563eb","blue-700":"#1d4ed8","blue-800":"#1e40af","blue-900":"#1e3a8a","blue-950":"#172554","indigo-50":"#eef2ff","indigo-100":"#e0e7ff","indigo-200":"#c7d2fe","indigo-300":"#a5b4fc","indigo-400":"#818cf8","indigo-500":"#6366f1","indigo-600":"#4f46e5","indigo-700":"#4338ca","indigo-800":"#3730a3","indigo-900":"#312e81","indigo-950":"#1e1b4b","violet-50":"#f5f3ff","violet-100":"#ede9fe","violet-200":"#ddd6fe","violet-300":"#c4b5fd","violet-400":"#a78bfa","violet-500":"#8b5cf6","violet-600":"#7c3aed","violet-700":"#6d28d9","violet-800":"#5b21b6","violet-900":"#4c1d95","violet-950":"#2e1065","purple-50":"#faf5ff","purple-100":"#f3e8ff","purple-200":"#e9d5ff","purple-300":"#d8b4fe","purple-400":"#c084fc","purple-500":"#a855f7","purple-600":"#9333ea","purple-700":"#7e22ce","purple-800":"#6b21a8","purple-900":"#581c87","purple-950":"#3b0764","fuchsia-50":"#fdf4ff","fuchsia-100":"#fae8ff","fuchsia-200":"#f5d0fe","fuchsia-300":"#f0abfc","fuchsia-400":"#e879f9","fuchsia-500":"#d946ef","fuchsia-600":"#c026d3","fuchsia-700":"#a21caf","fuchsia-800":"#86198f","fuchsia-900":"#701a75","fuchsia-950":"#4a044e","pink-50":"#fdf2f8","pink-100":"#fce7f3","pink-200":"#fbcfe8","pink-300":"#f9a8d4","pink-400":"#f472b6","pink-500":"#ec4899","pink-600":"#db2777","pink-700":"#be185d","pink-800":"#9d174d","pink-900":"#831843","pink-950":"#500724","rose-50":"#fff1f2","rose-100":"#ffe4e6","rose-200":"#fecdd3","rose-300":"#fda4af","rose-400":"#fb7185","rose-500":"#f43f5e","rose-600":"#e11d48","rose-700":"#be123c","rose-800":"#9f1239","rose-900":"#881337","rose-950":"#4c0519"},p={0:0,5:.05,10:.1,20:.2,25:.25,30:.3,40:.4,50:.5,60:.6,70:.7,75:.75,80:.8,90:.9,95:.95,100:1},m={thin:100,extralight:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},f={xs:12,sm:14,base:16,lg:18,xl:20,"2xl":24,"3xl":30,"4xl":36,"5xl":48,"6xl":60,"7xl":72,"8xl":96,"9xl":128},g=a(s),h=a(f),_=a(u),y=a(m),E=a(d),b=a(l);var T=n(539780);function N(e,t,n){let i=()=>{let n=s[e[1]]??(0,T.Hc)(e[1])??0;return t?-1*n:n};switch(e[0]){case"p":n.padding={top:i(),bottom:i(),left:i(),right:i()};break;case"pt":n.padding=n.padding||{},n.padding.top=i();break;case"pb":n.padding=n.padding||{},n.padding.bottom=i();break;case"pl":n.padding=n.padding||{},n.padding.left=i();break;case"pr":n.padding=n.padding||{},n.padding.right=i();break;case"py":n.padding=n.padding||{},n.padding.top=i(),n.padding.bottom=i();break;case"px":n.padding=n.padding||{},n.padding.left=i(),n.padding.right=i()}}function v(e,t,n){let i=()=>{let n=s[e[1]]??(0,T.Hc)(e[1])??0;return t?-1*n:n};switch(e[0]){case"m":n.margin={top:i(),bottom:i(),left:i(),right:i()};break;case"mt":n.margin=n.margin||{},n.margin.top=i();break;case"mb":n.margin=n.margin||{},n.margin.bottom=i();break;case"ml":n.margin=n.padding||{},n.margin.left=i();break;case"mr":n.margin=n.margin||{},n.margin.right=i();break;case"my":n.margin=n.margin||{},n.margin.top=i(),n.margin.bottom=i();break;case"mx":n.margin=n.margin||{},n.margin.left=i(),n.margin.right=i()}}function w(e,t,n){let i=()=>{let n=e.length-1,i=s[e[n]]??(0,T.Hc)(e[n])??0;return t?-1*i:i};switch(e[0]){case"top":n.y={type:"top",offset:i()};break;case"left":n.x={type:"left",offset:i()};break;case"bottom":n.y={type:"bottom",offset:i()};break;case"right":n.x={type:"right",offset:i()}}}function x(e,t){if("rounded"!==e[0])return;let n=()=>{let t=e.length-1;return u[e[t]]??(0,T.Hc)(e[t])??0};if(1===e.length){t.cornerRadius={topLeft:4,topRight:4,bottomLeft:4,bottomRight:4};return}if(2===e.length){t.cornerRadius={topLeft:n(),topRight:n(),bottomLeft:n(),bottomRight:n()};return}switch(t.cornerRadius=t.cornerRadius||{},e[1]){case"t":t.cornerRadius.topLeft=n(),t.cornerRadius.topRight=n();break;case"e":case"r":t.cornerRadius.bottomRight=n(),t.cornerRadius.topRight=n();break;case"b":t.cornerRadius.bottomRight=n(),t.cornerRadius.bottomLeft=n();break;case"s":case"l":t.cornerRadius.bottomLeft=n(),t.cornerRadius.topLeft=n();break;case"ss":case"tl":t.cornerRadius.topLeft=n();break;case"se":case"tr":t.cornerRadius.topRight=n();break;case"es":case"bl":t.cornerRadius.bottomLeft=n();break;case"ee":case"br":t.cornerRadius.bottomRight=n()}}function S(e){let t=e.slice(1).join(T.rR);if("transparent"===t)return[];let n=t.split("/"),i=n[0],r=n[1]??"",a=d[i]??(0,T.G2)(i);if(!a||!a.match(/^#?[0-9a-f]{3,8}$/i))return null;if(!r||!p[r])return a;let o=(0,T.tK)(a);return o&&p[r]&&(o.a=p[r]??1),o}function I(e,t,n){if("bg"!==e[0]&&"text"!==e[0]||n&&("bg"===e[0]&&"Text"===n||"text"===e[0]&&"Text"!==n))return;let i=S(e);i&&(t.fill=i)}function k(e,t){"opacity"===e[0]&&(t.opacity=p[e[1]]??(0,T.kG)(e[1])??1)}function A(e,t){if("flex"===e[0]){switch(e[1]){case"nowrap":t.wrap=!1;break;case"wrap":t.wrap=!0;break;case"row":case"row-reverse":t.direction="horizontal";break;case"col":case"col-reverse":t.direction="vertical"}return}}function C(e,t,n){if("justify"===e[0]){let i="vertical"===t?"verticalAlignItems":"horizontalAlignItems";switch(e[1]){case"start":n[i]="start";break;case"end":n[i]="end";break;case"center":n[i]="center";break;case"between":n.spacing="auto"}}if("items"===e[0]){let i="vertical"===t?"horizontalAlignItems":"verticalAlignItems";switch(e[1]){case"start":n[i]="start";break;case"end":n[i]="end";break;case"center":n[i]="center";break;case"baseline":"horizontal"===t&&(n[i]="baseline")}}}function O(e,t,n){let i=()=>"full"===e[1]?"fill-parent":"fit"===e[1]?"hug-contents":s[e[1]]??(0,T.Hc)(e[1])??void 0;if("w"===e[0]){let e=i();void 0!==e&&("Line"===n?t.length=e:t.width=e);return}if("h"===e[0]){let e=i();void 0!==e&&(t.height=e);return}}function R(e,t){let n=()=>{let t=e.length-1;return"max"===e[0]&&"w"===e[1]&&c[e[t]]?c[e[t]]:s[e[t]]??(0,T.Hc)(e[t])??void 0};if("min"===e[0]){if("w"===e[1]){let e=n();void 0!==e&&(t.minWidth=e);return}if("h"===e[1]){let e=n();void 0!==e&&(t.minHeight=e);return}}if("max"===e[0]){if("w"===e[1]){let e=n();void 0!==e&&(t.maxWidth=e);return}if("h"===e[1]){let e=n();void 0!==e&&(t.maxHeight=e);return}}}function L(e,t,n){if("Text"===n||"border"!==e[0])return;let i=()=>{"stroke"in t||(t.stroke="#000000")};if(1===e.length){t.strokeWidth=1,i();return}if(2===e.length&&r.y$.isInteger(e[1])){switch(e[1]){case"0":t.strokeWidth=0,i();break;case"2":t.strokeWidth=2,i();break;case"4":t.strokeWidth=4,i();break;case"6":t.strokeWidth=6,i();break;case"8":t.strokeWidth=8,i()}return}let a=S(e);a&&(t.stroke=a)}function D(e,t){if("text"===e[0]){let n=(()=>{let t=e.length-1;return f[e[t]]??(0,T.Hc)(e[t])})();n&&(t.fontSize=n)}}function P(e,t){if("leading"===e[0]){let n=(()=>{let t=e.length-1,n=o[e[t]];if("normal"===e[t])return"auto";if(n)return`${(100*n).toFixed(0)}%`;let i=l[e[t]];if(i)return i;let r=(0,T.Hc)(e[t]);if(r)return r;let a=(0,T.kX)(e[t]);return a?`${a.toFixed(0)}%`:null})();n&&(t.lineHeight=n)}}function M(e,t){if("font"===e[0]){let n=(()=>{let t=e.length-1;return m[e[t]]})();n&&(t.fontWeight=n)}}function F(e,t){switch(e){case"italic":t.italic=!0;break;case"not-italic":t.italic=!1;break;case"underline":t.textDecoration="underline";break;case"linethrough":t.textDecoration="strikethrough";break;case"uppercase":t.textCase="upper";break;case"lowercase":t.textCase="lower";break;case"capitalize":t.textCase="title";break;case"normal-case":t.textCase="original"}}function U(e,t){if(e.startsWith("text-"))switch(e){case"text-left":t.horizontalAlignText="left";break;case"text-center":t.horizontalAlignText="center";break;case"text-right":t.horizontalAlignText="right";break;case"text-justify":t.horizontalAlignText="justified"}if(e.startsWith("align-"))switch(e){case"align-top":t.verticalAlignText="top";break;case"align-middle":t.verticalAlignText="center";break;case"align-bottom":t.verticalAlignText="bottom"}}function z(e,t,n){if("gap"!==e[0])return;let i=(()=>{let n=e.length-1,i=s[e[n]]??(0,T.Hc)(e[n])??void 0;return t?-1*i:i})();if(void 0!==i){if(2===e.length){n.spacing={horizontal:i,vertical:i};return}switch(n.spacing=n.spacing||{},e[1]){case"x":n.spacing.horizontal=i;break;case"y":n.spacing.vertical=i}}}function $(e,t){switch(e[0]){case"block":case"inline-block":case"inline":case"flex":case"inline-flex":case"table":case"inline-table ":case"table-caption":case"table-cell ":case"table-column ":case"table-column-group ":case"table-footer-group ":case"table-header-group ":case"table-row-group":case"table-row":case"flow-root":case"grid":case"inline-grid":case"hidden":case"visible":t.hidden=-1!==e.indexOf("hidden")}}function B(e){return g[e]||`[${e.toFixed(0)}px]`}function H(e){return h[e]||`[${e.toFixed(0)}px]`}function j(e){return y[e]||`[${e.toFixed(0)}]`}function q(e){return E[e]||`[${e}]`}function G(e){let t=_[e];return e>=999?"full":t||`[${e.toFixed(0)}px]`}function W(e,t){switch(t){case"PIXELS":{let t=b[e];if(t)return t;return`[${e.toFixed(0)}px]`}case"PERCENT":for(let[t,n]of Object.entries(o))if(Math.round(100*n)===Math.round(e))return t;return`[${e.toFixed(0)}%]`;default:(0,i.assertNever)(t)}}function K(e){return[0,2,4,8].includes(e)?`${e}`:`[${e.toFixed(0)}px]`}},539780:(e,t,n)=>{n.d(t,{AD:()=>c,G2:()=>s,H:()=>h,Hc:()=>a,Zx:()=>d,kG:()=>l,kX:()=>o,rR:()=>u,tK:()=>p});var i=n(897459);let r=/^\[(?:([a-z-]+):)?(.+)\]$/i;function a(e){let t=r.exec(e);if(t&&t[2].endsWith("px")){let e=t[2].slice(0,t[2].length-2);return i.y$.isInteger(e)?Number(e):null}return null}function o(e){let t=r.exec(e);if(t&&t[2].endsWith("%")){let e=t[2].slice(0,t[2].length-1);return i.y$.isInteger(e)?Number(e):null}return null}function l(e){let t=r.exec(e);if(t&&t[2]){let e=t[2];return i.y$.isNumber(e)?Number(e):null}return null}function s(e){let t=r.exec(e);return t&&t[2].startsWith("#")?t[2]:null}let c=/\s+/,u="-";function d(e){let t=!1,n=e.split(u);return""===n[0]&&1!==n.length&&(t=!0,n.shift()),{classParts:n,isNegative:t}}function p(e,t=!1,n=1){let i=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!i)return null;let r=i[1];if(r.length>=8&&t)return g(f(r.substring(0,2)),f(r.substring(2,4)),f(r.substring(4,6)),f(r.substring(6,8)));if(7===r.length&&t)return g(f(r.substring(0,2)),f(r.substring(2,4)),f(r.substring(4,6)),m(r[6]));if(r.length>=6)return g(f(r.substring(0,2)),f(r.substring(2,4)),f(r.substring(4,6)),n);if(5===r.length&&t)return g(m(r[0]),m(r[1]),m(r[2]),f(r.substring(3,5)));if(4===r.length&&t)return g(m(r[0]),m(r[1]),m(r[2]),m(r[3]));if(r.length>=3)return g(m(r[0]),m(r[1]),m(r[2]),n);if(2===r.length){let e=f(r);return g(e,e,e,n)}else if(1===r.length){let e=m(r);return g(e,e,e,n)}return null}function m(e){return f(`${e}${e}`)}function f(e){return Math.min(Math.max(parseInt(e,16)/255,0),1)}function g(e,t,n,i=1){return isNaN(e)||isNaN(t)||isNaN(n)||isNaN(i)?null:{r:e,g:t,b:n,a:i}}function h(e){let t=e.a??1,n=Math.round(255*e.r).toString(16),i=Math.round(255*e.g).toString(16),r=Math.round(255*e.b).toString(16),a=Math.round(255*t).toString(16);return 1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),1===r.length&&(r="0"+r),1===a.length&&(a="0"+a),"#"+n+i+r+(1!==t?a:"")}},582626:(e,t,n)=>{n.d(t,{iK:()=>_,wP:()=>y});var i=n(411855),r=n(86625),a=n(707458),o=n(330654),l=n(574724),s=n(202655),c=n(894443),u=n(356390);let d=`
You are an expert component creator in Figma. You identify the text content within a new component that should be assigned to properties.

You are given a screenshot of a new component, and the code representation of that component. Here is the Figma JSX for the component:

\`\`\`jsx
{{jsx}}
\`\`\`

Given the submitted screenshot image, you will return the following information about the component:
- Suggest a component name.
- Suggest a component description.
- Identify the node IDs in the JSX above that should be replaced with references to text properties. Return the IDs along with the new property name in a key-value pair.

Guidelines:
- Every property name you suggest must correspond directly 1:1 to a node ID listed above. You cannot assign more than one property to the same node ID.
- Be judicious and only identify the most important elements to become properties. Only some text nodes deserve to be properties, others can be left static.

Return in the following JSON format:
\`\`\`json
{
  "componentName": <SuggestedComponentName>,
  "componentDescription": <SuggestedComponentDescription>,
  "nodeIdsToPropertyNames: {[id: string]: PropertyName},
}
\`\``,p=`
You are an expert component creator in Figma. You identify the text content within components in a component set that should be assigned to properties.

You are given a screenshot of a new component set, which contains one or more components laid out in a 2D grid, and the code representation of that component set. Here is the Figma JSX for the component set:

\`\`\`jsx
{{jsx}}
\`\`\`

Given the submitted screenshot image, you will return the following information about the component set:
- Suggest a component set name.
- Suggest a component set description.
- Identify the node IDs in the JSX above that should be replaced with references to properties. Return the IDs along with the new property name in a key-value pair.

Guidelines:
- Every property name you suggest must correspond directly 1:1 to a node ID listed above. You cannot assign more than one property to the same node ID.
- Be judicious and only identify the most important elements to become properties. Only some text nodes deserve to be properties, others can be left static.
- Components in a component set are related (e.g. variants of a button). The properties you suggest should be consistent across all components in the set.

Return in the following JSON format:
\`\`\`json
{
  "componentName": <SuggestedComponentName>,
  "componentDescription": <SuggestedComponentDescription>,
  "nodeIdsToPropertyNames: {[id: string]: PropertyName},
}
\`\``;function m(e){if("SYMBOL"!==e.type)return!1;let t=[e];for(;t.length>0;){let e=t.pop();if(e&&"INSTANCE"!==e.type){if("TEXT"===e.type)return!0;t.push(...e.childrenNodes)}}return!1}function f(e){return("SYMBOL"===e.type||!!e.isStateGroup)&&(e.isStateGroup?e.childrenNodes.some(m):m(e))}async function g(e){let t=await (0,c.gC)(e),n=(e.isStateGroup?p:d).replace("{{jsx}}",t.jsx);return function(e){if(!e)throw Error("No content detected in GPT response");let t=e.match(/```json\n([\s\S]*?)```/g);if(!t?.length)return;let n=JSON.parse(t[0].replace(/```json\n|```/g,""));return E.parse(n)}((await l.Ay.openai.completeChat({model:"gpt-4o-2024-05-13",temperature:.5,n:1,messages:[{role:"system",content:n},{role:"user",content:[{type:"image_url",image_url:{url:t.base64}}]}],use_cache:!1})).choices[0].message.content)}function h(e,t){if(e?.type==="SYMBOL"||e?.isStateGroup){for(let n of(e.name=t.componentName,e.description||(e.description=t.componentDescription),Object.keys(t.nodeIdsToPropertyNames))){let i=a.q.instance.get(n);if(!i||"TEXT"!==i.type||i.isInstanceSublayer)continue;let r=e.componentPropertyDefinitions(),o=i.componentPropertyReferences();if(o?.characters)continue;let l=t.nodeIdsToPropertyNames[n],s=function(e,t){for(let n in e)if("VARIANT"!==e[n].type){let e=n.split("#");if(e.slice(0,e.length-1).join("#")===t)return n}else if(n===t)return n;return null}(r,l);s&&r[s]?.type==="TEXT"||(s=e.addComponentPropertyDefinition(l,"TEXT",i.characters,void 0)),i.setComponentPropertyReferences({...i.componentPropertyReferences(),characters:s})}u.Y5.commit()}}function _(){let[e,t]=i.useState({loaded:0,total:0});return{submit:i.useCallback(async e=>{let n=a.q.instance.getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===s.vh),i=a.q.instance.getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&"Atoms"===e.name);if(0===(e=e??[...n?.childrenNodes??[],...i?.childrenNodes??[]]).length)return;let o=e.filter(f);for(let e of(t({loaded:0,total:o.length}),o)){t(e=>({loaded:e.loaded+1,total:e.total}));let n=await g(e);n&&r.l7.user("apply-suggested-props",()=>{h(e,n)})}},[]),progress:e}}function y(){return{submit:i.useCallback(async e=>{if(e)return await g(e)},[]),apply:i.useCallback(h,[])}}let E=o.object({componentName:o.string(),componentDescription:o.string(),nodeIdsToPropertyNames:o.record(o.string())})},894443:(e,t,n)=>{n.d(t,{Mb:()=>d,Q$:()=>m,SV:()=>c,Z$:()=>u,_J:()=>p,gC:()=>f});var i=n(851061),r=n(574724),a=n(287497),o=n(747202),l=n(640209),s=n(479296);let c="plugin_playground";function u(e){let t=e.match(/```jsx([\s\S]*?)(```|$)/);return t?t[1].trim():""}async function d(e){await new Promise(t=>{setTimeout(()=>{t()},e)})}let p=(0,s.n)(async function(e,t,n=()=>!0,i){let a=(await r.Ay.design.firstDraftGenerateV2Stream(e,(0,o.Lp)({clientLifecycleId:i}))).getReader(),l={};try{for(;;){let e=a.read(),{done:i,value:r}=await e;if(i||(r.theme&&(l.theme=r.theme??{}),r.dsKit&&(l.dsKit=r.dsKit),r.jsx&&(l.jsx+=r.jsx),r.trace&&(l.trace=r.trace),r.presets&&(l.presets=r.presets),!n()))break;t(l)}}finally{a.releaseLock()}});function m(e){return Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})}async function f(e){let t=await e.loadImagesAndExport([{imageType:"PNG",constraint:{type:"CONTENT_WIDTH",value:Math.min(e.size.x,function(e,t=1024){return e.size.y>e.size.x?Math.floor(t*e.size.x/e.size.y):t}(e))},contentsOnly:!0,useAbsoluteBounds:!1,colorProfile:"DOCUMENT"}]),n=`data:image/png;base64,${(0,i.encode)(t)}`,r=await (0,a.YJ)({nodeIds:[e.guid],options:{skipNodeIds:!1,includeName:!0,detachInstances:!0,componentUsageOrDefinition:"DEFINITION",autoLayoutTagName:"div",frameTagName:"div"}});if(!r.jsxStr)throw Error(`Could not get node JSX for node ID: ${e.guid}`);return{base64:n,jsx:r.jsxStr}}(0,s.n)(async function(e){return(await l.Gh.postFirstDraftMatchPresetModes({kit_key:e.kitKey,is_local:e.isLocal,user_prompt:e.userPrompt})).data.meta})},736916:(e,t,n)=>{n.d(t,{EH:()=>u,MC:()=>s,ji:()=>c,l0:()=>o,xo:()=>l,zp:()=>a});var i=n(374626),r=n(582947);let a="user_has_generated_ai_summary",o="has_dismissed_summarization_nudge",l=(0,r.r1)(a),s=(0,r.r1)(o),c=(0,i.E3)("last_saw_summarization_nudge","0"),u=(0,i.E3)("seen_summarization_nudge_count",0)},212478:(e,t,n)=>{n.d(t,{Jg:()=>H,xn:()=>F});var i=n(411855),r=n(188507),a=n(634832),o=n(842700),l=n(629019),s=n.n(l),c=n(966712),u=n(374626),d=n(153234),p=n(522739),m=n(776621),f=n(268537),g=n(46481),h=n(939863),_=n(483990),y=n(226055),E=n(728325),b=n(855418),T=n(318812),N=n(234945),v=n(498606),w=n(279145),x=n(855466),S=n(666258),I=n(298543),k=n(947968),A=n(882643),C=n(157147),O=n(136297),R=n(405206),L=n(187409);function D(e){return`flyout-dropdown-${e}`}let P=e=>{switch(e){case"move-flyout":return(0,h.t)("fullscreen.flyout.move_tools");case"region-flyout":return(0,h.t)("fullscreen.flyout.region_tools");case"pen-flyout":return(0,h.t)("fullscreen.flyout.drawing_tools");case"shape-flyout":return(0,h.t)("fullscreen.flyout.shape_tools");case"boolean-flyout":return(0,h.t)("fullscreen.flyout.boolean_groups");case"styles-flyout":return(0,h.t)("fullscreen.flyout.styles");case"symbol-flyout":return(0,h.t)("fullscreen.flyout.components");case"prototype-view-flyout":return(0,h.t)("fullscreen.flyout.prototype_view");default:return""}};function M(e,t,n){let r,a,l;if("currentTool"===e){let e=(0,b.LW)(t);r=(0,b.SD)(t),l=a=e?.ui3Icon||i.createElement(o.V,null)}else{let e=(0,b.bs)(n);r=(0,b.Yy)(n),a=e?.ui3Icon||i.createElement(o.V,null),l=b.bs(n)?.ui3FlyoutIcon??a}return{icon:r,ui3Icon:a,ui3FlyoutIcon:l}}function F(e){let[t,n]=i.useState(null),o=(0,T.Um)(),l=(0,r.wA)(),c=(0,y.GS)(),u=i.useCallback(()=>{n(null)},[]);i.useEffect(()=>(d.y6(u),()=>d.nS(u)));let f=(e,t)=>e&&t?e.action===t.action:!e&&!t,h=(0,r.d4)(t=>e.item.children.find(e=>{if((0,C.Zk)(e)){let n=e.property&&t.mirror.appModel[e.property]===e.propertyValue,i=e.isActive&&e.isActive(t);return n||i}return!1}),f),_=(0,r.d4)(n=>{let i=e.item.children.find(e=>(0,C.Zk)(e)&&(0,w.Yh)(n.mirror.appModel,e.action));return"symbol-flyout"===e.item.name?i:h||(t&&(0,w.Yh)(n.mirror.appModel,t.action)?t:i)},f),b=(0,r.d4)(e=>!!_&&(0,w.Yh)(e.mirror.appModel,_.action));if(!_)return null;b||(0,m.x1)("FlyoutView",`Expected defaultItem with action ${_.action} to be enabled`);let N=!!h&&!(0,w.TY)(o)&&!e.disabled&&e.styleActiveItem,S=o?.type===D(e.item.name),I=M(_.property,_.propertyValue,_.action);(0,a.assertDev)(null!==I.icon,"No icon for tool or action");let k=!0;if(S){for(let t of e.item.children)if((0,C.Zk)(t)&&(void 0!==t.property||void 0!==t.isActive)){k=!1;break}}let R=e.item.name===A.MR,F=i.createElement(A.$0,{item:e.item,defaultItem:_,dropdownKey:D(e.item.name),tooltipText:P(e.item.name),additionalDispatchData:{items:e.item.children},recordingKey:e.recordingKey,disabled:e.disabled}),z=i.createElement("div",{className:s()(c?L.fullHeightSidebarFlyout:L.flyout,(0,O.M)(!0,N),S?L.flyoutDropdownShown:null),"data-tooltip-type":v.Ib.LOOKUP,"data-tooltip":_.action,"data-onboarding-key":e.item.onboardingKey,"data-testid":_.action},i.createElement(p.D8,{className:c?L.fullHeightSidebarFlyoutButton:L.flyoutButton,recordingKey:d.Pt(e.recordingKey,"default",_.recordingKey),onMouseDown:E.VU.get(_.action,"toolbar")},I&&I.icon&&i.createElement(g.U,{svg:I.icon},I.ui3FlyoutIcon)),i.createElement(x.c,{svgContainerClassName:L.chevron,dispatch:l,showingDropdown:S,dropdownKey:D(e.item.name),tooltipText:P(e.item.name),additionalDispatchData:{items:e.item.children},recordingKey:d.Pt(e.recordingKey,"chevron"),dataTestId:`${e.item.name}-chevron`,rcsHandlerId:"flyout_dropdown_opened",dataOnboardingKey:e.item.name,isUI3:c,className:s()({[L.fullHeightSidebarFlyoutChevron]:c,[L.fullHeightSidebarFlyoutDropdownShown]:c&&S})}));return i.createElement("div",null,R?F:z,S&&i.createElement(U,{item:e.item,onFlyoutItemClick:(e,t)=>{n(e);let i=e.actionOnFlyoutItemClick??e.action;E.VU.get(i,"toolbar")(t)},hideCheck:k,recordingKey:e.recordingKey}))}function U(e){let t=(0,r.d4)(e=>e.dropdownShown),n=(0,y.GS)(),a=(0,u.md)(S.oO);if(!t||!t.data?.targetRect)return i.createElement(i.Fragment,null);let o=e.item.flyoutShowItemIcons||void 0===e.item.flyoutShowItemIcons;return i.createElement(I.Cf,{targetRect:n&&"prototype-view-flyout"===e.item.name?{top:t.data.targetRect.top,right:t.data.targetRect.right,bottom:t.data.targetRect.bottom+(n?4:0),left:t.data.targetRect.left-91,width:t.data.targetRect.width,height:t.data.targetRect.height}:t.data.targetRect,className:e.item.largeDisplayMode?L.largeDisplayDropdown:L.pointingDropdown,showPoint:!n,propagateCloseClick:!0,orientation:e.item.largeDisplayMode?"horizontal":"vertical",type:e.item.largeDisplayMode?I.it.MATCH_BACKGROUND:I.it.DEFAULT,footer:e.item.footer},t.data?.items&&t.data.items.map((t,n)=>(0,C.HK)(t)?i.createElement(f.wv,{key:n}):e.item.largeDisplayMode?i.createElement(B,{key:n,item:t,simulatedHoverActionName:a,onFlyoutItemClick:e.onFlyoutItemClick,recordingKey:e.recordingKey}):i.createElement($,{key:n,item:t,showItemIcon:o,hideCheck:e.hideCheck,simulatedHoverActionName:a,onFlyoutItemClick:e.onFlyoutItemClick,recordingKey:e.recordingKey})))}function z(e,t){let n=(0,r.d4)(N.nj),i=!!(0,r.d4)(t=>(0,C.Zk)(e)&&e.isActive&&e.isActive(t)),{action:a,property:o,propertyValue:l,description:s}=e,c=(0,w.Yh)(n,a),u=void 0!==l&&n[o]===l,d=t?M(o,l,a):null;return{isEnabled:c,isChecked:u||i,icons:d,text:e.text||H(a),shortcutText:(0,w.c1)(n.keyboardShortcuts,a),descriptionText:s?H(s):void 0}}function $({item:e,showItemIcon:t,hideCheck:n,simulatedHoverActionName:r,onFlyoutItemClick:a,recordingKey:o}){let{isEnabled:l,isChecked:s,icons:u,text:p,shortcutText:m}=z(e,t);return i.createElement(R.a1,{key:e.action,text:p,shortcut:m,isEnabled:l,isChecked:s,onPointerUp:(0,c.kc)().ce_flyout_pointer_up_enabled?t=>{a(e,t)}:void 0,onClick:(0,c.kc)().ce_flyout_pointer_up_enabled?void 0:t=>{a(e,t)},hideCheck:n,recordingKey:d.Pt(o,"flyout",e.recordingKey),onboardingKey:e.onboardingKey,simulateHover:e.action===r,tooltip:k.TT.includes(e.action)?e.action:void 0},u&&u.icon?i.createElement(g.U,{svg:u.icon},u.ui3Icon):null)}function B({item:e,simulatedHoverActionName:t,onFlyoutItemClick:n,recordingKey:r}){let{isEnabled:a,isChecked:o,icons:l,text:s,shortcutText:c,descriptionText:u}=z(e,!0);return i.createElement(R.by,{key:e.action,text:s,description:u,shortcut:c,isEnabled:a,isChecked:o,onPointerUp:t=>n(e,t),recordingKey:d.Pt(r,"flyout",e.recordingKey),onboardingKey:e.onboardingKey,simulateHover:e.action===t,tooltip:k.TT.includes(e.action)?e.action:void 0},l&&l.icon?i.createElement(g.U,{svg:l.icon},l.ui3Icon):null)}function H(e){try{return(0,_.A)(e)}catch(t){return(0,h.t)(`fullscreen_actions.${e}`)}}},914905:(e,t,n)=>{n.d(t,{b:()=>o,h:()=>a});var i=n(38580),r=n(766022);let a=(0,i.eU)(null),o=(0,i.eU)(r.GR.DEFAULT_EXPANDED)},351631:(e,t,n)=>{n.d(t,{Y:()=>C,e:()=>A});var i=n(438201),r=n(611407),a=n(88354),o=n(196859),l=n(675678),s=n(587670),c=n(707458),u=n(38329),d=n(966712),p=n(776621),m=n(218881),f=n(96328),g=n(356390),h=n(617453),_=n(497306),y=n(457630),E=n(94500),b=n(456795),T=n(132572),N=n(86625),v=n(395701),w=n(105110),x=n(107390),S=n(196619),I=n(574724),k=n(677074);let A=async({clientLifecycleId:e,abortController:t})=>{(0,d.kc)().prototype_ai_magic_link_ensemble_model&&((0,x.g4)(e=>{let t=e.name,n=e.time;u.D.dispatch((0,E.Zh)({name:"prototype.ai_magic_link_feature_computed",params:{name:t,time:n}}))}),(0,S.NX)(e=>{let t={gpt_elapsed_time:e.gptElapsedTime,num_gpt_interactions:e.numGPTInteractions,interactions_removed:e.interactionsRemoved,num_interactions_need_destination_node:e.numInteractionsNeedDestinationNode,num_interactions_destination_node_is_same_tlf:e.numInteractionsDestinationNodeIsSameTLF};u.D.dispatch((0,E.Zh)({name:"prototype.ai_magic_link_gpt_post_processing",params:t}))}),(0,w.i)(async e=>{let t=e.batch.map(e=>Object.entries(e).reduce((e,[t,n])=>(e[t]=n,e),{}));return await I.Ay.design.magicLinkClassifier({data:t},{...(0,k.Ay)()})}));let n=c.q.instance;if(!n)throw Error("No scene found");let y=n.getCurrentPage();if(!y)throw Error("No page found");let A=u.D.getState().mirror.sceneGraphSelection,C=u.D.dispatch,O=s.Ez5.editorPreferences().toggleDebugShowMagicLinkClustering.getCopy(),R=Object.keys(A);R=R.flatMap(e=>{let t=n.get(e);return t&&"SECTION"===t.type&&t.childrenNodes?t.childrenNodes.map(e=>e.guid):[e]});let L=(0,h.UK)().toggleMagicLinkUseVision.getCopy(),D=Object.keys(A);if(1===D.length){let e=n.get(D[0]);e&&"SECTION"===e.type&&(D=e.childrenNodes.filter(e=>e.isTopLevelFrame()).map(e=>e.guid))}let P=(D=D.filter(e=>e&&s.X3B.isValidNodeForMagicLink(e))).every(e=>{let t=n.get(e);return!!t&&"FRAME"===t.type&&t.isTopLevelFrame()}),M=D.flatMap(e=>_.kh(n,e)?.guid??[]);C((0,E.Zh)({name:"prototype.ai_magic_link_started",params:{selectedNodeIds:JSON.stringify(R),numSelectedNodes:R?.length??0,acceptedNodeIds:JSON.stringify(D),numAcceptedNodes:D?.length??0,selectionType:P?"broad":"narrow",selectedNodeTlfIds:JSON.stringify(M)}}));let F=(e,t)=>{let i=n.get(e);if(!i||!n.get(t))return!1;if(i.guid===t)return!0;let r=i.childrenGuids;return!!r&&r.some(e=>e===t||F(e,t))};try{if(!(0,T.Ll)())throw Error("Magic link is not enabled");let l=(await (0,m.hW)("magic_link_ai_models")).get("variant","gpt"),u=(0,o.Ac)(l),p=u.gptConfig.jsxFilters,h=n.get(y.guid);if(!h||!h.childrenGuids)throw Error("No page node found");let _="",w="",x=[],S=(0,b.k9)(h.guid,n),I=[],k={type:"EMPTY"},A=D.map(e=>(0,a.Sh)(e,S)).filter(b.Pe),R=(0,i._q)(A);if(P){let e;let t=(0,b.dT)(D,n,!1,p);if(L){!function(e){let t=1/0,n=1/0;for(let i of e)(0,a.ul)(i,e=>{e.x&&e.y&&(t=Math.min(e.x,t),n=Math.min(e.y,n))});for(let i of e)(0,a.ul)(i,e=>{e.x&&e.y&&(e.x=e.x-t,e.y=e.y-n)})}(t);let n=function(){let e;if(N.l7.system("magic-link-vision",()=>{let t=c.q.instance,n=t.getCurrentPage()?.directlySelectedNodes;if(!n||n.length<1)throw Error("No Selection for screenshotting");let i=v.r.fromFigRect(n[0].absoluteBoundingBox);for(let e of n){let t=v.r.fromFigRect(e.absoluteBoundingBox);i=i.unionWith(t)}let r=t.createNode("SLICE");r.x=i.left(),r.y=i.top(),r.size={x:i.width(),y:i.height()},t.getCurrentPage()?.appendChild(r);let a=Math.min(1024,r.size.x);e=r.export([{constraint:{type:"CONTENT_WIDTH",value:a},useAbsoluteBounds:!0,imageType:"JPEG"}]),r.removeSelfAndChildren()}),!e)throw Error("Unable to screenshot nodes");return e}();e="data:image/jpeg;base64,"+(0,f.H9)(n)}x.push(...t);let i=(0,a.rq)({...S,children:A});k={type:"TOPLEVEL",variant:l,topLevelFrames:x,unfilteredScene:i,imageBase64:e}}else{I=s.X3B.getContextFramesForMagicLink(D),O&&s.Ez5.canvasViewState().temporarilyHoveredNodes.set(I);let e=D.filter(e=>{let t=n.get(e);return t?.isTopLevelFrame()}).length,t=h.childrenGuids.filter(e=>{let t=n.get(e);return t?.isTopLevelFrame()}).length,i=I.filter(e=>!!n.get(e)&&D.some(t=>F(e,t))).length;if(C((0,E.Zh)({name:"prototype.ai_magic_link_narrow_selection",params:{totalSelectedNodes:D.length,numSelectedTLFs:e,numSelectedNonTLFs:D.length-e,numTLFsInContext:I.length,numTLFsOnPage:t,numTLFsContainingSelectedNodes:i}})),1===D.length){let e=n.get(D[0]);if(e){let t=(0,b.EV)(e);t&&(I=I.filter(e=>e!==t.guid))}}let a=(0,b.dT)(I,n,!0,p);_=(0,r.Lg)(a).join(", "),w=await (0,b.ao)(A,R,p),k={type:"HOTSPOTS",variant:"gpt",contextFrames:I,selectedHotspots:w,frameTextSummaries:_,unfilteredScene:S,selectedNodeIDs:D}}(0,d.kc)().internal_only_debug_tools&&console.log("Kicking off Magic Link",{vision:L,method:P?"Broad":"Narrow"});let M=(0,b.LI)(u,k,e,t,R,C),U=new Promise(e=>{t.signal.addEventListener("abort",()=>e({generatedInteractions:[],errorMessage:"aborted"}))}),z=await Promise.race([M,U]);if(z.errorMessage){if("aborted"===z.errorMessage)return g.Y5.triggerAction("end-magic-link"),z;if("All frames were filtered out"===z.errorMessage)throw new b.ft;throw Error(z.errorMessage)}let $=z.generatedInteractions.map(e=>e.id);return C((0,E.Zh)({name:"prototype.ai_magic_link_completed",params:{status:"success",connectorIds:JSON.stringify($),numConnectors:$.length}})),z}catch(e){throw e instanceof a.FI&&((0,p.ED)("Magic Link",JSON.stringify(e.looseNodeInfo)),(0,p.$D)(l.FigmaTeam.PROTOTYPING,Error(e.toString()))),C((0,E.Zh)({name:"prototype.ai_magic_link_completed",params:{status:"failure",reason:e.toString(),numConnectors:0}})),e}};function C(e,t){let n=function(e,t){if(0===e.length)return null;let n=e.flatMap(e=>{let{buttonID:n,destinationScreenID:i}=e;return[(0,_.kh)(t,n)||t.get(n),i?t.get(i):null].filter(e=>!!e)}).map(e=>e.absoluteBoundingBox).reduce((e,t)=>e?{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),w:Math.max(e.x+e.w,t.x+t.w)-Math.min(e.x,t.x),h:Math.max(e.y+e.h,t.y+t.h)-Math.min(e.y,t.y)}:t);return{origin:{x:n.x,y:n.y},size:{x:n.w,y:n.h}}}(e,t),i=t.getCurrentPage(),r=i?.guid;return n&&r?(0,y.QZ)({nodeId:r,nodeAbsoluteBounds:n,alwaysPan:!0,noPanViewportMultiplier:0,panJustEnoughViewportMultiplier:.5}):Promise.resolve(null)}},670652:(e,t,n)=>{n.d(t,{w:()=>P});var i=n(411855),r=n(634832),a=n(52339),o=n(374626),l=n(939863),s=n(574724),c=n(677074),u=n(222478),d=n(188507),p=n(279145),m=(e=>(e[e.NEEDS_INITIAL_SELECTION=0]="NEEDS_INITIAL_SELECTION",e[e.SELECTION_LOST=1]="SELECTION_LOST",e[e.SELECTION_OK=2]="SELECTION_OK",e))(m||{}),f=n(709731),g=n(562432),h=n(438773),_=n(320063);function y(e){let t=Math.random()*e.reduce((e,{weight:t=1})=>e+t,0),n=0;for(let i of e)if((n+=i.weight??1)>=t)return i.content;return e[0].content}var E=n(232309),b=n(686589),T=n(883216),N=n(726710),v=n(219292),w=n(118567),x=n(263086),S=n(326186),I=n(504440),k=n(966712),A=n(384775),C=n(144119);function O(){let e=(0,d.wA)(),t=(0,o.md)(S.Tm),n=(0,i.useCallback)(()=>{t||(0,S.mD)(e,{source:"rewrite_action"}),(0,A.jD)(e,null,{forceClose:!1})},[e,t]);return i.createElement(I.$n,{variant:"secondary",onClick:n},(0,l.tx)("ai_text_tools.rewrite.tone.label"))}var R=n(573591);let L="rewrite-view",D=(0,o.E3)("rewrite_this_prompt_history",[]);function P(){let e=function(e){let[t,n]=(0,i.useState)(y(e));return(0,_.h)(()=>{n(y(e))}),t}([{content:(0,l.t)("ai_text_tools.rewrite.placeholder.marketing")},{content:(0,l.t)("ai_text_tools.rewrite.placeholder.shorter")},{content:(0,l.t)("ai_text_tools.rewrite.placeholder.bullet_points")},{content:(0,l.t)("ai_text_tools.rewrite.placeholder.email_boss")},{content:(0,l.t)("ai_text_tools.rewrite.placeholder.sing_songy")},{content:(0,l.t)("ai_text_tools.rewrite.placeholder.softer_tone")},{content:(0,l.t)("ai_text_tools.rewrite.placeholder.pop_song"),weight:.001}]),[t,n]=i.useState(""),o=u.JT.REWRITE_TEXT,{promptHistory:I,addPromptToHistory:A}=(0,h.a)(D,e=>e),{shiftAllNodesOutOfSlideMargins:P,resetShiftedNodes:M,resetNodePositionMap:F}=(0,x.eX)(L),{slidesTextResizeCallback:U}=(0,x.DX)(u.JT.REWRITE_TEXT,L),{saveOriginalNodeInfos:z,resetOriginalNodeInfos:$,resetAllNodesToOriginalTextStyles:B}=(0,S.cR)(L),H=(0,i.useCallback)(e=>{let{eventType:t,node:n}=e;switch(t){case"BEFORE_STREAM_START":P();return;case"AFTER_STREAM_CHUNK":U(n);return}},[U,P]),{longRunningAction:j,onRun:q,cancel:G,restoreSelection:W,resetText:K,lastRun:V}=(0,R.Hd)({makeCortexRequest:({texts:e,parameters:t,targetMap:n,authInfo:i})=>(z(n.values()),s.Ay.shared.adjustText({texts:e,action:{type:"REWRITE_TEXT",prompt:t.prompt},jsonMode:e.length>1},i)),featureType:o,allowEmptyTextNodes:!0,onNodeStreamEvent:H}),{state:X,aiTrackingContext:Y,tasks:J}=j,{close:Z}=(0,g.cq)(),Q=function(){let e=(0,k.kc)().figjam_ai_piper_action_transitions,t=(0,C.sO)(),n=(0,S.Ne)();return t&&n&&e}(),ee=function(e){let t=(0,d.d4)(t=>(0,p.Yh)(t.mirror.appModel,e)),[n,r]=i.useState(t),a=0;return t&&n?a=2:n&&!t&&(a=1),(0,i.useMemo)(()=>({state:a,confirmInitialSelection:()=>r(!0)}),[a])}(u.JT.REWRITE_TEXT),et=J.length,en=J.filter(e=>e.state===f.z8.FAILED).length;switch(X){case f.qy.RUNNING:return i.createElement(w.F,{onCancel:()=>{G(),Z()},aiTrackingContext:Y},(0,l.tx)("ai.rewriting"));case f.qy.INITIAL:switch(ee.state){case m.NEEDS_INITIAL_SELECTION:case m.SELECTION_LOST:return i.createElement(T.A,{action:u.JT.REWRITE_TEXT,actionLabel:(0,l.tx)("fullscreen_actions.quick_actions.rewrite-this"),actionIcon:i.createElement(a.T,null),onPerform:ee.confirmInitialSelection,aiTrackingContext:Y,getCustomDisabledTextFromSelectedNodes:e=>(0,R.bu)(e,{allowEmptyText:!0}),instructionAction:{type:"learn_more",url:u.fN}},(0,l.tx)("ai_text_tools.selection_instruction"));case m.SELECTION_OK:return i.createElement(v.A,{prompt:t,onChangePrompt:n,onRun:()=>{F(),A(t),q({prompt:t})},suggestion:e,submitLabel:(0,l.tx)("ai.rewrite"),extraFooter:Q&&i.createElement(O,null),promptHistory:I,recordingKey:"rewriteText.prompt",suggestionPills:[{label:(0,l.t)("ai_text_tools.rewrite.shorter.label"),prompt:(0,l.t)("ai_text_tools.rewrite.shorter.prompt")},{label:(0,l.t)("ai_text_tools.rewrite.casual.label"),prompt:(0,l.t)("ai_text_tools.rewrite.casual.prompt")},{label:(0,l.t)("ai_text_tools.rewrite.replace.label"),prompt:(0,l.t)("ai_text_tools.rewrite.replace.prompt")}],aiTrackingContext:Y,featureNameForInstrumentation:"rewrite_text"});default:(0,r.assertNever)(ee.state)}case f.qy.ERROR:let ei;let{error:er}=j,ea=null,eo=[{type:b.f.TRY_AGAIN,callback:()=>{q({prompt:t})}}];return er instanceof R.Vz&&(ei=(0,l.tx)("ai_text_tools.content_length_exceeded"),eo=[]),er instanceof R.Jd&&(ei=(0,l.tx)("ai_text_tools.missing_fonts"),eo=[]),et>0&&en>0&&en<et&&(ea=(0,l.tx)("ai_text_tools.rewrite.couldnt_count",{failed:en,total:et})),(0,c.sZ)(er)===c.BQ.CONTENT_LENGTH_LIMIT&&(ei=(0,l.tx)("ai_text_tools.content_length_exceeded")),i.createElement(b.E,{error:j.error,buttons:eo,aiTrackingContext:Y,customMessage:ei,secondaryMessage:ea});case f.qy.DONE:return i.createElement(N.O,{iterateOptions:[{type:N.i.UNDO,callback:()=>{K(),B(),M(),(0,f.B3)(u.JT.REWRITE_TEXT),$()}},{type:N.i.MAKE_CHANGES,callback:()=>{W(),F(),(0,f.B3)(u.JT.REWRITE_TEXT),$(),n("")}}],aiTrackingContext:{...Y,iteration_view_type:E.$J.SUCCESS_WITH_ITERATION},recordingKey:"rewriteText",targets:V?V.targets.map(e=>e.node.guid):void 0});case f.qy.CANCELLED:return null;default:(0,r.assertNever)(X)}}},573591:(e,t,n)=>{n.d(t,{Hd:()=>C,Jd:()=>k,Vz:()=>S,ay:()=>x,bu:()=>O,n4:()=>I,y_:()=>R});var i=n(411855),r=n(341092),a=n(675678),o=n(587670),l=n(86625),s=n(707458),c=n(38329),u=n(966712),d=n(374626),p=n(395900),m=n(776621),f=n(470504),g=n(939863),h=n(550273),_=n(988022),y=n(574724),E=n(677074),b=n(356390),T=n(222478),N=n(709731),v=n(719624),w=n(695426);class x extends Error{constructor(e){super(),this.message=e}}class S extends Error{constructor(){super(),this.reportToSentry=!1,this.name="TooManyTextLayersError",this.message="Too many text layers"}}class I extends Error{constructor(){super(),this.reportToSentry=!1,this.name="NoTextCharactersFoundError",this.type="no_text_characters_found"}}class k extends Error{constructor(){super(),this.reportToSentry=!1,this.name="MissingFontsError",this.message="Missing Fonts"}}let A=async({params:e,abortController:t,onTasksUpdate:n})=>{let i=new p.M4;i.start();let{state:d,makeCortexRequest:f,clientLifecycleId:g,featureType:h,excludeDigitsAndSpecialChar:v,onNodeStreamEvent:w,onError:A,onSuccess:C,editScopeLabel:O}=e,{targets:L,parameters:D}=d,P=c.D.getState(),M=P.openFile?.key,F={numLayers:L.length,numLayersAdjusted:0,numDeltasHallucinated:0,featureType:h};D&&"prompt"in D&&D.prompt&&"string"==typeof D.prompt&&(F.promptLength=D.prompt.length),D&&"language"in D&&D.language&&"string"==typeof D.language&&(F.language=D.language),(0,_.ds)("ai_text_tools_started",M,P,F);let U=e=>(A?.(e),e);if(L.length>100)throw U(new S);if(v&&0===L.length)throw U(new I);let z=[],$=new Map,B=[];for(let e of L){let t=($.size+1).toString(),{node:n,effectiveText:i}=e;n.hasMissingFont?z.push({nodeGuid:e.node.guid,state:N.z8.FAILED,error:new k}):(B.push({id:t,text:i}),$.set(t,e),z.push({nodeGuid:e.node.guid,state:N.z8.INCOMPLETE}))}if(n&&n(z),0!==z.length&&z.every(e=>e.state===N.z8.FAILED&&e.error instanceof k))throw U(new k);let H=null;try{let e={...(0,E.Ay)(),clientLifecycleId:g};if(H=await f({texts:B,parameters:D,authInfo:e,jsonMode:!0,targetMap:$}),t.signal.aborted||!s.q.instance.getCurrentPage())return;let r=new y.c6(H),a=new Map,c=!0,d=(0,u.kc)().aip_text_undo_midstream_fix;for await(let{delta:e,id:u}of r){let r;if(t.signal.aborted)return;if(1===$.size)r=$.values().next().value;else{if(!u)throw U(new x("Missing ID in response from Cortex"));r=$.get(u)}if(F.timeToFirstToken=i.getElapsedTime(),!r){F.numDeltasHallucinated++;continue}if(!r.node.isAlive())continue;z=z.map(e=>e.nodeGuid===r.node.guid?{...e,state:N.z8.SUCCEEDED}:e),n&&n(z);let p=r.selectionRange?.start??0,m=r.selectionRange?.end??r.node.characters.length,f=r.node;a.has(r)||(l.l7.ai(O,()=>{f.spliceCharacters(p,m,"","BEFORE"),w?.({eventType:"BEFORE_STREAM_START",node:f})}),a.set(r,p));let g=a.get(r);l.l7.ai(O,()=>{if(e&&f){if(d&&function(e,t,n){return e.characters===t.effectiveText&&e.characters.length!==n}(f,r,g)){t.abort();return}f.spliceCharacters(g,g,e,"BEFORE"),a.set(r,g+e.length),F.numLayersAdjusted=a.size,w?.({eventType:"AFTER_STREAM_CHUNK",node:f}),r.selectionRange?s.q.instance.getCurrentPage()?.setSelectedTextRange(r.node.guid,r.selectionRange.start,g+e.length):1===L.length&&R(f.guid),d&&(c?(o.glU?.requestNextCommitMergeWithPrevious(o.zvt.AI_TEXT_MANIPULATION_START),c=!1):o.glU?.requestNextCommitMergeWithPrevious(o.zvt.AI_TEXT_MANIPULATION_DELTA),o.glU?.triggerActionEnum(o.rcl.COMMIT,{}))}})}d||b.Y5.triggerAction("commit");let p=z.filter(e=>e.state===N.z8.FAILED);if(p.length>0&&p[0].state===N.z8.FAILED)throw U(p[0].error);(0,_.ds)("ai_text_tools_complete",M,P,F),C?.(D)}catch(t){z=z.map(e=>e.state!==N.z8.SUCCEEDED?{...e,state:N.z8.FAILED,error:t}:e),n&&n(z);let e=t;throw h===T.JT.SLIDES_REWRITE_TEXT&&t instanceof r.G1&&(e=(0,E.Gx)(t)),"reportToSentry"in e&&!e.reportToSentry||((0,m.kF)("text_feature_type",F.featureType),(0,m.$D)(a.FigmaTeam.AI_PRODUCTIVITY,e,{extra:{...F,numberOfNodes:L.length}})),(0,_.ds)("ai_text_tools_failed",M,P,{...F,error:e}),U(e)}finally{F.timeToCompletion=i.getElapsedTime(),i.stop(),t.signal.aborted&&(0,_.ds)("ai_text_tools_cancelled",M,P,F),H?.cancel()}};function C({makeCortexRequest:e,featureType:t,allowEmptyTextNodes:n=!1,excludeDigitsAndSpecialChar:r=!1,onNodeStreamEvent:a,onError:o,onSuccess:c,editScopeLabel:u="adjust-text"}){let p=(0,N.RL)(t,A),{start:m,stop:f}=p,[g,_]=(0,i.useState)(null),[y,E]=(0,i.useState)(null),[,b]=(0,d.fp)(v.Q8);function T(){l.l7.ai(u,()=>{if(g){let e=s.q.instance.getCurrentPage();for(let{node:t,nodeText:n,selectionRange:i}of g.targets)if(t.isAlive()&&(t.spliceCharacters(0,t.characters.length,n,"BEFORE"),i)){let{start:n,end:r}=i;e?.setSelectedTextRange(t.guid,n,r)}e&&g.selection.length>1&&(e.directlySelectedNodes=g.selection)}})}return{resetText:T,restoreSelection:function(){let e=s.q.instance.getCurrentPage();e&&g&&g.selection.length>1&&(e.directlySelectedNodes=g.selection)},lastParameters:y,onRun:async function(i){let l={targets:(0,h.Ey)({allowEmpty:n,excludeDigitsAndSpecialChar:r}),parameters:i,selection:s.q.instance.getCurrentPage()?.directlySelectedNodes??[]};E(i),_(l),b(""),await m({state:l,makeCortexRequest:e,featureType:t,excludeDigitsAndSpecialChar:r,onNodeStreamEvent:a,onError:o,onSuccess:c,editScopeLabel:u})},cancel:function(){f(),T()},longRunningAction:p,lastRun:g}}function O(e,t){let{onlyAllowSingular:n,allowEmptyText:r}=t,a=t.instruction??(0,g.tx)("ai_text_tools.selection_instruction");if(n&&e&&(0===e.length||e.length>1||"TEXT"!==e[0].type))return a;let o=(0,h.Gc)(e,{allowEmpty:!0});if(0===o.length)return a;let l=o.reduce((e,t)=>e+t.characters.length,0);return(0!==l||r)&&l>4e4?i.createElement(w.B,{gap:8},i.createElement("span",{className:f.cx.textBodyMediumStrong.$},(0,g.tx)("ai_text_tools.select_fewer_characters")),i.createElement("span",{className:f.cx.textBodyMedium.colorTextSecondary.$},(0,g.tx)("ai_text_tools.selected_character_count",{currentCharacters:l.toLocaleString(),maxCharacters:4e4.toLocaleString()}))):a}function R(e){let t=s.q.instance.getCurrentPage(),n=t?.directlySelectedNodes[0]?.guid;t&&n===e&&t.setSelectionToSingleNode(e)}},547583:(e,t,n)=>{n.d(t,{p:()=>f,z:()=>h});var i=n(411855),r=n(188507),a=n(504440),o=n(572206),l=n(470504),s=n(939863),c=n(662275),u=n(237870),d=n(746806);function p({url:e}){return i.createElement("img",{src:e,className:l.cx.maxW100.$,alt:"debug"})}function m(e){let{obj:t,depth:n=0}=e;if(null===t)return i.createElement("span",{className:l.cx.colorTextTertiary.$},(0,s.t)("assistant.debug.null"));if("object"!=typeof t){if("string"==typeof t){if(t.startsWith("{")&&t.endsWith("}"))try{let e=JSON.parse(t);return i.createElement(m,{obj:e,depth:n})}catch(e){}return t.startsWith("data:image")?i.createElement(p,{url:t}):t.length>300&&t.match(/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/)?i.createElement(p,{url:`data:image/jpeg;base64,${t}`}):i.createElement("span",{className:l.cx.colorTextSuccess.$},'"',t,'"')}return"number"==typeof t?i.createElement("span",{className:l.cx.colorTextSelected.$},t):"boolean"==typeof t?i.createElement("span",{className:l.cx.colorTextComponent.$},t.toString()):i.createElement("span",null,t)}let r=Array.isArray(t),a=r?["[","]"]:["{","}"],o=Object.entries(t);return i.createElement("div",{style:{marginLeft:`${8*n}px`}},a[0],o.length>0&&i.createElement("div",null,o.map(([e,t],a)=>i.createElement("div",{key:e},!r&&i.createElement("span",{className:l.cx.colorTextDanger.$},`"${e}:" `),i.createElement(m,{obj:t,depth:n+1}),a<o.length-1&&","))),a[1])}function f(e){let{data:t}=e;return i.createElement("pre",{contentEditable:!0,className:"font-mono text-sm select-all text-wrap"},i.createElement(m,{obj:t}))}function g({messages:e}){return i.createElement("div",null,i.createElement("div",{className:l.cx.px2.py2.$},i.createElement(f,{data:e})))}let h=(0,u.Ju)(function({messages:e}){let t=(0,r.wA)();return i.createElement(d.vx,{onClose:()=>{t(c.AS())},initialPosition:new o.Mi(0,0),initialWidth:400,allowResizeWidth:!0,autoflowHeight:!0,title:(0,s.t)("assistant.debug.title"),dragHeaderOnly:!0},i.createElement("div",{className:l.cx.px2.py2.$,style:{height:600,overflowX:"scroll",overflowY:"scroll"}},i.createElement(a.$n,{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e,void 0,2))}},(0,s.t)("assistant.debug.copy_all")),i.createElement(g,{messages:e})))},"AssistantDebugModal",u.ZU.YES)},119081:(e,t,n)=>{n.d(t,{p:()=>U});var i=n(411855),r=n(188507),a=n(634832),o=n(908946),l=n(667859),s=n(587670),c=n(38329),u=n(646240),d=n(498750),p=n(939863),m=n(239349),f=n(356390),g=n(895083),h=n(843495),_=n(100197),y=n(94500),E=n(279145),b=n(354235),T=n(456795),N=n(775810),v=n(351631),w=n(222478),x=n(709731),S=n(562432),I=n(30075),k=n(384775),A=n(41398),C=n(686589),O=n(596378),R=n(883216),L=n(118567),D=n(862442),P=n(29680),M=n(684798);function F({magicLinkOutput:e,aiTrackingContext:t}){let n=(0,D.Z)(),{generatedInteractions:r}=e,a=(0,i.useMemo)(()=>r.map(e=>e.id),[r]),o=(0,i.useRef)((0,P.eY)());return(0,i.useEffect)(()=>{(0,h.NT)(s.FAf.PROTOTYPE),n((0,v.Y)(r.map(e=>e.mapping),o.current)),s.glU.selectNodesFromNoodles(a),s.X3B.setMagicLinkIsDone()},[r,a,n]),(0,M.x)({aiTrackingContext:t})}function U(){return i.createElement(b.d,null,i.createElement($,null))}function z(e){return s.X3B.getMagicLinkSelectionInfo().selectedDisplayAmount}function $(){let e=(0,r.wA)(),t=(0,x.RL)(w.JT.MAGIC_LINK,v.e),{start:n,stop:l,state:c,aiTrackingContext:d}=t,{close:m}=(0,S.cq)(),g=(0,i.useRef)(null),E=(0,_.ut)((0,h.aY)(),s.FAf.DESIGN);(0,i.useEffect)(()=>{c===x.qy.INITIAL&&null===g.current&&(g.current=E,(0,h.NT)(s.FAf.PROTOTYPE))},[c,E]),(0,i.useEffect)(()=>()=>{c===x.qy.INITIAL&&null!==g.current&&(0,h.NT)(g.current)},[c]);let b=(0,u.Xr)(N.d_);switch(c){case x.qy.INITIAL:return i.createElement(R.A,{action:w.JT.MAGIC_LINK,actionIcon:i.createElement(o.B,null),actionLabel:(0,p.tx)("fullscreen_actions.quick_actions.add-interactions"),onPerform:()=>{g.current=null,n({})},getCustomDisabledTextFromSelectedNodes:t=>{let n,i;let{selectedDisplayAmount:r,tlfAmount:a,onlyTopLevelNodesSelected:o}=s.X3B.getMagicLinkSelectionInfo();return a>10?(n=(0,p.tx)("magic_link.tlf_selection_too_large"),i="Select 10 or fewer frames"):o||(n=(0,p.tx)("magic_link.select_a_set_of_layers"),i="Select a set of layers"),i&&e((0,y.Zh)({name:"prototype.ai_magic_link_action_instruction",params:{instruction:i,numSelectedNodes:r,numSelectedTlfs:a}})),n},getCustomSelectedNodesAmount:z,aiTrackingContext:d,instructionAction:{type:"learn_more",url:w.Xy}},(0,p.tx)("magic_link.select_a_set_of_frames"));case x.qy.RUNNING:return b(!1),f.Y5.triggerAction("start-magic-link"),i.createElement(L.F,{onCancel:()=>{l(),m()},aiTrackingContext:d},(0,p.tx)("magic_link.running"));case x.qy.DONE:return i.createElement(F,{magicLinkOutput:t.result,aiTrackingContext:d});case x.qy.ERROR:if(f.Y5.triggerAction("end-magic-link"),t.error instanceof T.ft)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"invalid_selection_from_generic_layers"}})),i.createElement(B,null);if(t.error instanceof T.sT)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated"}})),i.createElement(O.u,null,(0,p.tx)("magic_link.no_interactions_generated_general"));if(t.error instanceof T._U)return e((0,y.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated_existing_interactions"}})),i.createElement(O.u,null,(0,p.tx)("magic_link.no_interactions_generated_existing_interactions"));return i.createElement(C.E,{error:t.error,aiTrackingContext:d});case x.qy.CANCELLED:return f.Y5.triggerAction("end-magic-link"),null;default:(0,a.assertNever)(c)}}function B(){let e=(0,m.Tv)();return i.createElement(O.u,{buttons:[{label:(0,p.t)("fullscreen.context_menu.auto_rename_layers"),onClick:()=>{(0,k.$I)({moduleToOpen:{type:"custom",module:i.createElement(A.A,{source:g.uQ.MAGIC_LINK}),name:I.Sn.RENAME_LAYERS_TOAST,beforeModuleOpen:()=>{(0,x.cT)(w.JT.MAGIC_LINK),(0,E.Yh)(c.D.getState().mirror.appModel,w.JT.AUTO_RENAME_LAYERS)&&(0,x.Ag)(w.JT.AUTO_RENAME_LAYERS,g.Ay,{source:g.uQ.MAGIC_LINK,overwriteNames:!1})}},trackingData:{source:"magic_link_rename_layers_suggestion_toast"}})},variant:"secondary",iconPrefix:i.createElement(l._,null),shortcuts:[{key:d.Uz.ENTER,modifier:[d.xH.META]}]}]},(0,p.tx)(1===e.length?"magic_link.rename_layer_suggestion":"magic_link.rename_layers_suggestion"))}},113316:(e,t,n)=>{n.d(t,{h:()=>A});var i=n(411855),r=n(188507),a=n(520411),o=n(504440),l=n(343887),s=n(397863),c=n(139689),u=n(921211),d=n(939683),p=n(966712),m=n(915440),f=n(711525),g=n(99380),h=n(564577),_=n(493323),y=n(939863),E=n(67294),b=n(391119),T=n(738269),N=n(973149),v=n(177505),w=n(335682),x=n(611978),S=n(279453),I=n(335650);let k="recordings_entrypoint_window--secondaryText--nAp30";function A(e){let t=i.useContext(g.q5),n=(0,w.q5)(),r=n?.key,u=(0,a.U1)(),d=i.useMemo(()=>({fileKey:r??""}),[r]),h=(0,m.Rs)(S.bCq,d,{enabled:(0,p.kc)().async_spotlight}),{onClose:E}=e;i.useEffect(()=>{(0,p.kc)().async_spotlight&&n&&(0,I.Q3)(n,I.ZP.RECORDINGS_WINDOW_OPENED,I.uT.SIDEBAR)},[n]);let b=i.useCallback(()=>{(0,I.Q3)(n,I.ZP.NEW_RECORDING_BUTTON_CLICKED,I.uT.SIDEBAR),t.initializeRecordingMedia(),E()},[E,t,n]),T=i.useMemo(()=>{if("loaded"!==h.status||h.data.walkthroughMediaByFileKey.status!==f.tT.Loaded)return[];let e=h.data.walkthroughMediaByFileKey.data;return e?e.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()):[]},[h]);return(0,p.kc)().async_spotlight&&r?i.createElement("div",{className:"recordings_entrypoint_window--windowContainer--dPDES",ref:u},i.createElement("div",{className:"recordings_entrypoint_window--windowHeader--r4wNv"},i.createElement("div",{className:"recordings_entrypoint_window--windowTitle--eDl4P"},(0,y.tx)("recordings.recordings")),i.createElement("div",{className:"recordings_entrypoint_window--windowHeaderRight--QHvmv"},i.createElement("button",{onClick:b,className:"recordings_entrypoint_window--actionStrip--xnHRK"},i.createElement(s.x,null),(0,y.tx)("recordings.new_recording")),i.createElement(l.K,{onClick:e.onClose,"aria-label":(0,y.t)("general.close")},i.createElement(c.A,null)))),"loaded"!==h.status||h.data.walkthroughMediaByFileKey.status!==f.tT.Loaded?i.createElement("div",{className:"recordings_entrypoint_window--loadingSpinnerContainer--r2n7-"},i.createElement(_.kt,null)):0===T.length?i.createElement("div",{className:"recordings_entrypoint_window--emptyStateContainer--QYgG-"},i.createElement("div",{className:"recordings_entrypoint_window--emptyStateTextSection--fpTRu"},i.createElement("div",{className:"recordings_entrypoint_window--boldText---2EPl"},(0,y.tx)("recordings.no_recordings_yet")),i.createElement("div",{className:k},(0,y.tx)("recordings.make_context_setting_easier"))),i.createElement(o.$n,{onClick:b},(0,y.tx)("recordings.new_recording"))):i.createElement("div",{className:"recordings_entrypoint_window--recordingsContainer--5-i0S"},T.map(t=>i.createElement(C,{recording:t,onClose:e.onClose,key:t.id})))):null}function C(e){let t=(0,x._6)(),n=(0,r.wA)(),a=(0,w.q5)(),o=(0,v.dh)(),l=(0,r.d4)(e=>e.versionHistory),s=(0,d.U)(),c=i.useMemo(()=>new N.f0(Number.POSITIVE_INFINITY,!1,!1),[]),[p,m]=i.useState(!1),g=async()=>{if("fullscreen"===t.view){(0,I.J1)(a.key,a.editorType,I.NA.SIDEBAR,e.recording.id),o!==e.recording.meta.pageId&&await (0,v.$P)(e.recording.meta.pageId,o,l,n,!1,s);let i={...t,walkthroughRecordingId:e.recording.id};n((0,T.$T)(i)),e.onClose()}},_=e.recording.meta.lengthMs.status===f.tT.Loaded?e.recording.meta.lengthMs.data:null,S=_?c.format(_/1e3):null;return i.createElement("div",{className:"recordings_entrypoint_window--recordingRow--tEVbx",key:e.recording.id,onClick:g,tabIndex:0,role:"button",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1)},i.createElement("div",{className:"recordings_entrypoint_window--profileImg--ssJ-s"},p?i.createElement(u.K,{className:"recordings_entrypoint_window--hoverPlayIcon--UZ5-8"}):i.createElement(b.H,{user:e.recording.creator,size:E.Pf.LARGE})),i.createElement("div",{className:"recordings_entrypoint_window--recordingInfo--mvIzC"},i.createElement("div",{className:"recordings_entrypoint_window--recordingInfoTopRow--8eH08"},i.createElement("div",{className:"recordings_entrypoint_window--recordingTitle--GdNUG"},(0,y.tx)("recordings.month_day",{monthStr:e.recording.createdAt.toLocaleString("default",{month:"short"}),dayNumber:e.recording.createdAt.getDate()})," - ",e.recording.meta.title),i.createElement("div",{className:k},i.createElement(h.h1,{date:e.recording.createdAt,style:"short"}))),i.createElement("div",{className:k},S," \xb7 ",e.recording.creator.handle)))}},882643:(e,t,n)=>{n.d(t,{IS:()=>w,MR:()=>v,$0:()=>x});var i=n(411855),r=n(187134),a=n(75395),o=n(921211),l=n(587670),s=n(629019),c=n.n(s),u=n(318812),d=n(498606),p=n(924430),m=n(188507),f=n(504440),g=n(897379),h=n(966712),_=n(470504),y=n(939863),E=n(392592),b=n(335682),T=n(157147),N=n(187409);let v="slides-presentation-flyout",w={type:T.ZU.FLYOUT,name:v,editModes:T.LB.concat([l.m1T.SLIDE_LAYOUT,l.m1T.PREVIEW]),nonEditorsAllowed:!0,loggedOutAllowed:!0,recordingKey:"slidesPresentationFlyout",onboardingKey:p.J5,flyoutDoNotStyleActiveItem:!0,largeDisplayMode:!0,children:[{action:"present-slides-audience-view",actionOnFlyoutItemClick:"set-slides-audience-view",recordingKey:"audienceViewPresent",featureFlags:["piper"],description:"present-slides-description",isActive:()=>!0},{action:"present-slides-presenter-view",actionOnFlyoutItemClick:"set-slides-presenter-view",recordingKey:"presenterViewPresent",featureFlags:["piper"],description:"present-slides-presenter-view-description"}],footer:i.createElement("div",{className:"slides_toolbar_items--copyPresentationLinkWrapper--wpxRz","data-onboarding-key":p.FM},i.createElement(function(){let e=(0,b.tS)(),t=(0,m.wA)(),n=i.useCallback(()=>{let n=`${(0,h.tl)().figma_url}/deck/${e}`;navigator.clipboard.writeText(n),t(E.F.enqueue({type:"copy-presentation-link-success",message:(0,y.t)("fullscreen_actions.copy-presentation-link-success")}))},[e,t]);return i.createElement(f.IK,{variant:"secondary",onClick:n},i.createElement("div",{className:_.cx.flex.flexRow.itemsCenter.justifyCenter.$},i.createElement(g.r,null),(0,y.tx)("fullscreen_actions.copy-presentation-link")))},null))};function x({item:e,defaultItem:t,dropdownKey:n,tooltipText:l,additionalDispatchData:s,recordingKey:p,disabled:m}){let{toggle:f,showing:g}=(0,u.BK)(n),h=i.useRef(null);return i.createElement("div",{ref:h,className:c()(N.fullHeightSidebarFlyout,{"slides_toolbar_items--flyoutDropdownShown--xV4l7":g,[N.disabledFullHeightSidebarFlyout]:m}),"data-tooltip-type":d.Ib.LOOKUP,"data-tooltip":t.action,"data-onboarding-key":e.onboardingKey,"data-testid":t.action},i.createElement(r.o,{eventListeners:["onClick"]},i.createElement(a.E,{actionOnPointerDown:!0,htmlAttributes:{"data-tooltip-type":d.Ib.TEXT,"data-tooltip":l,"data-testid":`${e.name}-button`},className:c()(N.fullHeightSidebarFlyoutButton,"slides_toolbar_items--flyoutButton--iXCH9",{"slides_toolbar_items--disabledFlyoutButton--o5Iom":m}),"aria-label":l,recordingKey:p,onClick:m?void 0:()=>{let e=h.current;f({data:{...s,targetRect:e.getBoundingClientRect()}})}},i.createElement(o.K,null))))}},334290:(e,t,n)=>{n.d(t,{rA:()=>eN,jX:()=>ev,kL:()=>eC,kF:()=>eA,n8:()=>eI,bu:()=>ew,QW:()=>eb,T0:()=>eO,xG:()=>eL,tO:()=>eP,w8:()=>eM,Es:()=>eR,U4:()=>eT,Kd:()=>ex});var i=n(411855),r=n(109388),a=n(188507),o=n(842700);function l(e){return i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m16.988 9.17.055.758.747.15A4.002 4.002 0 0 1 17 18H8a5 5 0 0 1-.34-9.989l.567-.038.257-.507a4.5 4.5 0 0 1 8.504 1.703M2 13a6 6 0 0 1 5.593-5.986 5.5 5.5 0 0 1 10.393 2.083A5.002 5.002 0 0 1 17 19H8a6 6 0 0 1-6-6m8.354-2.854a.5.5 0 0 0-.708.708l1.647 1.646-1.647 1.646a.5.5 0 0 0 .708.708L12 13.207l1.646 1.647a.5.5 0 0 0 .708-.708L12.707 12.5l1.647-1.646a.5.5 0 0 0-.708-.708L12 11.793z",clipRule:"evenodd"}))}var s=n(434228);function c(e){return(0,s.O)()?i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m17.043 9.928-.055-.759a4.5 4.5 0 0 0-8.504-1.703l-.257.507-.567.038A5 5 0 0 0 8 18h2a.5.5 0 0 1 0 1H8a6 6 0 0 1-.407-11.986 5.5 5.5 0 0 1 10.393 2.083A5.002 5.002 0 0 1 17 19h-3a.5.5 0 1 1 0-1h3a4 4 0 0 0 .79-7.922zm-4.69 1.219a.5.5 0 0 0-.707 0l-2.5 2.5a.5.5 0 1 0 .708.707l1.646-1.647V19a.5.5 0 1 0 1 0v-6.293l1.646 1.647a.5.5 0 0 0 .708-.707z",clipRule:"evenodd"})):i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m17.043 9.928-.055-.759a4.5 4.5 0 0 0-8.504-1.703l-.257.507-.567.038A5 5 0 0 0 8 18h1.5a.5.5 0 0 1 0 1H8a6 6 0 0 1-.407-11.986 5.5 5.5 0 0 1 10.393 2.083A5.002 5.002 0 0 1 17 19h-3.5a.5.5 0 0 1 0-1H17a4 4 0 0 0 .79-7.922zm-5.19 1.218a.5.5 0 0 0-.707 0l-3 3a.5.5 0 0 0 .708.708L11 12.707V19.5a.5.5 0 0 0 1 0v-6.793l2.146 2.147a.5.5 0 0 0 .708-.708z",clipRule:"evenodd"}))}var u=n(963757),d=n(587670),p=n(629019),m=n.n(p),f=n(776250),g=n(737947),h=n(939683),_=n(794272),y=n(915440),E=n(179940),b=n(153234),T=n(30637),N=n(743282),v=n(761870),w=n(195847),x=n(163023),S=n(46481),I=n(348425),k=n(715981),A=n(47506),C=n(939863),O=n(738269),R=n(662275),L=n(103907),D=n(483990),P=n(672517),M=n(198371),F=n(226055),U=n(516398),z=n(728325),$=n(356390),B=n(949632),H=n(369870),j=n(779709),q=n(855418),G=n(318812),W=n(321487),K=n(100197),V=n(239671),X=n(498606),Y=n(279145),J=n(793670),Z=n(887326),Q=n(233890),ee=n(707458),et=n(728587);function en(e){let t=(0,a.d4)(e=>e.mirror.appModel.pagesList),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),r=(0,a.wA)();if(!t)return null;let o=async e=>{await ee.q.instance.setCurrentPageFromNodeAsync(e.nodeId)},l=t.map(e=>({displayText:e.name,disabled:!1,isChecked:n===e.nodeId,nodeId:e.nodeId}));return i.createElement(et.j,{dispatch:r,items:l,showPoint:!0,parentRect:e.dropdown.data.targetRect,onSelectItem:o,recordingKey:"pagesPicker"})}var ei=n(227795),er=n(27928),ea=n(601538),eo=n(368702),el=n(157147),es=n(136297),ec=n(16112),eu=n(761070),ed=n(67029),ep=n(238472),em=n(432616),ef=n(593701),eg=n(974397),eh=n(874804);let e_=[er.PH.type];function ey(e){return e.iconOverride?{svg:e.iconOverride,ui3Icon:i.createElement(o.V,null)}:e.type===el.ZU.TOOL?(0,q.LW)(e.tool):e.type===el.ZU.ACTION||e.type===el.ZU.TEXT_BUTTON?(0,q.bs)(e.action):(console.error(`Couldn't find icon for item ${e}`),null)}function eE(e){return e.type===el.ZU.ACTION?(0,q.GG)(e.action):null}class eb extends b.o6{constructor(){super(...arguments),this.onClick=b.cZ(this,"click",z.VU.get(this.props.action,"toolbar"))}render(){let{action:e,text:t}=this.props;return i.createElement("div",{className:ec.dM},i.createElement("div",{key:`toolbar-action-button-${e}`,className:`${ec.uX} ${this.props.className?this.props.className:""}`,onClick:this.props.onClick||this.onClick,"data-tooltip-type":X.Ib.LOOKUP,"data-tooltip":e},t))}}function eT(e,t){return{ui2ClassName:m()(ec.gb,(0,es.M)(e,t),{[ec.YT]:t}),tooltipProps:{"data-tooltip-type":X.Ib.TEXT,"data-tooltip":t?(0,C.t)("fullscreen.focus_mode.toggle_variants.exit"):(0,C.t)("fullscreen.focus_mode.toggle_variants.enter"),"data-tooltip-submenu-open":!1,"data-tooltip-shortcut-key":"focus-mode-component-set-toggle"}}}function eN(e){let{item:t,isEnabled:n,isActive:r,showBadge:a,recordingKey:o}=e,l=(0,F.GS)(),s=e=>{z.VU.get(t.action,"toolbar")(),l&&e.stopPropagation()};if(!n)return null;let c=ey(t),u=c?.svg,d=eE(t),p=c?.ui3Icon,f=`toolbar-action-${t.action}`,g={"data-tooltip-type":X.Ib.LOOKUP,"data-tooltip":t.action,"data-onboarding-key":t.onboardingKey,"data-tooltip-submenu-open":r},h="focus-mode-component-set-toggle"===t.action?eT(n,r):null,_=h?.tooltipProps,y=h?.ui2ClassName;return c?i.createElement("span",{className:ec.WT},l?i.createElement(ei.YW,{recordingKey:o,onMouseDown:n?s:void 0,"aria-label":(0,D.A)(t.action),selected:r,showTooltipWhenSelectedIsTrue:!0,dataTestId:f,...g,..._},p):u?i.createElement(I.t,{id:f,key:f,dataTestId:f,svg:u,fallbackSvg:d||void 0,recordingKey:o,className:y??m()(ec.gb,(0,es.M)(n,r)),onMouseDown:n?s:void 0,...g,..._}):i.createElement(i.Fragment,null),a&&i.createElement("div",{className:ec.q3},i.createElement(x.B,{svg:em.A}))):i.createElement(i.Fragment,null)}eb.displayName="TextButton";let ev=i.memo(function({recordingKey:e}){let t=(0,G.Um)(),n=(0,a.d4)(e=>(0,Y.Yh)(e.mirror.appModel,el.ec.action)&&!!e.openFile),r=(0,a.d4)(e=>e.mirror.appModel.currentTool===el.ec.tool),o=(0,L.n6)(),l=(0,a.d4)(e=>e.mirror.appModel.topLevelMode);return i.useEffect(()=>{if(n&&r){let e=!0;return(0,eo.W)("right",()=>{e&&$.Y5.triggerAction("set-tool-default")}),()=>{e=!1}}},[n,r]),i.createElement(eO,{key:`tool-button-${el.ec.tool}`,dropdownShown:t,isEnabled:n,isActive:r,item:el.ec,numUnreadComments:o,recordingKey:e,topLevelMode:l})});function ew(){return(0,K.J2)((0,B.d)().showTimeSlicingEditRenderingDot)?i.createElement("div",{className:ec.e1,"data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,C.t)("time_sliced_edit_rendering.active"),"data-onboarding-key":"tsmer-status"},i.createElement(x.B,{className:ec.by,svg:ep.A})):null}function ex(){let[e,t]=i.useState(!1),[n,r]=i.useState(void 0),o=(0,a.d4)(e=>e.saveStatus?.hasUnsavedChanges),l=(0,a.d4)(e=>e.autosave.onboardingTooltipVisible),s=(0,y.Ym)()===y.Dj.CONNECTED||(0,T.PN)(),c=!!(0,a.d4)(e=>e.openFile);return i.useEffect(()=>(o||l||!s?void 0!==n||e||r(setTimeout(()=>{t(!0),r(void 0)},c?3e3:1e4)):(t(!1),clearTimeout(n),r(void 0)),()=>{clearTimeout(n)}),[o,l,e,n,s,c]),e}let eS=e=>{switch(e){case d.E63.SUPPRESS_UNSAVED_CHANGES_UI:case d.E63.NONE:return"";case d.E63.DISCONNECTED_AUTOSAVE_DISABLED:return(0,C.t)("unsaved_changes.disconnected.autosave_disabled");case d.E63.DISCONNECTED_SERVER_ISSUES:return(0,C.t)("unsaved_changes.disconnected.server_issues");case d.E63.DISCONNECTED_OTHER:return(0,C.t)("unsaved_changes.disconnected.other");case d.E63.SYNCING_AUTOSAVE_DISABLED:return(0,C.t)("unsaved_changes.syncing.autosave_disabled");case d.E63.SYNCING_SERVER_ISSUES:return(0,C.t)("unsaved_changes.syncing.server_issues");case d.E63.SYNCING_OTHER:return(0,C.t)("unsaved_changes.syncing.other");default:throw Error(`Unhandled tab close text enum value ${e}`)}},eI=i.memo(function(){let e=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState===d.kul.JOINED),t=(0,a.d4)(e=>e.saveStatus?.tabCloseText),n=(0,y.Ym)()===y.Dj.CONNECTED||(0,T.PN)(),r=ex(),o=t?eS(t):"",s=eu.A,u=i.createElement(l,null);return e&&(n?(s=ed.A,u=i.createElement(c,null)):(o=(0,C.t)("unsaved_changes.disconnected.live_updates"),s=eu.A)),!function(e,t,n,r,o){let l=(0,a.d4)(e=>e.saveStatus?.hasUnsavedChanges),[s,c]=i.useState(!1);i.useEffect(()=>{if(t&&!s){let t=n===eu.A?"offline":"unsaved";(0,f.sx)("Show Save Status Icon",{tooltipText:e,iconName:t,multiplayerJoined:r,livegraphConnected:o,hasUnsavedChanges:l},{forwardToDatadog:!0}),c(!0)}},[s,c,e,t,n,l,r,o])}(o,r,s,e,n),r?i.createElement("div",{className:ec.e1,"data-tooltip-type":X.Ib.TEXT,"data-tooltip":o,"data-onboarding-key":"multiplayer-save-status"},i.createElement(S.U,{svg:s},u)):null}),ek=e=>e===el.ec?(0,C.t)("fullscreen.accessibility.view_comments"):(0,D.A)(e.action),eA="fullscreen_menu_visible",eC="fullscreen_menu_hidden";function eO(e){let{isEnabled:t,isActive:n,item:r,numUnreadComments:a,recordingKey:o,isWide:l}=e,s=i.useRef(null),c=ey(r)?.svg||null,u=eE(r),p=j.z4.getIsExtension(),f=i.useRef(null);if(!n&&f.current&&f.current===document.activeElement&&Q.F2.focusCustomCanvasFocusElement(),!c)return null;function g(e){return i=>{t&&(n&&r.tool===d.NLJ.COMMENTS?($.Y5.triggerAction("set-tool-default"),e&&f.current?.focus()):z.VU.get(r.action,"toolbar")(i))}}return i.createElement("div",{key:r.action,"data-testid":r.action,className:ec.yT,ref:s},i.createElement(I.t,{svg:c,fallbackSvg:u||void 0,recordingKey:o,className:m()(ec.gb,(0,es.M)(t,n),l?ec.U:null),onMouseDown:g(!1),"data-tooltip-type":X.Ib.LOOKUP,"data-tooltip":r.action,"data-onboarding-key":r.onboardingKey,role:"button",tabIndex:0,onKeyDown:e=>(0,U.hx)({e,onClickHandler:g(!0)}),ariaLabel:ek(r),"aria-pressed":n,"data-fullscreen-intercept":!0,innerSpanRef:f}),!p&&a>0&&r.tool===d.NLJ.COMMENTS&&i.createElement("div",{className:n?ec.TE:ec.Zm}))}function eR(){return"main-menu"}let eL=i.memo(function(e){let t=i.createRef(),n=(0,a.wA)(),o=(0,N.g)(),{dropdownShown:l,modalShown:s,user:c,selectedView:d}=(0,_.R)(e=>({dropdownShown:e.dropdownShown,modalShown:e.modalShown,user:e.user,selectedView:e.selectedView})),p=(0,M.$D)(),m=(0,F.GS)();i.useEffect(()=>{(0,Y.TY)(l)?(0,A.YQ)({id:eA}):(0,A.YQ)({id:eC})},[l]);let f=i.useRef(null);return(0,H.eM)()?m?i.createElement("div",{className:ec.Ex},i.createElement(u.m,null)):null:i.createElement(k.i,{key:"toggle-menu-button",id:"toggle-menu-button",ref:t,className:`${ec.AQ} ${e.hideToolsClassName}`,recordingKey:"toggleMenuTopbarButton",selected:(0,Y.TY)(l),svg:eg.A,fallbackSvg:eh.A,showChevron:!0,chevronRef:f,positionOnChevron:!0,"data-tooltip-type":X.Ib.LOOKUP,"data-tooltip":eR(),onClick:()=>{let e=t.current,i=r.findDOMNode(e);if(!c||c.appData&&c.appData.loggedOut){i&&("fullscreen"===d.view&&d.editorType===V.nT.Whiteboard?(n(v.Ts({origin:"logged_out_main_menu_toolbar",redirectUrl:g.Ay.location.pathname,signedUpFromOpenSession:p})),n(R.to({type:J.x,data:{headerText:(0,C.t)("fullscreen.toolbar.create_an_account_to_do_more_with_fig_jam")}}))):n(O.j7({type:Y.G,data:{targetRect:i.getBoundingClientRect()}})));return}if(s?.type&&e_.includes(s?.type)&&n(R.ES({type:s.type})),(0,Y.TY)(l))n(O.oB());else if(i){let e={type:Y.pi,data:{targetRect:i.getBoundingClientRect()},hasOwnEscKeyHandler:!0};n(O.j7(e))}},ariaLabel:(0,C.t)("fullscreen_actions.main_menu"),"aria-haspopup":"menu","aria-expanded":(0,Y.TY)(l),"aria-controls":o,onboardingKey:ea.tO,isUI3:m,ui3Icon:i.createElement(u.m,null)},(0,Y.TY)(l)&&i.createElement(Z.e,{id:o,key:"fullscreen-menu","aria-labelledby":"toggle-menu-button",controlledByID:"toggle-menu-button",dropdown:l,recordingKey:"mainMenu",chevronRef:f,positionOnChevron:!0}),(0,Y.IS)(l)&&i.createElement(en,{dropdown:l}))}),eD=(0,P.tf)(eb),eP=i.memo(function(){let{openFile:e,selectedView:t}=(0,_.R)(e=>({openFile:e.openFile,selectedView:e.selectedView})),n=(0,M.$D)(),r=(0,a.wA)();return i.createElement(eD,{text:(0,C.t)("fullscreen.toolbar.log_in"),isEnabled:!0,action:"",onClick:()=>{let i="";"fullscreen"===t.view&&"DUPLICATE"===t.landingState?i=e?(0,C.t)("fullscreen.toolbar.log_in_or_create_an_account_to_get_a_copy_of",{file:e.name}):(0,C.t)("fullscreen.toolbar.log_in_or_create_an_account"):n&&(i=(0,C.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam"));let a=(0,E.qg)(g.Ay.location.search)["node-id"];r(v.Ts({origin:"logged_out_footer",formState:w.qB.SIGN_IN,redirectUrl:a?`${g.Ay.location.pathname}?node-id=${encodeURIComponent((0,W.E)(a))}`:g.Ay.location.pathname})),r(R.to({type:J.x,data:{headerText:i}}))},className:ec.eh,innerText:(0,C.t)("fullscreen.toolbar.log_in")})}),eM=i.memo(function(e){let t=(0,h.U)();return i.createElement(k.L,{ariaLabel:(0,C.t)("fullscreen.toolbar.missing_fonts"),key:"missing-fonts-button",svg:ef.A,className:ec.Er,onClick:()=>{t("missing_fonts_button_clicked"),d.glU.findMissingFontsAndShowPopover()},recordingKey:b.Pt(e,"missingFontsButton"),"data-tooltip-type":X.Ib.TEXT,"data-tooltip":(0,C.t)("fullscreen.toolbar.missing_fonts")})})},136297:(e,t,n)=>{n.d(t,{I:()=>i,M:()=>r});let i=n(187409);function r(e,t,n=!0){let a=i.enabledButton;return e?t&&n&&(a=i.activeButton):a=i.disabledButton,a}},974898:(e,t,n)=>{n.d(t,{e:()=>a});var i=n(237870),r=n(648022);let a="WORKSHOP_ONBOARDING";(0,i.Ju)(r.mG,a)},648022:(e,t,n)=>{n.d(t,{mG:()=>z,v6:()=>B,kO:()=>$});var i=n(411855),r=n(188507),a=n(69814),o=n(629019),l=n.n(o),s=n(38329),c=n(737947),u=n(563706),d=n(286640),p=n(761870),m=n(195847),f=n(175103),g=n(946689),h=n(632923),_=n(939863),y=n(838e3),E=n(662275),b=n(650769),T=n(672517),N=n(198371),v=n(988022),w=n(737499),x=n(335682),S=n(860178),I=n(227338),k=n(793670),A=n(160018),C=n(309325),O=n(488578),R=n(479296);let L="workshop_modals--textContainer--Fn3Oc",D="workshop_modals--disclaimer--wFoqk text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI",P="workshop_modals--figjamTryDisclaimer--g4iHA text--fontPos12--YsUAh text--_fontBase--QdLsd";function M({user:e,file:t}){let n=(0,r.wA)(),a=(0,i.useMemo)(()=>u.Ay.isMeetDevice?(0,_.t)("figjam_try.google_meet_user_name"):localStorage.getItem((0,I.H)())||"",[]),[o,l]=(0,i.useState)(a),[s,d]=(0,i.useState)(!1),f=(0,N.nF)(),g=f.enabled?f.id:null,h=!e,T=!!t?.isTryFile;return{openLoginModal:()=>{n(p.Ts({origin:"logged_out_footer",formState:m.qB.SIGN_IN,redirectUrl:c.Ay.location.pathname})),n(E.to({type:k.x,data:{headerText:"Log In",disableClickOutsideToHide:!0}}))},name:o,onNameChanged:e=>{l(e.target.value)},isNameError:s,onSubmit:i=>{if(i.preventDefault(),i.stopPropagation(),h&&(null==o||0===o.trim().length)){d(!0);return}h?(n(b.cq({name:o})),T&&t?.name===(0,_.t)("fullscreen.fullscreen_view_selector.untitled")&&n(y.S({userName:o,file_key:t.key}))):$(g,e.email),(0,v.Cu)({name:"Jam Session access file button",isAnonymous:h,isFigjamTry:T,userID:e?.id??null,userName:h?o:null,fileKey:t?.key}),n(E.Ce())},onClose:e=>{e.preventDefault(),e.stopPropagation(),n(b.cq({name:(0,_.t)("figjam_try.google_meet_user_name")})),T&&t?.name===(0,_.t)("fullscreen.fullscreen_view_selector.untitled")&&n(y.S({userName:o,file_key:t.key})),n(E.Ce())}}}function F({file:e}){let{openLoginModal:t,name:n,onNameChanged:r,isNameError:a,onSubmit:o,onClose:s}=M({file:e}),c=(0,w.BI)(),d=!c?.shouldOptimizeForIpadApp;return i.createElement(i.Fragment,null,i.createElement("img",{src:"https://static.figma.com/uploads/ff519560b46a66403ec0c45887a8f336270b7033",alt:"",className:"workshop_modals--figjamTryImage--pnbwF"}),i.createElement("div",{className:L},i.createElement("h1",{className:"workshop_modals--figjamTryHeader--5gdQ2 text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,_.tx)("figjam_try.onboarding_title"))),i.createElement(h.k0,{multiple:1}),i.createElement("div",{className:L},i.createElement("div",{className:"workshop_modals--figjamTrySubtitle--XIYgl text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,_.tx)("figjam_try.onboarding_subtext"))),i.createElement(h.k0,{multiple:3}),u.Ay.isMeetDevice?i.createElement(g.nD,{type:"close",fullWidth:!0,onClick:s},(0,_.tx)("figjam_try.onboarding_submit")):i.createElement("form",{onSubmit:o},i.createElement(g.il,{autoFocus:!0,className:l()("workshop_modals--figjamTryInput--vCslR",a&&"workshop_modals--figjamTryInputError--wUBqP"),placeholder:(0,_.t)("figjam_try.name_input_placeholder"),onChange:r,value:n}),a&&i.createElement("div",{className:"workshop_modals--figjamTryError--tCLy- text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,_.tx)("figjam_try.onboarding_name_validation_error")),i.createElement(h.k0,{multiple:2}),i.createElement(g.nD,{type:"submit",fullWidth:!0},(0,_.tx)("figjam_try.onboarding_submit"))),i.createElement(h.k0,{multiple:3}),i.createElement("div",{className:P},(0,_.tx)("figjam_try.onboarding_disclaimer",{tos:i.createElement(C.V,{url:u.Ay.isMeetDevice?A.A:A.Uw,title:(0,_.t)("figjam_try.onboarding_disclaimer_tos")}),privacy_policy:i.createElement(C.V,{url:u.Ay.isMeetDevice?A.bO:A.JD,title:(0,_.t)("figjam_try.onboarding_disclaimer_privacy_policy")})})),i.createElement(h.k0,{multiple:1}),d&&!u.Ay.isMeetDevice&&i.createElement("div",{className:P},(0,_.tx)("figjam_try.already_have_an_account",{log_in:i.createElement(g.Us,{className:"workshop_modals--figjamTryInlineLink--R8U28",onClick:t,trusted:!0},(0,_.tx)("figjam_try.already_have_an_account_log_in"))})))}function U({user:e,file:t}){let{openLoginModal:n,name:r,onNameChanged:a,isNameError:o,onSubmit:l}=M({user:e,file:t}),s=!e;return i.createElement(i.Fragment,null,i.createElement("div",{className:L},i.createElement("h1",{className:"workshop_modals--header--1TwZ- text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI"},(0,_.tx)("whiteboard.open_sessions.onboarding_title")),i.createElement("h1",{className:"workshop_modals--headerFilename--Z60l0 workshop_modals--header--1TwZ- text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI"},t?.name)),i.createElement(h.k0,{multiple:2}),i.createElement("div",{className:L},i.createElement("div",{className:"workshop_modals--subtitle---dQsr text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI"},(0,_.tx)("whiteboard.open_sessions.onboarding_subtext"))),i.createElement(h.k0,{multiple:2}),i.createElement("form",{onSubmit:l},s&&!u.Ay.isMeetDevice&&i.createElement(i.Fragment,null,i.createElement(f.F0,{autoFocus:!0,placeholder:(0,_.t)("whiteboard.open_sessions.onboarding_name_input_placeholder"),onChange:a,value:r}),o&&i.createElement("div",{className:"workshop_modals--brandError--wMV-m text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI"},(0,_.tx)("whiteboard.open_sessions.onboarding_name_validation_error")),i.createElement(h.k0,{multiple:2})),i.createElement(h.Wd,{type:"submit"},s?(0,_.t)("whiteboard.open_sessions.onboarding_anonymous_submit"):(0,_.t)("whiteboard.open_sessions.onboarding_viewer_submit",{email:e.email}))),s&&i.createElement(i.Fragment,null,i.createElement(h.k0,{multiple:2}),i.createElement("div",{className:L},i.createElement("div",{className:D},(0,_.tx)("whiteboard.open_sessions.onboarding_disclaimer",{button_text:s?(0,_.t)("whiteboard.open_sessions.onboarding_disclaimer_access_file"):(0,_.t)("whiteboard.open_sessions.onboarding_disclaimer_continue"),tos:i.createElement(C.V,{url:A.Uw,title:(0,_.t)("whiteboard.open_sessions.onboarding_disclaimer_tos")}),privacy_policy:i.createElement(C.V,{url:A.JD,title:(0,_.t)("whiteboard.open_sessions.onboarding_disclaimer_privacy_policy")})})),!u.Ay.isMeetDevice&&i.createElement(i.Fragment,null,i.createElement(h.k0,{multiple:1}),i.createElement("div",{className:D},(0,_.tx)("whiteboard.open_sessions.already_have_an_account",{log_in:i.createElement(g.Us,{className:"workshop_modals--inlineLink--knuU8",onClick:n,trusted:!0},(0,_.tx)("whiteboard.open_sessions.already_have_an_account_log_in"))}))))))}function z(){let e=(0,S.iZ)(),t=(0,x.q5)(),n=!!t?.isTryFile,r=s.D.getState().selectedView;return(r?.view==="fullscreen"?r.claim:null)?null:i.createElement(O.aF,{disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,className:"workshop_modals--workshopOnboardModal---pZ-B"},i.createElement(T.fu,{name:"Jam Session Onboarding Modal",properties:{isAnonymous:!e,isFigjamTry:n,userID:e?.id??null,fileKey:t?.key}},i.createElement(a.i,null,n?i.createElement(F,{file:t}):i.createElement(U,{user:e,file:t}))))}let $=(0,R.D)((e,t)=>{let n=(0,d.DN)();try{let i=n.get(B(e));if(!i){n.set(B(e),[t]);return}let r=JSON.parse(i);r.includes(t)||(r.push(t),n.set(B(e),r))}catch(i){n.set(B(e),[t])}});function B(e){return`workshop_logged_in_accpeted_${e}`}},927990:(e,t,n)=>{n.d(t,{u:()=>d});var i=n(411855),r=n(215122),a=n(587670),o=n(86625),l=n(534611),s=n(118615),c=n(776250),u=n(356390);function d({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:n,trackingOptions:d,shouldUseEyedropperStyleCreationFlow:p}){let[m,f]=i.useState(null),g=i.useRef(!1),h=o.nc.user("create-style",()=>{if(g.current=!0,m){let{key:e,version:t}=m,n=a.glU.getSoftDeletedStyleNodeId(e,t);return u.Y5.restoreStyle(n),(0,c.sx)("Style Created",{styleType:d.styleType,styleKey:m.key,styleVersion:m.version}),n}});return i.useEffect(()=>{let i=o.l7.system("create-soft-deleted-style",()=>(function({initialStyleCreationPaint:e,isCreatingFromSelection:t,inheritStyleKeyField:n,shouldUseEyedropperStyleCreationFlow:i}){if(i)return a.OmW.createSoftDeletedStyleForEyedropper();if(!e)return a.glU.createSoftDeletedStyle(n,"","",t);{let t=(0,s.GP)(e);return a.Osy.createSoftDeletedStyleFromPaintData(t,"")}})({initialStyleCreationPaint:t,inheritStyleKeyField:e,isCreatingFromSelection:n,shouldUseEyedropperStyleCreationFlow:p}));if(!i){f(null);return}return f(i),()=>{a.glU.selectStyle(r.n3.INVALID,r.IA.INVALID),o.l7.system("style-creation-cleanup",()=>{if(i&&!g.current){let t=a.glU.getSoftDeletedStyleNodeId(i.key,i.version);a.glU.applyStyleToSelection(e,l.AD,!0),a.glU.hardDeleteSoftDeletedNode(t)}})}},[t,e,n,p]),{styleRef:m,createStyle:h}}},468829:(e,t,n)=>{n.d(t,{w:()=>d});var i=n(411855),r=n(629019),a=n.n(r),o=n(966712),l=n(470504),s=n(939863),c=n(422237),u=n(854194);let d=(0,c.ex)("ai_features_tooltip",function(){return(0,o.kc)().figjam_synthesize_handbrake?i.createElement("div",{className:l.cx.flex.flexColumn.justifyCenter.$},i.createElement("p",{className:a()(u.Qq)},(0,s.t)("whiteboard.inline_menu.ai_quick_actions_disabled_header")),i.createElement("p",{className:a()(u.Qq)},(0,s.t)("whiteboard.inline_menu.ai_quick_actions_disabled_try_again_later"))):i.createElement("span",null,(0,s.t)("whiteboard.inline_menu.ai_quick_actions_button_text"))})},324666:(e,t,n)=>{function i(){return null}n.d(t,{BX:()=>d,GO:()=>f,H5:()=>r,Mr:()=>E,Qc:()=>l,S7:()=>N,eg:()=>m,g9:()=>b,go:()=>o,i_:()=>T,j8:()=>h,l:()=>p,li:()=>u,lt:()=>a,mh:()=>y,nl:()=>g,oT:()=>_,rC:()=>s,rf:()=>c});let r=i,a=i,o=i,l=i,s=i,c=i,u=i,d=i,p=i,m=i,f=i,g=i,h=i,_=i,y=i,E=i,b=i,T=i,N=i},389799:(e,t,n)=>{n.d(t,{Mb:()=>r,ST:()=>i,eu:()=>a});let i=function(){return null},r=function(){throw Error("HTML Serializer not available")},a=function(){throw Error("Component Preview not available")}},978258:(e,t,n)=>{n.d(t,{Zz:()=>r,fG:()=>o,o2:()=>a});var i=n(939863);let r=2/3,a="slides-rewrite-text",o={executive:{localizedText:(0,i.tx)("slides.properties_panel.rewrite_text.tone_executive"),position:[-r,r],trackingText:"Executive"},technical:{localizedText:(0,i.tx)("slides.properties_panel.rewrite_text.tone_technical"),position:[r,r],trackingText:"Technical"},basic:{localizedText:(0,i.tx)("slides.properties_panel.rewrite_text.tone_basic"),position:[-r,-r],trackingText:"Basic"},educational:{localizedText:(0,i.tx)("slides.properties_panel.rewrite_text.tone_educational"),position:[r,-r],trackingText:"Educational"}}},60656:(e,t,n)=>{n.d(t,{u:()=>o});var i=n(411855),r=n(860601);let a={tonePosition:[0,0],setTonePosition:r.lQ,setPositionAndRun:r.lQ},o=(0,i.createContext)(a)},156182:(e,t,n)=>{n.d(t,{G:()=>r});var i=n(776250);function r(e){(0,i.sx)("slides_rewrite_event",e)}},263086:(e,t,n)=>{n.d(t,{DX:()=>_,FT:()=>h,eX:()=>y});var i=n(411855),r=n(675678),a=n(215122),o=n(587670),l=n(86625),s=n(534611),c=n(707458),u=n(776621),d=n(550273),p=n(32067),m=n(709731),f=n(108239),g=n(978258);function h(e,t,n){let r=(0,i.useCallback)(n=>{e(n),t()},[e,t]),a=(0,i.useCallback)(e=>{n(e)},[n]);return(0,i.useCallback)(e=>{let{eventType:t,node:n}=e;switch(t){case"BEFORE_STREAM_START":r(n);return;case"AFTER_STREAM_CHUNK":a(n);return}},[r,a])}function _(e,t){let n=(0,i.useRef)(new Map),d=(0,m.wj)(e).state;return(0,i.useEffect)(()=>{d!==m.qy.RUNNING&&n.current.size>0&&(n.current=new Map)},[d]),{slidesTextResizeCallback:(0,i.useCallback)(e=>{if(!e.isInSlide())return;let i=n.current,d=i.get(e.guid);d&&cancelAnimationFrame(d);let p=requestAnimationFrame(()=>{l.l7.ai(t,()=>{(function(e){let t=e.findContainingSlideOrSelf(),n=c.q.instance.get(t);if(!n||"WIDTH_AND_HEIGHT"!==e.textAutoResize)return;let i=n.size.x,r=n.absoluteTransform.m02,a=r+i,o=e.absoluteTransform.m02,l=e.size.x;if(o<=r+16){if(e.parentGuid===t)(0,f.HH)(e,16,e.relativeTransform.m12);else{let n=e;for(;n.parentGuid!==t&&n.parentNode;)n=n.parentNode;(0,f.HH)(n,16,n.relativeTransform.m12)}let n=r+16-o;e.resizeWithConstraints(l-n,e.size.y),o=e.absoluteTransform.m02,l-=n}o+l>=a-16&&e.resizeWithConstraints(a-16-o,e.size.y)})(e),function(e){let t=e.findContainingSlideOrSelf(),n=c.q.instance.get(t);if(!n||"HEIGHT"!==e.textAutoResize&&"WIDTH_AND_HEIGHT"!==e.textAutoResize)return;let i=n.absoluteTransform.m12,l=n.absoluteTransform.m12+n.size.y,d=e.size.y,p=e.absoluteTransform.m12;if(p<i+16||p+d>l-16){let t;e.inheritedTextStyle&&(o.glU.applyStyleToSelection("inheritTextStyleKey",s.AD,!1),o.glU.selectStyle(a.n3.INVALID,a.IA.INVALID));let n=Math.max(0,i+16-p),c=Math.max(0,p+d-(l-16)),m=e.lineHeightOrMixed;"mixed"===m&&(m=e.getRangeLineHeight(0,1)),"mixed"===m?(t=1,(0,u.$D)(r.FigmaTeam.AI_PRODUCTIVITY,Error("Unexpected mixed line height while resizing text node for slide bounds"))):"PIXELS"===m.units?(t=m.value/e.fontSize,e.lineHeight={units:"RAW",value:t}):t=m.value;let f=d/(e.fontSize*t),g=Math.floor((e.fontSize*t-(n+c)/f)/t);e.fontSize=Math.max(g,8)}}(e)})});i.set(e.guid,p)},[t])}}function y(e){let t=(0,p.O1)(),n=(0,d.Gc)(t,{allowEmpty:!1}),r=(0,i.useRef)(new Map),a=(0,i.useCallback)(()=>{r.current.clear()},[]),o=(0,i.useCallback)(()=>{l.l7.ai(e,()=>{for(let[e,t]of r.current){let n=c.q.instance.get(e);n&&(0,f.HH)(n,t.x,t.y)}r.current.clear()})},[e]),s=(0,i.useCallback)(e=>{r.current.has(e.guid)||r.current.set(e.guid,{x:e.relativeTransform.m02,y:e.relativeTransform.m12})},[]);return{shiftAllNodesOutOfSlideMargins:(0,i.useCallback)(()=>{n.forEach(e=>{l.l7.ai(g.o2,()=>{let t=e.findContainingSlideOrSelf(),n=c.q.instance.get(t);if(!n)return;let i=e.absoluteTransform.m12,r=e.size.y,a=n.absoluteTransform.m12,o=a+n.size.y,l=(0,f.F7)(e);if(i<a+16)s(l),(0,f.HH)(l,l.relativeTransform.m02,16);else if(i+r>o-16){let e=Math.max(l.relativeTransform.m12-(i+r-(o-16)),16);s(l),(0,f.HH)(l,l.relativeTransform.m02,e)}})})},[n,s]),resetShiftedNodes:o,resetNodePositionMap:a}}},326186:(e,t,n)=>{n.d(t,{fm:()=>B,o$:()=>W,JU:()=>ea,p$:()=>er,Tm:()=>j,fp:()=>et,mD:()=>G,Cw:()=>Q,cx:()=>ei,Os:()=>X,wi:()=>eo,xf:()=>J,PF:()=>Y,Ne:()=>q,h$:()=>K,cR:()=>V,Jp:()=>Z,uG:()=>ee,Ib:()=>el});var i=n(411855),r=n(188507),a=n(409990),o=n(341092),l=n(675678),s=n(587670),c=n(86625),u=n(707458),d=n(841563),p=n.n(d),m=n(622422),f=n(358145),g=n(966712),h=n(374626),_=n(776621),y=n(966981),E=n(30637),b=n(877723),T=n(939863),N=n(392592),v=n(934533),w=n(239349),x=n(293017),S=n(259927),I=n(550273),k=n(574724),A=n(499777),C=n(601607),O=n(420186),R=n(32067),L=n(914905),D=n(222478),P=n(709731),M=n(999140),F=n(573591),U=n(978258),z=n(60656),$=n(156182);let B=1/3,H="tone-dial-visual-bell",j=(0,A.TJ)(S.vu);function q(){let e=(0,R.O1)();return(0,b.u4)()&&!!(0,g.kc)().figjam_ai_piper_text_manipulation&&(0,I.Gc)(e,{allowEmpty:!1}).length>0}function G(e,t){let{source:n,toggle:i}=t,r=h.zl.get(L.h);if(!r?.current)return;if(h.zl.set(M.zF,n),h.zl.get(j)){i&&W(e);return}let a=(0,E.Lg)()?{x:0,y:0}:(0,O.cn)(r.current,O.qo);e(x.u1({id:S.vu,initialX:a.x,initialY:a.y})),(0,$.G)({eventName:"modal_opened",source:n})}function W(e){e(x.XE()),(0,$.G)({eventName:"modal_closed"})}function K(e,t,n,r){let a=(0,i.useCallback)(({texts:t,parameters:n,targetMap:i,authInfo:r})=>{let a=e(i.values()),o=t.map(({id:e,text:t})=>{let n=i.get(e),r=n&&a.get(n.node.guid);return{id:e,text:r?.effectiveText??t}});return k.Ay.slides.rewriteText({texts:o,tones:n.tones},r)},[e]),{onRun:o,lastParameters:l,longRunningAction:s,cancel:c}=(0,F.Hd)({makeCortexRequest:a,featureType:D.JT.SLIDES_REWRITE_TEXT,excludeDigitsAndSpecialChar:!!(0,g.kc)().ai_prod_tone_dial_block_digits,onNodeStreamEvent:t,onError:n,onSuccess:r,editScopeLabel:U.o2}),{enqueueRun:u}=function(e){let t=(0,i.useRef)(),n=(0,i.useRef)(),r=(0,i.useCallback)(()=>{t.current=void 0,n.current&&(t.current=n.current().then(r),n.current=void 0)},[]);return{enqueueRun:(0,i.useCallback)(i=>{if(t.current){n.current=()=>e(i);return}t.current=e(i).then(r)},[r,e])}}(o);return{enqueueRun:u,lastParameters:l,longRunningAction:s,cancel:c}}function V(e){let{originalNodeInfos:t,setOriginalNodeInfos:n}=function(){let[e,t]=(0,i.useState)(()=>new Map),n=(0,C.wA)(e=>e.getCurrentPage()?.originalNodeInfos??[]),r=(0,i.useMemo)(()=>new Map(n.map(e=>[e.nodeId,e])),[n]),a=(0,i.useCallback)(e=>{u.q.instance.getCurrentPage()?.setOriginalNodeInfos([...e.values()])},[]);return(0,g.kc)().slides_tone_dial_undo?{originalNodeInfos:r,setOriginalNodeInfos:a}:{originalNodeInfos:e,setOriginalNodeInfos:t}}(),r=(0,i.useCallback)(e=>{if(t.size)return t;let i=new Map;for(let t of e){let e=t.node,n=t.selectionRange?.start??0,r=e.getRangeFontSize(n,n+1),a=e.getRangeLineHeight(n,n+1),o=e.inheritedTextStyle;("mixed"===r||"mixed"===a)&&(0,_.$D)(l.FigmaTeam.AI_PRODUCTIVITY,Error("Unexpected mixed font size or line height while saving initial font size and line height")),i.set(e.guid,{nodeId:e.guid,nodeText:t.nodeText,effectiveText:t.effectiveText,selectionRange:t.selectionRange??null,fontSize:"mixed"!==r?r:null,lineHeight:"mixed"!==a?function(e){switch(e.units){case"RAW":return{value:e.value,units:s.cus.RAW};case"PERCENT":return{value:e.value,units:s.cus.PERCENT};case"PIXELS":return{value:e.value,units:s.cus.PIXELS}}}(a):null,textStyle:o})}return n(i),i},[t,n]),a=(0,i.useCallback)(()=>{n(new Map)},[n]),o=(0,i.useCallback)(n=>{let i=t.get(n.guid);if(!i)return;let r=i.fontSize,a=i.lineHeight,o=i.textStyle,l=i.selectionRange?.start??0,u=i.selectionRange?.end??n.characters.length;c.l7.ai(e,()=>{r&&n.fontSize!==r&&n.setRangeFontSize(l,u,r),a&&!p()(n.lineHeightOrMixed,a)&&n.setRangeLineHeight(l,u,function(e){switch(e.units){case s.cus.RAW:return{value:e.value,units:"RAW"};case s.cus.PERCENT:return{value:e.value,units:"PERCENT"};case s.cus.PIXELS:return{value:e.value,units:"PIXELS"}}}(a)),o&&(n.inheritedTextStyle=o)})},[t,e]),d=(0,i.useCallback)(()=>{for(let e of t.values()){let t=u.q.instance.get(e.nodeId);t&&o(t)}},[t,o]);return{originalNodeInfos:t,saveOriginalNodeInfos:r,resetOriginalNodeInfos:a,revertNodeToOriginalNodeInfo:o,resetAllNodesToOriginalTextStyles:d}}function X(e){let t=(0,P.pP)(D.JT.SLIDES_REWRITE_TEXT),n=t.state,a=(0,f.ZC)(n)!==n,l=(0,r.wA)();(0,i.useEffect)(()=>()=>{l(N.F.dequeue({matchType:H})),(0,P.cT)(D.JT.SLIDES_REWRITE_TEXT)},[l]),(0,i.useEffect)(()=>{if(a){if(n===P.qy.RUNNING)l(N.F.enqueue({message:(0,T.t)("slides.properties_panel.rewrite_text.action_rewriting"),icon:v.zX.SPINNER,type:H,timeoutOverride:1/0,button:{text:(0,T.t)("slides.properties_panel.rewrite_text.action_stop"),action:()=>(0,P.cT)(D.JT.SLIDES_REWRITE_TEXT)}}));else if(n===P.qy.CANCELLED)l(N.F.dequeue({matchType:H}));else if(n===P.qy.DONE)l(N.F.enqueue({icon:v.zX.CHECK,message:(0,T.t)("slides.properties_panel.rewrite_text.action_done"),type:H,timeoutOverride:8e3,button:{text:(0,T.t)("slides.properties_panel.rewrite_text.action_rewrite_again"),action:()=>e()},onDismiss:()=>{}}));else if(n===P.qy.ERROR){let n=t.error,i=function(e){if(e instanceof F.n4)return(0,T.t)("slides.properties_panel.rewrite_text.error.no_text_characters_found");if(!(e instanceof o.G1))return(0,T.t)("slides.properties_panel.rewrite_text.error.default");let t={offline:(0,T.t)("slides.properties_panel.rewrite_text.error.connection"),meter_exceeded:(0,T.t)("slides.properties_panel.rewrite_text.error.rate_limit"),rate_limit_exceeded:(0,T.t)("slides.properties_panel.rewrite_text.error.rate_limit"),content_length_limit_exceeded:(0,T.t)("slides.properties_panel.rewrite_text.error.token_limit"),text_tool_no_text:(0,T.t)("slides.properties_panel.rewrite_text.error.empty_text"),unsafe_or_harmful_content:(0,T.t)("slides.properties_panel.rewrite_text.error.inappropriate_input"),service_issue:(0,T.t)("slides.properties_panel.rewrite_text.error.openai_down"),slides_rewrite_out_of_date:(0,T.t)("slides.properties_panel.rewrite_text.error.page_not_updated"),ai_opt_out_error:(0,T.t)("slides.properties_panel.rewrite_text.error.opt_out"),unauthorized:(0,T.t)("slides.properties_panel.rewrite_text.error.default"),generic:(0,T.t)("slides.properties_panel.rewrite_text.error.default")},n="generic";if(e instanceof o.G1)switch(e.type){case"content_length_limit_exceeded":case"meter_exceeded":case"rate_limit_exceeded":case"text_tool_no_text":case"service_issue":case"offline":case"unsafe_or_harmful_content":case"ai_opt_out_error":case"slides_rewrite_out_of_date":case"unauthorized":n=e.type;break;case"generic":switch(e.data?.status){case 404:n="service_issue";break;case 429:n="rate_limit_exceeded";break;case 403:n="ai_opt_out_error"}}return t[n]}(n),r=function(e){switch(e.type){case"text_tool_no_text":case"unsafe_or_harmful_content":case"content_length_limit_exceeded":case"slides_rewrite_out_of_date":case"no_text_characters_found":return!1;default:return!0}}(n);l(N.F.enqueue({icon:v.zX.CLOSE_FILLED,message:i,type:H,button:r?{text:(0,T.t)("slides.properties_panel.rewrite_text.action_rewrite_again"),action:()=>e()}:void 0,onDismiss:()=>{}}))}}},[l,n,a,e,t])}function Y(e,t){let n=(0,m.$)((0,w.Tv)().join(",")),a=(0,m.$)((0,r.d4)(e=>e.mirror.appModel.activeUserAction===s.QOV.SELECTING_TEXT)),o=n||a,l=(0,m.$)((0,r.d4)(()=>I.nl()?.characters)),c=e===P.qy.RUNNING,u=(0,f.ZC)(c)&&!c,d=c||u;(0,i.useEffect)(()=>{if(!(0,g.kc)().slides_tone_dial_undo){if(o){t();return}l&&!d&&t()}},[t,o,l,d])}function J(e,t){let n=(0,f.ZC)(e),r=n&&!p()(n,e),a=p()(e,[0,0]),o=r&&a;(0,i.useEffect)(()=>{(0,g.kc)().slides_tone_dial_undo&&o&&t()},[t,o])}function Z(e){let{Sprig:t}=(0,y.A)(),n=(0,f.ZC)(e);(0,i.useEffect)(()=>{e===P.qy.DONE&&n===P.qy.RUNNING&&t("track","slides_rewrite_text")},[t,e,n])}function Q(e,t){if(1!==e.size){for(let{nodeId:n,nodeText:i}of e.values()){let e=u.q.instance.get(n);e?.isAlive()&&c.l7.ai(U.o2,()=>{e.spliceCharacters(0,e.characters.length,i,"BEFORE"),t(e)})}return}let[n]=e.values(),i=(0,I.fN)();if(!i||!n||!i.node.isAlive())return;let r=i.node,a=i.selectionRange?.start??0,o=i.selectionRange?.end??r.characters.length,l=n.effectiveText;c.l7.ai(U.o2,()=>{r.spliceCharacters(a,o,l,"BEFORE"),t(r)});let s=u.q.instance.getCurrentPage();n.selectionRange?s?.setSelectedTextRange(r.guid,a,a+l.length):(0,F.y_)(r.guid)}function ee(e){let[t,n]=(0,i.useState)(!1),{tonePosition:r,setTonePosition:a,setPositionAndRun:o}=(0,i.useContext)(z.u),l=(0,i.useCallback)(e=>{n(!0),e.stopPropagation()},[]),s=(0,i.useCallback)(()=>{t&&(n(!1),o(r,{source:"dial_drag"}))},[t,o,r]),c=(0,i.useCallback)(n=>{if(!t||!e.current)return;let{clientX:i,clientY:r}=n;a(et(i,r,e.current.getBoundingClientRect()))},[e,t,a]);return(0,i.useEffect)(()=>(document.addEventListener("mouseup",s),document.addEventListener("mousemove",c),()=>{document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",c)}),[c,s]),{onMouseDown:l,isDragging:t}}function et(e,t,n){return[(e-n.left)/n.width,(n.bottom-t)/n.height].map(e=>Math.max(.045,Math.min(.955,e))).map(e=>(e-.5)*2).map(en)}function en(e){return Math.round(100*e)/100}function ei([e,t]){return[en(e),en(t)]}function er([e,t]){let n=[],i=e=>Math.abs(e);return e<-B?n.push({tone:a.DE.CONCISE,weight:i(e)}):e>B&&n.push({tone:a.DE.EXPANDED,weight:i(e)}),t<-B?n.push({tone:a.DE.CASUAL,weight:i(t)}):t>B&&n.push({tone:a.DE.PROFESSIONAL,weight:i(t)}),n}function ea(e){return[(()=>{let t=e.find(({tone:e})=>e===a.DE.EXPANDED)?.weight;if(t)return t;let n=e.find(({tone:e})=>e===a.DE.CONCISE)?.weight;if(n)return-n})()??0,(()=>{let t=e.find(({tone:e})=>e===a.DE.PROFESSIONAL)?.weight;if(t)return t;let n=e.find(({tone:e})=>e===a.DE.CASUAL)?.weight;if(n)return-n})()??0]}function eo(e,t){return(0,i.useEffect)(()=>{let n=e.current?.getEl();if(!n)return;let i=e=>{"Escape"===e.key&&t()};return n.addEventListener("keydown",i),()=>n.removeEventListener("keydown",i)},[e,t]),e}function el(){let[e,t]=(0,i.useState)(()=>[0,0]),n=(0,C.wA)(e=>{let t=e.getCurrentPage()?.tonePosition;return[t?.x??0,t?.y??0]}),r=(0,i.useCallback)(e=>{u.q.instance.getCurrentPage()?.setTonePosition({x:e[0],y:e[1]})},[]);return(0,g.kc)().slides_tone_dial_undo?{tonePosition:n,setTonePosition:r}:{tonePosition:e,setTonePosition:t}}},67048:(e,t,n)=>{n.d(t,{G:()=>c});var i=n(411855),r=n(629019),a=n.n(r),o=n(281381),l=n(470504),s=n(939863);function c({location:e,overrideText:t,hoverStyleClassName:n,onMouseUp:r,onPointerUp:c}){return i.createElement(o.Ex,{className:a()(l.cx.font11.fontNormal.h16.px4.b1.bRadius5.mr0.hFitContent.if("MODAL"===e||"FILE_BROWSER_BAR"===e||"SLIDES_REWRITE_MODAL"===e,l.cx.colorTextSecondary.colorBorder).if("SUMMARIZE_NUDGE"===e,l.cx.colorTextOnbrand.colorBorderBrand).if("SUMMARIZE_NUDGE_DISABLED"===e,l.cx.colorTextOnbrand.colorBorderDisabled).if("INLINE_TOOLBAR"===e,l.cx.colorTextMenuSecondary.colorBorderMenu).if("SLIDES_REWRITE_MODAL"===e,l.cx.textBodySmall).$,n),color:o.zE.INVERT,subtle:!0,text:t??(0,s.t)("whiteboard.ai_modal.beta_badge"),onMouseUp:r,onPointerUp:c})}},632084:(e,t,n)=>{n.d(t,{zi:()=>h,Gq:()=>_,MS:()=>y,bM:()=>E,ON:()=>N,ep:()=>v,b7:()=>g,SU:()=>u});var i=n(587670),r=n(534611),a=n(707458),o=n(939863),l=(e=>(e.HEART="heart",e.STAR="star",e.PLUS_ONE="+1",e.THUMBS_UP="thumbs up",e.THUMBS_DOWN="thumbs down",e.QUESTION="question",e.PROFILE="profile",e.DOT="dot",e.OTHER="other",e))(l||{});let s={heart:{type:"heart",nodeNameOnCanvas:"Heart"},star:{type:"star",nodeNameOnCanvas:"Star"},"+1":{type:"+1",nodeNameOnCanvas:"+1"},"thumbs up":{type:"thumbs up",nodeNameOnCanvas:"Thumbs up"},"thumbs down":{type:"thumbs down",nodeNameOnCanvas:"Thumbs down"},question:{type:"question",nodeNameOnCanvas:"Question"},profile:{type:"profile",nodeNameOnCanvas:"Profile"},dot:{type:"dot",nodeNameOnCanvas:"Dot"},other:{type:"other",nodeNameOnCanvas:"Other"}},c=[i.Z6A.STICKY,i.Z6A.TEXT,i.Z6A.SHAPE_WITH_TEXT];function u(e){return e?e.textSublayer?e.textSublayer.textContent:e.textContent?e.textContent:null:null}let d=(e,t)=>e?u(e)||(e.name?e.name:null):null,p=e=>!!["STICKY","TEXT","SHAPE_WITH_TEXT"].includes(e.type),m=(e,t,n)=>{if(!p(e))return null;let i=n[e.guid],r=d(e,t);if(!r)return null;let a={t:r,bounds:e.absoluteRenderBounds,id:e.guid,type:e.type};return i&&(a.stamps=i),a},f=e=>{let t=i.DV9.getStampsOnNodes(e),n=Object.fromEntries(t),r={};for(let[e,i]of t)r[e]=Object.fromEntries(n[e]);return r};function g(e){let t=function(e){let t=i.glU.searchForNodesInSelection(c),n=[];for(let i of t){let t=e.get(i);t&&n.push(t)}return n.filter(e=>p(e))}(e),n=f(t.map(e=>e.guid)),r=[];for(let i of t){let t=m(i,e,n);t&&r.push(t)}return{v:1,data:r}}function h(e){let t=function(e){let t=i.glU.getStickyThreadsFromSelection(),n=[];for(let i of t){let t=!1,r={id:"",text:""};for(let n of i){let i=e.get(n);if(i&&"STICKY"===i.type){let e=i.textSublayer&&i.textSublayer.textContent||"";if(t)r.id=r.id?`${r.id}|${n}`:n,e&&(r.text=r.text?`${r.text}|${e}`:e);else{if(t=!0,!e)continue;r.id=i.guid,r.text=e;continue}}}r.text&&n.push(r)}return n}(e),n=JSON.stringify(t).length;return{v:1,data:t,characterCount:n}}function _(){let e=i.glU.searchForNodesInSelection([i.Z6A.STICKY]),t=i.DV9.getStickyClustersByAuthor(e),n=[];for(let e of t)n.push({clusterName:e[0],messages:e[1]});return n}function y(){let e=i.glU.searchForNodesInSelection([i.Z6A.STICKY]),t=i.DV9.getStickyClusterByColor(e),n=[];for(let e of t)n.push({clusterName:"",messages:e[1]});return n}function E(){let e=i.glU.searchForNodesInSelection([i.Z6A.STICKY]),t=i.DV9.getStickyClusterByStampCount(e),n=[];for(let e of t)n.push({clusterName:e[0],messages:e[1]});return n.sort((e,t)=>parseInt(t.clusterName)-parseInt(e.clusterName)),n}let b=e=>{let t=i.DV9.getStickyClusterByStampType(e),n=[];return t.forEach((e,t)=>{let i="No stamps"===t?null:function(e){let t=Object.values(s).find(t=>t.nodeNameOnCanvas===e);return t?t.type:"other"}(t),r=n.find(e=>e.stampType===i);r||(r={stampType:i,stickyThreadGuids:[]},n.push(r)),r.stickyThreadGuids.push(...e)}),n},T=(e,t,n)=>{let i=[],r=e.get(t);if(!r)return i;for(let t of r.stuckNodes){let r=e.get(t);r&&r.name===s[n].nodeNameOnCanvas&&i.push(t)}return i};function N(){let e=b(i.glU.searchForNodesInSelection([i.Z6A.STICKY])),t=new a.q,n=[];for(let i of e){let e=i.stickyThreadGuids.flatMap(e=>e.split("|")),r=[];if(i.stampType)for(let n of e)r.push(...T(t,n,i.stampType));n.push({clusterName:function(e){switch(e){case l.HEART:return(0,o.t)("whiteboard.clustering.heart_stamp_cluster");case l.DOT:return(0,o.t)("whiteboard.clustering.dot_stamp_cluster");case l.PLUS_ONE:return(0,o.t)("whiteboard.clustering.plus_one_stamp_cluster");case l.PROFILE:return(0,o.t)("whiteboard.clustering.face_stamp_cluster");case l.QUESTION:return(0,o.t)("whiteboard.clustering.question_mark_stamp_cluster");case l.STAR:return(0,o.t)("whiteboard.clustering.star_stamp_cluster");case l.THUMBS_DOWN:return(0,o.t)("whiteboard.clustering.thumbs_down_stamp_cluster");case l.THUMBS_UP:return(0,o.t)("whiteboard.clustering.thumbs_up_stamp_cluster");case l.OTHER:default:return(0,o.t)("whiteboard.clustering.other_stamp_cluster");case null:return(0,o.t)("whiteboard.clustering.no_stamps_cluster")}}(i.stampType),messages:i.stickyThreadGuids,allowedStampsToCopyGuids:r})}return n}function v(e,t){let n=e.get(t);if(!n||!n.isDiagramNode)return null;let i=u(n);if(!i)return null;let a=[],o=n.diagramParentId;for(;o&&o!==r.AD;){let t=e.get(o);if(!t)break;let n=u(t);n&&a.push(n),o=t.diagramParentId}a.reverse();let l=[];for(let t of n.diagramChildIds){let n=u(e.get(t));n&&l.push(n)}return{selectedNode:i,parentHierarchy:a,children:[],excludedSuggestions:l}}},47750:(e,t,n)=>{n.d(t,{J:()=>C,f:()=>A});var i=n(411855),r=n(188507),a=n(587670),o=n(86625),l=n(707458),s=n(939683),c=n(966712),u=n(374626),d=n(395900),p=n(966981),m=n(825871),f=n(939863),g=n(574724),h=n(378260),_=n(106757),y=n(862442),E=n(843495),b=n(457630),T=n(335682),N=n(247014),v=n(951840),w=n(435898),x=n(342824),S=n(88596),I=n(632084);let k=e=>({...e,width:e.w,height:e.h});function A(){let e=i.useRef((0,f.t)("whiteboard.ai_cluster.loading_section_base")),t=i.useMemo(()=>new l.q,[]),{Sprig:n}=(0,p.A)(),[A,C]=i.useState(!1),O=(0,s.am)(),R=i.useRef(),L=(0,y.Z)("figjam_summary_navigate"),D=(0,x.um)(),P=(0,u.md)(h._s),M=(0,u.md)(T.As),F=(0,u.md)(_.kS),U=(0,u.md)(T.yM),z=(0,u.md)(T.ze),$=(0,r.d4)(e=>e.multiplayer.allUsers.length),B={orgId:P,teamId:M||null,fileKey:z,userId:F||null,trackingSessionId:(0,m.f)()},H=i.useCallback(e=>{let n=t.get(e);n?.isAlive()&&o.l7.system("remove-cluster-placeholder",()=>a.Hur.removePlaceholder(e)),R.current&&(clearInterval(R.current),R.current=void 0)},[R,t]);return{clusterCanvasSelection:()=>{let i=new d.jk(S.Ux.TIME_TAKEN_TO_COMPLETE,{});i.start(),C(e=>!e);let r=a.glU.getSelectionBounds(),{v:l,data:s,characterCount:u}=(0,I.zi)(t),p=e.current+".",m=o.l7.system("create-cluster-placeholder",()=>{let e=a.Hur.createPlaceholder(r);return E.i(e,p),e});L((0,b.QZ)({nodeId:m,alwaysPan:!1})),R.current=setInterval(()=>{p.length===e.current.length+3?p=e.current+".":p+=".",o.l7.system("update-cluster-placeholder-text",()=>E.i(m,p))},1e3),g.Ay.figjam.cluster({v:l,data:s,tokenCount:u/4},B).then(e=>{let l=t.get(m),d=l?.containingCanvas;if(!l?.isAlive()||!d)return;let p=l?.absoluteRenderBounds,f=p?k(p):r;H(m);let[g,h]=o.l7.user("create-and-place-clusters",()=>a.Hur.createAndPlaceClusters(e.clusters,f,d,!1));n("track",w.l0),C(!1);let _=i.stop();_&&O(S.Ux.TIME_TAKEN_TO_COMPLETE,{elapsed_ms:_},{forwardToDatadog:!0}),O("ai_sticky_clusters_created",{request_id:e.requestUuid,nodes_clustered:s.map(e=>e.id.split("|")).flat(),num_characters_input:u,success:!0,output_section_node_ids:h,output_sticky_node_ids:g,failure_reason:""}),(0,c.kc)().workspace_activity_write&&z&&U&&v.i.recordActivity({activityUnitType:N.qj.FILE_COLLABORATION,fileKey:z,collaborationType:N.Uz.AI_CLUSTER,numPeopleInFile:$})}).catch(e=>{let t;H(m);let n=(0,x.E$)(e,x.ez.CLUSTER);O("ai_sticky_clusters_created",{nodes_clustered:s.map(e=>e.id.split("|")).flat(),num_characters_input:u,success:!1,failure_reason:n.message}),"figjam_cluster_out_of_date"===n.type&&(t={type:x.tE.Reload}),D(n.message,x.ez.CLUSTER,t)})},requestIsPending:A}}function C(e,t=!1){let n=i.useMemo(()=>new l.q,[]),[r,s]=i.useState(!1),c=i.useRef(),u=(0,y.Z)("figjam_local_cluster_navigate"),d=i.useCallback(e=>{let t=n.get(e);t?.isAlive()&&o.l7.system("remove-cluster-placeholder",()=>a.Hur.removePlaceholder(e)),c.current&&(clearInterval(c.current),c.current=void 0)},[c,n]);return{cluster:()=>{s(e=>!e);let i=a.glU.getSelectionBounds(),r=e(),l=o.l7.system("create-cluster-placeholder",()=>a.Hur.createPlaceholder(i));u((0,b.QZ)({nodeId:l,alwaysPan:!1}));let c=n.get(l),p=c?.containingCanvas;if(!c?.isAlive()||!p)return;let m=c?.absoluteRenderBounds,f=m?k(m):i;d(l),o.l7.system("create-and-place-clusters",()=>a.Hur.createAndPlaceClusters(r,f,p,t)),s(!1)},requestIsPending:r}}},477173:(e,t,n)=>{n.d(t,{ss:()=>P});var i=n(411855),r=n(188507),a=n(587670),o=n(86625),l=n(707458),s=n(776250),c=n(939683),u=n(966712),d=n(374626),p=n(395900),m=n(966981),f=n(825871),g=n(743282),h=n(931828),_=n(574724),y=n(378260),E=n(106757),b=n(736916),T=n(769977),N=n(862442),v=n(457630),w=n(335682),x=n(247014),S=n(951840),I=n(479296),k=n(435898),A=n(342824),C=n(88596),O=n(632084);class R{static generateLocalRequestId(){return(0,g.g)()}}let L=(0,I.D)((e,t,n)=>{let i=o.l7.user("insert-ai-summary-node",()=>a.glU.insertAISummaryInCanvas(t,n)),r=e.get(i);return r&&(o.l7.user("set-ai-summary-timestamp",()=>{(0,T.Gw)(r,new Date)}),a.glU.triggerAction("commit",{})),r});async function D({v:e,canvasData:t,nodePosition:n,loadingNodeGuid:i,showErrorBell:r,trackSummaryRequested:l,trackSummaryCreated:c,scene:u,operationTimer:p,source:m}){let g,N;let v={orgId:d.zl.get(y._s),teamId:d.zl.get(w.As)||null,fileKey:d.zl.get(w.ze)||null,userId:d.zl.get(E.kS)||null,trackingSessionId:(0,f.f)()},x=e=>{let t;throw"figjam_summarize_out_of_date"===e.type&&(t={type:A.tE.Reload}),"content_length_limit_exceeded"===e.type&&"DISCOVERY_NUDGE"===m&&(0,s.sx)("ai_summarize_from_nudge_exceeded_token_length_limit",{},{forwardToDatadog:!0}),r(e.message,A.ez.SUMMARIZE,t),Error(A.xQ[A.ez.SUMMARIZE]+e.message)},S=t.map(e=>e.id),I=R.generateLocalRequestId();l(S,t,I);let k=null,O=!1;try{g=(await _.Ay.figjam.streamSummarize({v:e,data:t},v)).pipeThrough((0,_.nU)())}catch(e){x((0,A.E$)(e,A.ez.SUMMARIZE));return}let D=()=>{if(!O){let e=u.get(i);e&&e.isAlive()&&o.l7.system("remove-ai-summary-loading-state",()=>{a.glU.deleteNode(i),O=!0})}},P=()=>{let e=L(u,n,i);return e&&setTimeout(()=>{D()},200),e},M=0;try{for await(let e of new _.c6(g)){N=e;let t=M%5==0;k||(k=await P()),t&&o.l7.system("stream-ai-summary",()=>{k&&(0,T.WN)(k,N)}),M++}}catch(e){x((0,A.E$)(e,A.ez.SUMMARIZE));return}if(o.l7.system("stream-ai-summary",()=>{N&&k&&(0,T.WN)(k,N)}),N){let e=p.stop();e&&(0,s.sx)(C.mr.TIME_TAKEN_TO_COMPLETE,{elapsed_ms:e},{forwardToDatadog:!0}),k&&(h.b({[b.zp]:!0}),c(k.guid,N,I))}N&&k&&a.glU.triggerAction("commit",{})}function P(e,t=!0,n){let[s]=i.useState(new l.q),[d,f]=i.useState(!1),g=(0,N.Z)("figjam_summary_navigate"),h=(0,A.um)(),{Sprig:_}=(0,m.A)(),y=function(){let e=(0,c.am)();return i.useCallback((t,n,i)=>{let r=(0,C.sh)(n);e(C.mr.REQUEST,{local_summary_id:i,num_characters_input:r,nodes_summarized:t})},[e])}(),E=function(){let e=(0,c.am)(),t=(0,w.q5)(),n=(0,r.d4)(e=>e.multiplayer.allUsers.length),a=i.useRef(n);return a.current=n,i.useCallback((n,i,r)=>{let o={local_summary_id:r,summary_node_id:n,num_characters_output:i.map(e=>"content"in e?e.content.length:0).reduce((e,t)=>e+t,0),num_themes_output:i.filter(e=>"h2"===e.type).length,num_supporting_points_output:i.filter(e=>"li"===e.type).length};e(C.mr.CREATE,o),(0,u.kc)().workspace_activity_write&&t?.team?.workspaceId&&S.i.recordActivity({activityUnitType:x.qj.FILE_COLLABORATION,fileKey:t.key,collaborationType:x.Uz.AI_SUMMARY,numPeopleInFile:a.current})},[e,t,a])}();return{summarizeCanvasSelection:async()=>{let i=new p.jk(C.mr.TIME_TAKEN_TO_COMPLETE,{});i.start();let{v:r,data:c}=(0,O.b7)(new l.q),u=o.l7.user("insert-ai-summary-loading-node",()=>a.glU.insertLoadingSummaryInCanvas(e===a.cfv.BELOW,t)),d=s.get(u);if(!d)return;o.l7.user("insert-ai-summary-loading-node",()=>{d.setWidgetSyncedState("syncedState:loading","true")}),g((0,v.QZ)({nodeId:u,alwaysPan:!1}));let m={x:d.absoluteBoundingBox.x,y:d.absoluteBoundingBox.y};if(c){f(!0);try{await D({v:r,canvasData:c,nodePosition:m,loadingNodeGuid:u,showErrorBell:h,trackSummaryRequested:y,trackSummaryCreated:E,scene:s,operationTimer:i,source:n})}catch(e){s.get(u)&&a.glU.deleteNode(u)}finally{_("track",k.AM),f(!1)}}},requestIsPending:d}}},772275:(e,t,n)=>{n.d(t,{s_:()=>ea,nG:()=>Q,Ay:()=>ee,Bl:()=>et,dA:()=>er});var i=n(411855),r=n(188507),a=n(86625),o=n(629019),l=n.n(o),s=n(737947),c=n(966712),u=n(374626),d=n(860601),p=n(743282),m=n(712366),f=n(281381),g=n(268537),h=n(210954),_=n(163023),y=n(939863),E=n(931828),b=n(672517),T=n(582947),N=n(498606),v=n(538697),w=n(468829),x=n(67048),S=n(211041),I=n(47750),k=n(230646),A=n(587670),C=n(707458),O=n(939683),R=n(395900),L=n(825871),D=n(392592),P=n(934533),M=n(574724),F=n(378260),U=n(106757),z=n(335682),$=n(342824),B=n(632084);let H="ai_expand_mindmap";var j=(e=>(e.LOADING="ai-expand-mindmap-loading",e.SUCCESS="ai-expand-mindmap-success",e))(j||{}),q=n(477173),G=n(425187),W=n(677859),K=n(437771),V=n(662599),X=n(266066),Y=n(58772),J=n(449802),Z=n(62573);let Q="https://help.figma.com/hc/articles/16822138920343-Use-AI-tools-in-Figma";var ee=(e=>(e.SUMMARIZE="summarize",e.CLUSTER="cluster",e.GENERATE_IDEAS="generate_ideas",e))(ee||{});let et=(0,T.r1)("used_figjam_ai_quick_actions"),en="used_figjam_ai_mindmaps_inline_menu",ei=(0,T.r1)(en);function er(){let e=(0,u.md)(G.f).positionRelativeToSelection,{summarizeCanvasSelection:t}=(0,q.ss)(e,void 0,"INLINE_TOOLBAR"),{clusterCanvasSelection:n}=(0,I.f)(),{expandSelectedMindmapNode:o}=function(){let e=(0,u.md)(F._s),t=(0,u.md)(z.As),n=(0,u.md)(z.ze),o=(0,u.md)(U.kS),l=(0,$.um)(),s=(0,O.am)(),c=(0,r.wA)(),d={orgId:e,teamId:t||null,fileKey:n,userId:o||null,trackingSessionId:(0,L.f)()},p=i.useCallback(()=>c(D.F.enqueue({message:(0,y.t)("whiteboard.ai_expand_mindmap.generic_error")})),[c]),m=e=>{for(let t of e)a.l7.user("expand-figjam-ai-mindmap",()=>{A.glU.deleteNode(t)})},f=(e,t,n)=>{let i=(0,B.ep)(new C.q,e);if(!i){p(),s(H,{success:!1,failure_reason:"Failed to get input data"});return}c(D.F.dequeue({matchType:"ai-expand-mindmap-success"})),c(D.F.enqueue({message:(0,y.t)("whiteboard.ai_modal.streaming"),icon:P.zX.SPINNER,type:"ai-expand-mindmap-loading",timeoutOverride:1/0})),M.Ay.figjam.updateVisual({inputData:i,updateType:{visualType:"mindmap",updateMode:"generate_ideas"}},d).then(i=>{n&&m(n);let r=a.l7.user("expand-figjam-ai-mindmap",()=>A.$mk.expandWithFigjamAiMindmapNodes(i,e)),o=t.stop();r.length?(c(D.F.enqueue({message:(0,y.t)("whiteboard.ai_expand_mindmap.generation_success"),type:"ai-expand-mindmap-success",button:{text:(0,y.t)("whiteboard.ai_expand_mindmap.retry"),action:()=>{let t=new R.jk(H,{});return t.start(),f(e,t,r),!1}}})),s(H,{request_id:i.requestId,success:!0,failure_reason:"",num_nodes_generated:r.length,elapsed_ms:o})):(p(),s(H,{request_id:i.requestId,success:!1,failure_reason:"No nodes generated",elapsed_ms:o}))}).catch(e=>{let n=t.stop(),i=(0,$.E$)(e,$.ez.GENERATE);l(i.message,$.ez.GENERATE),s(H,{success:!1,failure_reason:i.message,elapsed_ms:n})}).finally(()=>{c(D.F.dequeue({matchType:"ai-expand-mindmap-loading"}))})};return{expandSelectedMindmapNode:()=>{let e=new R.jk(H,{});e.start();let t=A.wzW.getSingleSelectedDiagramNodeId(),n=function(e,t){let n=e.get(t);if(n){if((0,B.SU)(n))return t;{if(!n.diagramParentId)return;let t=e.get(n.diagramParentId);return(0,B.SU)(t)?n.diagramParentId:void 0}}}(new C.q,t);if(!n){p(),s(H,{success:!1,failure_reason:"Failed to get selected node"});return}f(n,e)}}}();return e=>{let i=d.lQ,r="";if(e){switch(e.type){case"summarize":i=t,r="ai-quick-action-summarize";break;case"cluster":i=n,r="ai-quick-action-cluster";break;case"generate_ideas":i=o,r="ai-quick-action-generate-ideas"}a.l7.user(r,i)}}}function ea(){var e;let t=(0,p.g)(),n=er(),r=(0,c.kc)().figjam_synthesize_handbrake,[a,o]=i.useState(!1),l=[...function(){let e=(0,k.QP)(),t=[];return e&&t.push({type:"generate_ideas",enabled:e}),t}()];return i.createElement(K.Fn,{value:void 0,overrideMenuOpenState:{isOpenOverride:a,setIsOpenOverride:o},onChange:n,renderButton:({onClick:e,onKeyDown:n,ref:a})=>i.createElement(eo,{onClick:e,onKeyDown:n,buttonRef:a,ariaWrapperId:t,disabled:!!r,trackingProperties:{text:"figjam ai"},dropdownMenuOptions:l}),options:l,renderOption:es,OptionWrapper:(e=(0,y.t)("whiteboard.inline_menu.ai_quick_actions_dropdown_options_aria_label"),function({children:n}){return i.createElement("div",{className:"ai_quick_actions_control--flexColumn--kgAdX","aria-label":e,id:t,role:"listbox",tabIndex:-1,"data-fullscreen-intercept":!0},n)}),responsivePositionY:{aboveTargetPositionY:(e,t,n)=>(0,V.T1)(e,t,n+-48),belowTargetPositionY:(e,t,n)=>(0,V.DH)(e,t,n+-48)},positionX:e=>e.x,popoverClassName:"ai_quick_actions_control--popover--BNsqs",additionalContentsTop:function({closeMenu:e}){return i.createElement("div",{className:"ai_quick_actions_control--dropdownHeaderContainer--ifOPr",onClick:e,role:"button",tabIndex:0},i.createElement("div",{className:"ai_quick_actions_control--dropdownHeaderTitle--Cqg8n"},(0,y.tx)("whiteboard.inline_menu.ai_quick_actions_header_text")),i.createElement("div",{className:"ai_quick_actions_control--badgeContainer--kBpYM"},i.createElement(x.G,{location:"INLINE_TOOLBAR",overrideText:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_beta_badge_text")})))}({closeMenu:()=>o(!1)}),additionalOptions:el,additionalOptionOnChange:()=>{(0,m.Lf)(Q)||s.Ay.unsafeRedirect(Q,"_blank")}})}let eo=(0,b.tf)(function({onClick:e,onKeyDown:t,buttonRef:n,ariaWrapperId:a,disabled:o,dropdownMenuOptions:s}){let[p,m]=i.useState(0),{shouldShowBadge:g,setUserFlagsCallback:h}=function(e){var t;let n=(0,r.wA)(),a=(t=["generate_ideas"],!!e.find(e=>e&&t.includes(e.type)));return{shouldShowBadge:function(e){let t=(0,S.tG)(),n=(0,u.md)(ei).data;return!!((0,c.kc)().figjam_mindmaps_gen_from_node&&t&&!n&&e)}(a),setUserFlagsCallback:i.useCallback(()=>{a&&n(E.b({[en]:!0}))},[a,n])}}(s);return i.createElement(W.$n,{tooltip:w.w,tooltipType:N.Ib.SPECIAL,onClick:o?d.lQ:()=>{e(),h()},disabled:o,onKeyDown:t,ariaControls:a,ref:n,recordingKey:"toolbarAIQuickActionsDropdownButton",testId:"toolbarAIQuickActionsDropdownButton",caret:"down",role:"combobox",ariaLabel:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_button_aria_label"),buttonStyle:{width:g?48+p+8:48},buttonChildrenStyle:{justifyContent:"initial",width:"initial"}},i.createElement("div",{className:l()({"ai_quick_actions_control--withBadge--z88DK":g})},i.createElement("div",{className:"ai_quick_actions_control--buttonIconContainer--pBGdR"},i.createElement(_.B,{svg:X.A,className:l()("ai_quick_actions_control--svgIcon--XDs5m",{"ai_quick_actions_control--svgIconDisabled--u4WwB":o})})),g&&i.createElement(b.fu,{name:"ai_quick_actions_onboarding_badge"},i.createElement("div",{ref:e=>{m(e?.offsetWidth||p)}},i.createElement(f.Ex,{text:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_onboarding_badge_2"),color:f.zE.FIGJAM,size:f.vj.SMALL,className:"ai_quick_actions_control--onboardingBadge---sKJz"})))))});function el(e){return i.createElement(i.Fragment,null,i.createElement(g.wv,{key:"menu-separator-token"}),i.createElement("div",{className:"ai_quick_actions_control--dropdownFooterContainer--1d8mD"},i.createElement("span",null,i.createElement("span",{className:"ai_quick_actions_control--dropdownFooterDisclaimer--UVXvJ"},`${(0,y.t)("whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer")} `),i.createElement(h.N,{className:l()("ai_quick_actions_control--dropdownFooterCta--hi6Ik",{"ai_quick_actions_control--dropdownFooterCtaIsFocused--2OdM8":e}),href:Q,target:"_blank",trusted:!0},(0,y.tx)("whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer_cta")))))}let es=e=>{let{value:t,onClick:n,id:r,isFocused:a}=e;if(!t)return null;let{type:o,enabled:l}=t,{displayText:s,svgSrc:c,disabledTooltipText:u}=function(e){switch(e){case"summarize":return{displayText:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_summarize_button"),svgSrc:Z.A,disabledTooltipText:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_summarize_disabled_tooltip",{minSelectedStickies:2})};case"cluster":return{displayText:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_button"),svgSrc:J.A,disabledTooltipText:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2})};case"generate_ideas":return{displayText:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_generate_ideas_button"),svgSrc:Y.A,disabledTooltipText:(0,y.t)("whiteboard.inline_menu.ai_quick_actions_generate_ideas_disabled_tooltip")}}}(o),d="generate_ideas"===o?"generate ideas":"other ai action";return i.createElement(ec,{key:`${o}-menu-option`,id:r,type:o,displayText:s,svgSrc:c,disabledTooltipText:u,disabled:!l,onClick:n,isFocused:a,trackingProperties:{text:d}})},ec=(0,b.tf)(function({id:e,type:t,displayText:n,svgSrc:r,disabledTooltipText:a,disabled:o,onClick:s,isFocused:c}){return i.createElement("div",{id:e,className:l()("ai_quick_actions_control--optionContainer--pbhnv",{"ai_quick_actions_control--optionContainerDisabled--Sxua-":o,"ai_quick_actions_control--optionContainerIsFocused--AD1hq":c}),"aria-label":n,"aria-selected":"false",role:"option",tabIndex:-1,"data-tooltip-type":N.Ib.TEXT,"data-tooltip":o?a:"","data-tooltip-tip-align-left":!0,"data-tooltip-show-right":!0,"data-tooltip-offset-x":6},i.createElement(v.c$,{disabled:o,recordingKey:`aiQuickActionsOption-${t}`,"data-testid":`aiQuickActionsOption-${t}`,dataTestId:`aiQuickActionsOption-${t}`,key:`option-${t}`,value:t,height:32,fullWidth:!0,svg:r,formattedValue:n,additionalStylesClassName:void 0,selected:!1,onMouseUp:o?d.lQ:s,style:{marginLeft:8},ignoreCheck:!0}))})},503429:(e,t,n)=>{n.d(t,{s:()=>r});var i=n(411855);function r(e){return i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m9.36 6.214-.674 2.472-2.473.674c-1.67.456-1.67 2.825 0 3.28l2.473.675.674 2.472c.455 1.67 2.825 1.67 3.28 0l.675-2.472 2.472-.674c1.67-.456 1.67-2.825 0-3.28l-2.472-.675-.675-2.472c-.455-1.67-2.825-1.67-3.28 0m.965.263L9.5 9.5l-3.024.824c-.687.188-.687 1.163 0 1.35L9.5 12.5l.825 3.024c.187.688 1.163.688 1.35 0l.825-3.023 3.024-.825c.688-.188.688-1.163 0-1.35L12.5 9.5l-.825-3.024c-.187-.688-1.163-.688-1.35 0M14.5 14a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 1 0V15h1v3h-.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1H17v-3h1v.5a.5.5 0 0 0 1 0v-1a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"}))}},328849:(e,t,n)=>{n.d(t,{V:()=>r});var i=n(411855);function r(e){return i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m6.9 6.9.29-1.159c.08-.323.54-.323.62 0L8.1 6.9l1.158.29c.323.08.323.54 0 .62L8.1 8.1l-.29 1.158c-.08.323-.54.323-.62 0L6.9 8.1l-1.158-.29c-.323-.08-.323-.54 0-.62zm9 9 .29-1.158c.08-.323.54-.323.62 0l.29 1.158 1.158.29c.323.08.323.54 0 .62l-1.158.29-.29 1.159c-.08.323-.54.323-.62 0L15.9 17.1l-1.158-.29c-.323-.08-.323-.54 0-.62zm-5.54-8.687-.674 2.473-2.473.674c-1.67.456-1.67 2.825 0 3.28l2.473.675.674 2.472c.455 1.67 2.825 1.67 3.28 0l.674-2.472 2.473-.675c1.67-.455 1.67-2.824 0-3.28l-2.473-.674-.674-2.473c-.455-1.67-2.825-1.67-3.28 0m.965.263L10.5 10.5l-3.024.825c-.688.187-.688 1.163 0 1.35l3.024.825.825 3.024c.187.688 1.163.688 1.35 0L13.5 13.5l3.024-.825c.688-.187.688-1.163 0-1.35L13.5 10.5l-.825-3.024c-.187-.687-1.163-.687-1.35 0",clipRule:"evenodd"}))}},811027:(e,t,n)=>{n.d(t,{z:()=>r});var i=n(411855);function r(e){return i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 6h14a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm3.618 8.282h1.265l.542-1.614h2.46l.543 1.614h1.265l-2.307-6.545H8.922zm3.947-2.566-.886-2.637h-.05l-.885 2.637zm3.843.559v.083h1.064v-.083q.003-.338.08-.569.08-.232.243-.406.165-.173.425-.332a2.4 2.4 0 0 0 .508-.4q.214-.224.33-.511a1.7 1.7 0 0 0 .117-.652q0-.54-.262-.933a1.7 1.7 0 0 0-.725-.61 2.5 2.5 0 0 0-1.074-.215q-.56 0-1.023.205-.46.204-.741.613-.279.41-.294 1.017h1.138q.016-.3.146-.496a.84.84 0 0 1 .336-.294q.204-.099.432-.099.246 0 .444.102.2.104.32.288.117.186.118.438a.9.9 0 0 1-.09.406q-.09.18-.246.326a2.2 2.2 0 0 1-.348.265q-.284.175-.483.387a1.4 1.4 0 0 0-.307.55q-.105.342-.108.92m.06 1.873a.68.68 0 0 0 .496.204q.192 0 .348-.092a.74.74 0 0 0 .256-.256.66.66 0 0 0 .099-.355.66.66 0 0 0-.211-.492.68.68 0 0 0-.492-.204.68.68 0 0 0-.496.204.67.67 0 0 0-.207.492q0 .294.207.499",clipRule:"evenodd"}))}},52339:(e,t,n)=>{n.d(t,{T:()=>r});var i=n(411855);function r(e){return i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m6.953 5.91-.315 1.26-1.26.315c-.504.126-.504.844 0 .97l1.26.315.315 1.26c.127.504.844.504.97 0l.315-1.26 1.26-.315c.505-.126.505-.844 0-.97l-1.26-.315-.314-1.26c-.127-.505-.844-.505-.97 0m7.84.09a1 1 0 0 1 1.414 0L18 7.793a1 1 0 0 1 0 1.414l-1.646 1.646L9.5 17.708a1 1 0 0 1-.707.293H7a1 1 0 0 1-1-1v-1.793a1 1 0 0 1 .293-.707l6.853-6.854zm-.586 2L16 9.793 17.293 8.5 15.5 6.707zm1.086 2.5L13.5 8.707l-6.5 6.5V17h1.793zm.546 5.37.28-1.12c.083-.333.556-.333.64 0l.28 1.12 1.119.28c.333.083.333.557 0 .64l-1.12.28-.28 1.12c-.083.332-.556.332-.64 0l-.28-1.12-1.119-.28c-.333-.083-.333-.557 0-.64z",clipRule:"evenodd"}))}},523047:(e,t,n)=>{n.d(t,{W:()=>a});var i=n(411855),r=n(434228);function a(e){return(0,r.O)()?i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.646 5.646a.5.5 0 0 1 .708 0l4.5 4.5a.5.5 0 0 1-.708.708L12.5 7.207V18a.5.5 0 0 1-1 0V7.207l-3.646 3.647a.5.5 0 0 1-.708-.708z",clipRule:"evenodd"})):i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.146 5.146a.5.5 0 0 1 .708 0l5 5a.5.5 0 0 1-.708.708L12 6.707V17.5a.5.5 0 0 1-1 0V6.707l-4.146 4.147a.5.5 0 0 1-.708-.708z",clipRule:"evenodd"}))}},978488:(e,t,n)=>{n.d(t,{P:()=>r});var i=n(411855);function r(e){return i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M15 6v.879l-1 1V6l-1 1-2 2H7.5a.5.5 0 0 0-.5.5v5c0 .107.034.206.091.288l-.71.71A1.5 1.5 0 0 1 6 14.5v-5A1.5 1.5 0 0 1 7.5 8h3.085l2.708-2.707A1 1 0 0 1 15 6m-1 6.121 1-1V18a1 1 0 0 1-1.707.707L10.586 16h-.465l.94-.94L13 17l1 1v-5.88m3.854-5.267a.5.5 0 0 0-.708-.708l-11 11a.5.5 0 1 0 .708.707z",clipRule:"evenodd"}))}},43604:(e,t,n)=>{n.d(t,{L:()=>r});var i=n(411855);function r(e){return i.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m10 15 2 2 1 1V6l-1 1-2 2H6.5a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5zm2.293-9.707L9.586 8H6.5A1.5 1.5 0 0 0 5 9.5v5A1.5 1.5 0 0 0 6.5 16h3.086l2.707 2.707A1 1 0 0 0 14 18V6a1 1 0 0 0-1.707-.707M19 12a5 5 0 0 1-3.5 4.771V15.71a4.001 4.001 0 0 0 0-7.418V7.229A5 5 0 0 1 19 12m-2 0a3 3 0 0 1-1.5 2.599v-1.276c.311-.353.5-.816.5-1.323s-.189-.97-.5-1.323V9.401a3 3 0 0 1 1.5 2.6",clipRule:"evenodd"}))}}}]);

//# debugId=4c5a4ae3-b570-5edf-a2f8-4095af8c0c19

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/f693ebff41bf3926104688863ce5d3603d748814/448-2af0386722cf753e.min.js.map