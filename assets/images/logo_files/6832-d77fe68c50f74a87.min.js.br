"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="025d7440-ce11-556b-8234-03dad6f66122")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[6832],{331221:(e,t,r)=>{r.d(t,{x:()=>i,z:()=>n});let n={CREATED:"ADD",MODIFIED:"MOD",REMOVED:"DEL"},i={CREATED:"+",MODIFIED:"\u2732",CHILD_MODIFIED:"\u21B5",REMOVED:"-"}},885456:(e,t,r)=>{r.d(t,{E:()=>c});var n=r(752795),i=r(566418),s=r(241395),a=r(640855),l=r(726113),o=r(235307);class c extends l.R{constructor(e,t,r){super(e,t,r),this.id=e,this.nodeChange=t,this.scene=r}get parent(){return this.parentGuid?this.scene.getNodeByGuid(this.parentGuid):null}get children(){return this.scene.getChildrenByParentGuid(this.guid)}get type(){return this.isState?"STATE":super.type}get otherVersions(){if(!this.isSubscribedAsset)return[];let e=this.scene.internalCanvas;if(!e)return[];let t=this.key;return t?e.children.filter(e=>e.type==e.type&&e.key===t&&e.id!=e.id):[]}get consumedStyles(){return this.consumedStyleIds.map(e=>this.scene.getStyleByStyleId(e)).filter(n.isNotNullish)}get consumedVariables(){return this.consumedVariableIds.map(e=>this.scene.getVariableByVariableId(e)).filter(n.isNotNullish)}get internalOnly(){return this.nodeChange.internalOnly||this.parent?.internalOnly||!1}get stateGroupId(){return this.isStateGroup?this._assetId(i.GU):this.isSymbol?this.parent?.stateGroupId??null:null}get backingSymbol(){let e=this.backingSymbolId;return e?this.scene.getNodeByGuid(e):null}get backingStateGroup(){let e=this.backingSymbol;if(!e)return null;let t=e.parent;return t&&t.isStateGroup?t:null}get absoluteTransform(){let e=this.transform,t=this.parent?.absoluteTransform;if(!e||!t)return s.s.identity().toFigMatrix();{let r=s.s.fromFigMatrix(t);return r.multiply(s.s.fromFigMatrix(e)),r.toFigMatrix()}}get containingSymbol(){return this.findAncestor(e=>e.isSymbol)}get containingPage(){return this.findAncestor(e=>e.isPage)}get isState(){return this.isSymbol&&!!this.parent?.isStateGroup}get isPrimaryInstance(){return this.isInstance}get isLooseComponent(){return this.isSymbol&&!this.isState}get isProductComponent(){return this.isStateGroup||this.isLooseComponent}get isInternalOnly(){return this.someAncestor(e=>!!e.nodeChange.internalOnly,{includeSelf:!0})}getFriendlyVariableModeString(e){if(!this.isVariableCollection)return"";let t=a.c1.fromKiwi(e),r=this.nodeChange.variableSetModes?.find(e=>e.id&&a.c1.fromKiwi(e.id)===t);return r?`${r.name} (${t})`:`<missing mode> (${t})`}get variableDependenciesByModeId(){if(!this.isVariable)return{};let e={},t=this.scene,r=t.getVariableCollectionByCollectionId(this.variableCollectionId);return this.nodeChange.variableDataValues?.entries?.forEach(n=>{if(n.modeID){let s=r?.getFriendlyVariableModeString(n.modeID)??a.c1.fromKiwi(n.modeID);e[s]=[],function r(n,s){if(s?.dataType==="ALIAS")!function(r,n){if(!n?.value?.alias)return;let s=i.sD.fromKiwi(n.value.alias);if(!s)return;let a=t.getVariableByVariableId(s);a&&e[r].push(a)}(n,s);else if(s?.dataType==="EXPRESSION")!function(e,t){for(let n of t?.value?.expressionValue?.expressionArguments??[])r(e,n)}(n,s);else if(s?.dataType==="MAP")return function(e,t){for(let n of t?.value?.mapValue?.values??[])r(e,n.value)}(n,s)}(s,n.variableData)}}),e}generateDisplayProperties(){let e=super.generateDisplayProperties(),t=this.containingPage,r=e.rightBadges;return null!=this.parent||this.isDocument||r.push({type:"error",value:"Orphan"}),{...e,longName:t?`${t.displayProperties.name} > ${this.name}`:this.name,rightBadges:r}}generateDimensionalInfoItem(){let e=super.generateDimensionalInfoItem();return null==e?null:(0,o.Sv)(e,[this.absoluteTransform&&this.generatePositionItem("Absolute position",this.absoluteTransform)])}generateDesignSystemsInfoItem(){return(0,o.Sv)(super.generateDesignSystemsInfoItem(),[this.isPrimaryInstance&&this.backingStateGroup&&this.scene.generateNodeLinkItem("Backing state group",this.backingStateGroup.guid),this.isStyle&&this.styleId&&(0,o.$7)({label:"Style consumers",list:this.scene.getStyleConsumers(this.styleId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariable&&this.variableId&&(0,o.$7)({label:"Variable consumers",list:this.scene.getVariableConsumers(this.variableId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariableCollection&&this.variableCollectionId&&(0,o.$7)({label:"Nodes with explicit mode",list:this.scene.getNodesWithExplicitModeForVariableSet(this.variableCollectionId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isAsset&&(0,o.$7)({label:"Other versions",list:this.otherVersions,generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariable&&this.variableCollectionId&&this.scene.generateVariableCollectionLinkItem("Variable collection",this.variableCollectionId),this.isVariableCollection&&this.variableCollectionId&&(0,o.$7)({label:"Variables in collection",list:this.scene.getVariablesInCollection(this.variableCollectionId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)})])}}},2685:(e,t,r)=>{r.d(t,{y:()=>n});let n=Symbol("Blobs not supported.")},640855:(e,t,r)=>{r.d(t,{SW:()=>n,c1:()=>i,dB:()=>s,r4:()=>l});var n,i,s,a=r(534611);function l(e,t){let r=t.toGuidStrIfLocal(e);if(r)return i.format(r);let n=t.toRefIfSubscribed(e);return n?`${n.key.slice(0,5)}...${n.key.slice(-5)}/${n.version}`:e}(n||(n={})).fromString=function(e){return e},(e=>{e.fromString=function(e){return e},e.fromKiwi=function(e){return a.dI(e)},e.format=function(e){return`(${e})`},e.isValid=function(e){return a.fn(a.sH(e))}})(i||(i={})),(e=>{e.fromKiwi=function(e){return e.guids?.map(i.fromKiwi)??[]},e.fromStrings=function(e){return e},e.format=function(e){return`[${e.map(i.format).join(", ")}]`},e.isValid=function(e){return e.length>0&&e.every(i.isValid)}})(s||(s={}))},761518:(e,t,r)=>{r.d(t,{I6:()=>u,Si:()=>g,Tj:()=>c,U9:()=>h,jJ:()=>o,pb:()=>d,zN:()=>m});var n=r(461816),i=r.n(n);let s=()=>!0;function a(e){return Array.isArray(e)?e:[e]}function l(e,t){return"parent"===t?[e.parent]:e.children}function o(e,t,r,{includeSelf:n,shouldSkipAfter:s,shouldBreakAfter:c}={}){let u=a(e),d=n?[...u]:i()(u,e=>l(e,t));for(;;){let e=d.pop();if(!e||(r(e),c?.(e)))return;if(!s?.(e))for(let r of l(e,t))d.push(r)}}function c(e,t,r,n={}){let i=[];return o(e,t,e=>i.push(r(e)),n),i}function u(e,t,r,{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:s}={}){let a;return o(e,t,e=>{r(e)&&(a=e)},{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:e=>null!=a||s?.(e)||!1}),a}function d(e,t,r,n={}){let i=[];return o(e,t,e=>{r(e)&&i.push(e)},n),i}function h(e,t,r=s,n={}){let i=0;return o(e,t,e=>{r(e)&&i++},n),i}function m(e,t,r,n={}){return null!=u(a(e),t,r,n)}function g(e,t,r,n={}){return!m(a(e),t,e=>!r(e),n)}},726113:(e,t,r)=>{r.d(t,{R:()=>f});var n=r(634832),i=r(346124),s=r(566418),a=r(215122),l=r(966712),o=r(618056),c=r(416095),u=r(640855),d=r(632857),h=r(79674),m=r(397565),g=r(235307),p=r(40963);class f extends h.s{constructor(e,t,r){super(e),this.id=e,this.nodeChange=t,this.scene=r,t.guid||console.error("Node is missing guid",t)}get name(){return(0,p.bU)(this.nodeChange.name??"",this.scene.resource.sensitiveTextPolicy)}get text(){return(0,p.bU)(this.nodeChange.textData?.characters??"",this.scene.resource.sensitiveTextPolicy)}get guidObj(){return this.nodeChange.guid??{localID:-1,sessionID:-1}}get guid(){return u.c1.fromKiwi(this.guidObj)}get parentGuid(){let e=this.nodeChange.parentIndex?.guid;return e?u.c1.fromKiwi(e):null}get nodeType(){return this.nodeChange.type||"NONE"}get type(){let e=this.nodeType;if("INSTANCE"===e)return"PRIMARY_INSTANCE";if("VARIABLE_SET"===e)return"VARIABLE_COLLECTION";if(this.isStateGroup)return"STATE_GROUP";if(this.isStyle){let e=this.nodeChange.styleType;switch(e){case"FILL":return"FILL_STYLE";case"STROKE":return"STROKE_STYLE";case"TEXT":return"TEXT_STYLE";case"EFFECT":return"EFFECT_STYLE";case"EXPORT":return"EXPORT_STYLE";case"GRID":return"GRID_STYLE";default:(0,n.assertType)(e)}}else if("FRAME"===e&&this.nodeChange.resizeToFit)return"GROUP";return e}get overrideKey(){let e=this.nodeChange.overrideKey;return e?u.c1.fromKiwi(e):null}get key(){return(0,a.sg)(this.nodeChange.key??this.nodeChange.componentKey??(this.nodeChange.sharedStyleMasterData?.styleKey||this.nodeChange.sharedStyleReference?.styleKey||null))}get version(){return(0,a.Xf)(this.nodeChange.version??this.nodeChange.sharedSymbolVersion??null)}get assetRef(){return a.iU.fromKiwi({key:this.key??void 0,version:this.version??void 0})}_assetId(e){return this.isSubscribedAsset?this.assetRef?e.fromRef(this.assetRef):null:e.fromLocalNodeIdStr(this.guid)}get symbolId(){return this.isSymbol?this._assetId(s.Ws):null}get stateGroupId(){return this.isStateGroup?this._assetId(s.GU):null}get styleId(){return this.isStyle?this._assetId(s.PK):null}get variableId(){return this.isVariable?this._assetId(s.sD):null}get variableCollectionId(){return this.isVariableCollection?this._assetId(s.gr):this.isVariable&&this.nodeChange.variableSetID?s.gr.fromKiwi(this.nodeChange.variableSetID):null}get responsiveSetAssetId(){return this.isVariableCollection?this._assetId(s.cd):null}get publishId(){let e=this.nodeChange.publishID;return e?u.c1.fromKiwi(e):null}get publishFile(){return this.nodeChange.publishFile??null}get isRenderingNode(){return!this.isDocument&&!this.isCanvas&&!this.isStyle&&!this.isVariable&&!this.isVariableCollection&&!this.isVariableOverride}get isInstance(){return"INSTANCE"===this.nodeType}get isSymbol(){return"SYMBOL"===this.nodeType}get isStateGroup(){return"FRAME"===this.nodeType&&null!=this.nodeChange.isStateGroup}get isComponentish(){return this.isSymbol||this.isStateGroup}get isStyle(){return this.nodeChange.styleType&&c.og.indexOf(this.nodeChange.styleType)>-1}get isVariable(){return"VARIABLE"===this.nodeType}get isVariableCollection(){return this.isRootVariableCollection||this.isExtendedVariableCollection}get isRootVariableCollection(){return!!("VARIABLE_SET"===this.nodeType&&!this.nodeChange.backingVariableSetId)}get isExtendedVariableCollection(){return!!("VARIABLE_SET"===this.nodeType&&this.nodeChange.backingVariableSetId)}get isVariableOverride(){return"VARIABLE_OVERRIDE"===this.nodeType}get isResponsiveSetAsset(){return"RESPONSIVE_SET"===this.nodeType}get isAsset(){return this.isSymbol||this.isStateGroup||this.isStyle||this.isVariable||this.isVariableCollection||this.isVariableOverride||this.isResponsiveSetAsset}get isLocalAsset(){return this.isAsset&&!this.isSubscribedAsset}get isSubscribedAsset(){return this.isComponentish?(0,l.kc)().ds_publish_file_deprecation?null!=this.nodeChange.publishID:null!=this.nodeChange.publishFile:this.isStyle?this.nodeChange.key&&this.nodeChange.version:(!!this.isVariable||!!this.isVariableCollection||!!this.isResponsiveSetAsset)&&!!this.nodeChange.key}get isStack(){return null!=this.nodeChange.stackMode&&"NONE"!==this.nodeChange.stackMode}get isCanvas(){return"CANVAS"===this.nodeChange.type}get isPage(){return this.isCanvas}get isDocument(){return"DOCUMENT"===this.nodeChange.type}get backingSymbolId(){let e=this.nodeChange.overriddenSymbolID??this.nodeChange.symbolData?.symbolID;return e?u.c1.fromKiwi(e):null}get transform(){return this.nodeChange.transform}get isImmutableFrame(){let e=this.nodeType;return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}get overridesList(){return this.nodeChange.symbolData?.symbolOverrides??[]}get dsdList(){return this.nodeChange.derivedSymbolData??[]}get immutableFrameSublayerOverridesList(){return this.nodeChange.nodeGenerationData?.overrides??[]}get difdList(){return this.nodeChange.derivedImmutableFrameData?.overrides??[]}get imageHashes(){let e=[],t=t=>{t?.hash&&e.push((0,o.qg)(t))},r=e=>{t(e.image),t(e.imageThumbnail),t(e.animatedImage)},n=e=>{if(e)for(let t of e)r(t)};n(this.nodeChange.fillPaints),n(this.nodeChange.strokePaints),n(this.nodeChange.backgroundPaints),n(this.nodeChange.widgetHoverStyle?.fillPaints),n(this.nodeChange.widgetHoverStyle?.strokePaints);let i=t=>{t&&e.push(t)};return i(this.nodeChange.embedData?.thumbnailImageHash),i(this.nodeChange.embedData?.faviconImageHash),i(this.nodeChange.linkPreviewData?.thumbnailImageHash),i(this.nodeChange.linkPreviewData?.faviconImageHash),i(this.nodeChange.richMediaData?.mediaHash),e}get consumedStyleIds(){let e=[];function t(t){for(let r of d.GP){let n=t[r];if(n){let t=s.PK.fromKiwi(n);t&&e.push(t)}}}for(let e of(t(this.nodeChange),this.nodeChange.symbolData?.symbolOverrides??[]))t(e);for(let e of this.nodeChange.textData?.styleOverrideTable??[])t(e);for(let e of this.nodeChange.vectorData?.styleOverrideTable??[])t(e);for(let e of this.nodeChange.nodeGenerationData?.overrides??[])t(e);return e}get consumedVariableIds(){let e=new Set;function t(t){if(!t)return;let r=s.sD.fromKiwi(t);r&&e.add(r)}for(let e of d.EI)!function(e){for(let r of e??[])t(r.colorVar?.value?.alias)}(this.nodeChange[e]);for(let e of this.nodeChange.variableConsumptionMap?.entries??[])t(e.variableData?.value?.alias),e.variableData?.value?.expressionValue&&function e(r){for(let n of r.expressionArguments??[])t(n.value?.alias),n.value?.expressionValue&&e(n.value.expressionValue)}(e.variableData.value.expressionValue);return[...e.values()]}generateRawProperties(){return this.scene.generateNodeChangeItems(this.nodeChange)}generateDisplayProperties(){let e=[];return this.isStack&&e.push({type:"info",value:"Stack"}),{leftBadges:[{type:"type",value:this.type}],primaryId:u.c1.format(this.guid),secondaryId:this.overrideKey?u.c1.format(this.overrideKey):null,name:this.name,longName:this.name,rightBadges:e,memoryFraction:null}}generateSearchProperties(){return{id:this.id,guid:this.guid,type:[this.type,this.nodeType,m.uy[this.type]],parentGuid:this.parentGuid,overrideKey:this.overrideKey,backingSymbolId:this.backingSymbolId,publishId:this.publishId,consumedStyleIds:this.consumedStyleIds.map(s.PK.toString),name:this.name,field:Object.keys(this.nodeChange),text:this.text,key:this.key,version:this.version,imageHashes:this.imageHashes,symbolId:this.symbolId,stateGroupId:this.stateGroupId,styleId:this.styleId,variableId:this.variableId,variableCollectionId:this.variableCollectionId}}generateComputedProperties(){return(0,g.QB)([this.generateDimensionalInfoItem(),this.generateDesignSystemsInfoItem(),this.generateFigJamInfoItem()])}generateDimensionalInfoItem(){if(!this.isRenderingNode)return null;let e=this.nodeChange.size;return{label:"Dimensional info",children:(0,g.QB)([e&&(0,g.B_)("Width",{type:"numeric",value:e.x}),e&&(0,g.B_)("Height",{type:"numeric",value:e.y}),this.transform&&this.generatePositionItem("Relative position",this.transform)])}}generateDesignSystemsInfoItem(){let e=this.isAsset,t=this.isInstance,r=e?this.key:void 0,n=e?this.version:void 0;return{label:"Design systems info",children:(0,g.QB)([e&&(0,g.B_)("Asset publish type",{type:"nonUserText",value:this.isSubscribedAsset?"Subscribed":"Local"}),r&&(0,g.B_)("Asset key",{type:"nonUserText",value:r,sensitive:!1}),n&&(0,g.B_)("Asset version",{type:"nonUserText",value:n,sensitive:!1}),(0,g.$7)({label:"Consumed variables",list:this.consumedVariableIds,generateChild:this.scene.generateVariableLinkItem}),(0,g.$7)({label:"Consumed styles",list:this.consumedStyleIds,generateChild:this.scene.generateStyleLinkItem}),t&&this.scene.generateNodeLinkItem("Backing symbol",this.backingSymbolId),t&&this.generateOverridesListItem("Instance overrides",this.overridesList),t&&this.generateOverridesListItem("Derived symbol data",this.dsdList)])}}generateFigJamInfoItem(){let e=this.isImmutableFrame;return{label:"FigJam info",children:(0,g.QB)([e&&this.generateOverridesListItem("Overrides",this.immutableFrameSublayerOverridesList),e&&this.generateOverridesListItem("Derived immutable frame data",this.difdList)])}}generateOverridesListItem(e,t){return{label:e,children:[...t].sort((e,t)=>(function(e,t){let r=e.guids??[],n=t.guids??[];for(let e=0;e<Math.min(r.length,n.length);e++){let t=r[e],i=n[e];if(t.sessionID!==i.sessionID)return t.sessionID-i.sessionID;if(t.localID!==i.localID)return t.localID-i.localID}return r.length-n.length})(e.guidPath||{},t.guidPath||{})).map(e=>this.generateOverrideItem(this,e))}}generateOverrideItem(e,{guidPath:t,overrideLevel:r,...n}){let i=u.dB.format(u.dB.fromKiwi(t??{}));return{label:0===r?i:`${i} (level ${r})`,children:this.scene.generateNodeChangeItems(n)}}generatePositionItem(e,t){let{m00:r,m01:n,m02:s,m10:a,m11:l,m12:o}=t,c=r*l-n*a,u=(()=>{let e=180/Math.PI*Math.atan2(a,r);return(0,i.areClose)(e,0,1e-4)?0:-1*e})(),d=c<0?(0,i.areClose)(u,0,1e-4)?"Vertically":(0,i.areClose)(Math.abs(u),180,1e-4)?"Horizontally":"Yes":"No";return{label:e,children:[(0,g.B_)("X",{type:"numeric",value:s}),(0,g.B_)("Y",{type:"numeric",value:o}),(0,g.B_)("Angle",{type:"numeric",value:u}),(0,g.B_)("Scale",{type:"numeric",value:c}),(0,g.B_)("Mirrored",{type:"nonUserText",value:d})],expandByDefault:!0}}}},79674:(e,t,r)=>{r.d(t,{s:()=>i});var n=r(761518);class i{constructor(e){this.id=e}get displayProperties(){return this._cachedDisplayProperties||(this._cachedDisplayProperties=this.generateDisplayProperties()),this._cachedDisplayProperties}get searchProperties(){return this._cachedSearchProperties||(this._cachedSearchProperties=this.generateSearchProperties()),this._cachedSearchProperties}get rawProperties(){return this._cachedRawProperties||(this._cachedRawProperties=this.generateRawProperties()),this._cachedRawProperties}get computedProperties(){return this._cachedComputedProperties||(this._cachedComputedProperties=this.generateComputedProperties()),this._cachedComputedProperties}freeze(){return new s(this)}forEachAncestor(e,t){return(0,n.jJ)(this,"parent",e,t)}forEachDescendant(e,t){return(0,n.jJ)(this,"children",e,t)}mapAncestors(e,t){return(0,n.Tj)(this,"parent",e,t)}mapDescendants(e,t){return(0,n.Tj)(this,"children",e,t)}filterAncestors(e,t){return(0,n.pb)(this,"parent",e,t)}filterDescendants(e,t){return(0,n.pb)(this,"children",e,t)}findAncestor(e,t){return(0,n.I6)(this,"parent",e,t)}findDescendant(e,t){return(0,n.I6)(this,"children",e,t)}someAncestor(e,t){return(0,n.zN)(this,"parent",e,t)}someDescendant(e,t){return(0,n.zN)(this,"children",e,t)}everyAncestor(e,t){return(0,n.Si)(this,"parent",e,t)}everyDescendant(e,t){return(0,n.Si)(this,"children",e,t)}countAncestors(e,t){return(0,n.U9)(this,"parent",e,t)}countDescendants(e,t){return(0,n.U9)(this,"children",e,t)}}class s extends i{constructor(e){super(e.id),this.parent=e.parent,this.children=e.children,this._cachedDisplayProperties=e.displayProperties,this._cachedSearchProperties=e.searchProperties,this._cachedRawProperties=e.rawProperties,this._cachedComputedProperties=e.computedProperties}generateDisplayProperties(){return this._cachedDisplayProperties}generateSearchProperties(){return this._cachedSearchProperties}generateRawProperties(){return this._cachedRawProperties}generateComputedProperties(){return this._cachedComputedProperties}}},397565:(e,t,r)=>{r.d(t,{SP:()=>s,p7:()=>a,uy:()=>i});var n=r(634832);let i={NONE:"NONE",DOCUMENT:"DOC",CANVAS:"CANV",GROUP:"GROUP",FRAME:"FRAME",BOOLEAN_OPERATION:"BOOL",VECTOR:"VECT",STAR:"STAR",LINE:"LINE",ELLIPSE:"ELLPS",RECTANGLE:"RECT",REGULAR_POLYGON:"POLY",ROUNDED_RECTANGLE:"RRECT",TEXT:"TEXT",TEXT_PATH:"TXPTH",SLICE:"SLICE",SYMBOL:"SYMB",STATE:"STATE",PRIMARY_INSTANCE:"PINST",NESTED_INSTANCE:"NINST",STICKY:"STCKY",SHAPE_WITH_TEXT:"SWTXT",CONNECTOR:"CONN",CODE_BLOCK:"CODE",WIDGET:"WIDGT",STAMP:"STAMP",MEDIA:"MEDIA",HIGHLIGHT:"HIGH",SECTION:"SECT",SECTION_OVERLAY:"SECTO",WASHI_TAPE:"WASHI",STATE_GROUP:"STGRP",FILL_STYLE:"FSTYL",STROKE_STYLE:"SSTYL",TEXT_STYLE:"TSTYL",EFFECT_STYLE:"ESTYL",EXPORT_STYLE:"XSTYL",GRID_STYLE:"GSTYL",VARIABLE:"VAR",VARIABLE_COLLECTION:"V_COL",VARIABLE_OVERRIDE:"V_OVR",TABLE:"TABLE",TABLE_CELL:"TCELL",SLIDE:"SLIDE",SLIDE_ROW:"SROW",SLIDE_GRID:"SGRID",ASSISTED_LAYOUT:"ALAYO",INTERACTIVE_SLIDE_ELEMENT:"FLAPP",MODULE:"MOD",RESPONSIVE_SET:"RESET",CODE_COMPONENT:"CCOMP",JOURNAL_ENTRY:"JRNL",DIFF_CHUNK:"CHUNK"};var s=(e=>(e[e.DesignSystems=0]="DesignSystems",e[e.FigJam=1]="FigJam",e[e.Editor=2]="Editor",e[e.Page=3]="Page",e[e.Other=4]="Other",e))(s||{});function a(e){switch(e){case"CODE_COMPONENT":case"EFFECT_STYLE":case"EXPORT_STYLE":case"FILL_STYLE":case"GRID_STYLE":case"MODULE":case"NESTED_INSTANCE":case"PRIMARY_INSTANCE":case"STATE_GROUP":case"STATE":case"STROKE_STYLE":case"SYMBOL":case"TEXT_STYLE":case"VARIABLE_COLLECTION":case"VARIABLE_OVERRIDE":case"VARIABLE":return 0;case"BOOLEAN_OPERATION":case"ELLIPSE":case"LINE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"STAR":case"VECTOR":return 2;case"CODE_BLOCK":case"CONNECTOR":case"HIGHLIGHT":case"MEDIA":case"SECTION_OVERLAY":case"SHAPE_WITH_TEXT":case"STAMP":case"STICKY":case"TABLE":case"WASHI_TAPE":return 1;case"CANVAS":case"DIFF_CHUNK":case"DOCUMENT":case"JOURNAL_ENTRY":return 3;case"ASSISTED_LAYOUT":case"FRAME":case"GROUP":case"INTERACTIVE_SLIDE_ELEMENT":case"NONE":case"NONE":case"RESPONSIVE_SET":case"SECTION":case"SLICE":case"SLIDE_GRID":case"SLIDE_ROW":case"SLIDE":case"TABLE_CELL":case"TEXT_PATH":case"TEXT":case"WIDGET":return 4;default:return(0,n.assertType)(e),4}}},235307:(e,t,r)=>{r.d(t,{$7:()=>l,B_:()=>a,QB:()=>i,Sv:()=>s,o8:()=>o});var n=r(752795);function i(e){return e.filter(Boolean).sort((e,t)=>e.label.localeCompare(t.label))}function s(e,t){return{...e,children:i([...t,...e.children])}}function a(e,t){return{label:e,value:t,children:[],expandByDefault:!1}}function l({label:e,value:t,list:r,generateChild:i,expandByDefault:s}){return{label:e,value:t??{type:"metadata",value:r.length},children:r.map((e,t)=>i(`[${t}]`,e,t)).filter(n.isNotNullish),expandByDefault:s}}function o({label:e,value:t,object:r,generateChild:n,expandByDefault:s,showChildCount:a}){return{label:e,value:t??(a?{type:"metadata",value:Object.keys(r).length}:void 0),children:i(Object.entries(r).map(([e,t])=>n(e,t))),expandByDefault:s}}},255433:(e,t,r)=>{r.d(t,{R:()=>i});var n=r(761518);class i{constructor({name:e,sensitiveTextPolicy:t}){this.name=e,this.sensitiveTextPolicy=t}forEach(e,t){return(0,n.jJ)(this.rootObjects,"parent",e,t)}map(e,t){return(0,n.Tj)(this.rootObjects,"parent",e,t)}filter(e,t){return(0,n.pb)(this.rootObjects,"parent",e,t)}find(e,t){return(0,n.I6)(this.rootObjects,"parent",e,t)}some(e,t){return(0,n.zN)(this.rootObjects,"parent",e,t)}every(e,t){return(0,n.Si)(this.rootObjects,"parent",e,t)}count(e,t){return(0,n.U9)(this.rootObjects,"parent",e,t)}}},897069:(e,t,r)=>{r.d(t,{X:()=>c});var n=r(752795),i=r(566418),s=r(364898),a=r(632857),l=r(640855),o=r(235307);class c{constructor(){this.generateNodeLinkItem=(e,t)=>(0,o.B_)(e,{type:"nodeGuid",value:t,scene:this}),this.generateStyleLinkItem=(e,t)=>(0,o.B_)(e,{type:"styleId",value:t,scene:this}),this.generateVariableLinkItem=(e,t)=>(0,o.B_)(e,{type:"variableId",value:t,scene:this}),this.generateVariableCollectionLinkItem=(e,t)=>(0,o.B_)(e,{type:"variableCollectionId",value:t,scene:this}),this.generateNodeFieldItemValue=(e,t,r)=>{if((0,a.M_)(t,e))return{type:"blobIndex",value:t,scene:this};if((0,a.Lm)(t))return{type:"boolean",value:t};if((0,a.kf)(t))return{type:"numeric",value:t};if((0,a.Kg)(t))return("position"===e||"sortPosition"===e)&&(0,s.qO)(t)?{type:"position",value:t}:(0,a.SE)(t,e)?{type:"userInputtedText",value:t}:{type:"nonUserText",value:t};if((0,a._o)(t))return{type:"color",value:t};if((0,a.WX)(t))return{type:"vector",value:t};if((0,a.ar)(e)){let e=i.PK.fromKiwi(t);if(e)return{type:"styleId",value:e,scene:this}}if((0,a.r4)(e)){let e=i.gr.fromKiwi(t);if(e)return{type:"variableCollectionId",value:e,scene:this}}if((0,a.Ox)(e)){let e=i.sD.fromKiwi(t);if(e)return{type:"variableId",value:e,scene:this}}if((0,a.W_)(t))return(0,a.aP)(e,r)?{type:"nodeGuid",value:l.c1.fromKiwi(t),scene:this}:{type:"genericGuid",value:l.c1.fromKiwi(t)};if((0,a.hV)(t)){let{guids:e}=t;return e?{type:"guidPath",value:e.map(l.c1.fromKiwi).filter(n.isNotNullish)}:{type:"error",value:"Invalid Fig.GUIDPath"}}return(0,a.OA)(t)?{type:"matrix",value:t}:(0,a.qx)(t,e)?{type:"imageHash",value:t}:(0,a.aY)(t)?{type:"bytes",value:t}:(0,a.Rt)(t)?{type:"editScope",value:t}:null},this.generateNodeFieldItem=(e,t,r)=>{if(null==t)return null;let n=this.generateNodeFieldItemValue(e,t,r);if(null!=n)return(0,o.B_)(e,n);if(Array.isArray(t))return(0,o.$7)({label:e,list:t,generateChild:(e,t)=>this.generateNodeFieldItem(e,t),expandByDefault:!1});{let r=["connectorStart","connectorEnd","symbolData"].includes(e);return(0,o.o8)({label:e,object:t,generateChild:(e,t)=>this.generateNodeFieldItem(e,t),expandByDefault:r})}}}generateNodeChangeItems(e){return(0,o.QB)(Object.entries(e).map(([e,t])=>this.generateNodeFieldItem(e,t)))}}},579616:(e,t,r)=>{r.d(t,{$:()=>i});var n=r(255433);class i extends n.R{get rootObjects(){return this.scene.rootNodes}getObject(e){return this.scene.getNodeById(e)}}},100874:(e,t,r)=>{r.d(t,{m:()=>a});var n=r(96328),i=r(752568),s=r(235307);class a{constructor(e,t){for(let[r,n]of(this.scene=e,this.ownFailuresById=new i.d,this.childrenWithFailuresById=new i.d,this.badgesById=new Map,this.propertiesById=new Map,t.entries())){let t=e.getNodeByGuid(r);t&&this.processEntry(t,n)}}generateBadges(e){let t=this.badgesById.get(e);if(t)return t;let r=[],i=this.ownFailuresById.get(e);if(i&&i.size>0){let e=i.size,t=`${(0,n.td)(e,"SceneGraph validation failure")} for this node: ${Array.from(i).join(", ")}`;r.push({type:"error",value:`${e}!`,title:t})}let s=this.childrenWithFailuresById.get(e);if(s&&s.size>0){let e=s.size,t=`${(0,n.td)(e,"SceneGraph validation failure")} in this node's descendants.`;r.push({type:"warning",value:`${e}!`,title:t})}return this.badgesById.set(e,r),r}generateProperty(e){return this.propertiesById.get(e)||(this.scene.getNodeById(e)?{label:"SceneGraph validation info",children:[(0,s.$7)({label:"Validation failures",list:Array.from(this.ownFailuresById.get(e)??[]),generateChild:(e,t)=>({key:t,label:"",value:{type:"error",value:t},children:[]})}),(0,s.$7)({label:"Children with validation failures",list:Array.from(this.childrenWithFailuresById.get(e)??[]),generateChild:this.scene.generateNodeLinkItem})]}:null)}processEntry(e,t){for(let r of t)this.ownFailuresById.add(e.id,r);for(let t=e.parent;t;t=t.parent)this.childrenWithFailuresById.add(t.id,e.guid)}}},645337:(e,t,r)=>{r.d(t,{G2:()=>b});var n=r(296853),i=r(634832),s=r(752795),a=r(587670),l=r(707458),o=r(96328),c=r(678340),u=r(479118),d=r(273226),h=r(885456),m=r(2685),g=r(640855),p=r(235307),f=r(897069),y=r(579616),E=r(100874),I=r(785131);class b extends y.${constructor({name:e,sensitiveTextPolicy:t,type:r,pagesList:n,migrationVersion:i}){super({name:e,sensitiveTextPolicy:t}),this.type=r,this.pagesList=n,this.migrationVersion=i,this.scene=new v(this)}getSearch(){return this.scene.getSearch()}get metadata(){return{"Migration version":this.migrationVersion?.toString()}}setSceneGraphValidationInfo(e){this.sceneGraphValidationInfo=new E.m(this.scene,e)}getAdditionalProperties(e){let t=[],r=this.sceneGraphValidationInfo?.generateProperty(e);if(r&&t.push(r),this.pagesList){let r=this.scene.getNodeById(e),n=r?.isPage?r:r?.containingPage;t.push({label:"Dynamic page loading info",children:(0,p.QB)([r&&n&&r!==n&&this.scene.generateNodeLinkItem("Containing page",n.guid),n&&(0,p.B_)("Page status",(()=>{switch((0,u.Fy)(this.pagesList,n.guid)){case a.xal.REQUESTED:return{type:"error",value:"Page loading in progress"};case a.xal.NOT_LOADED:return{type:"error",value:"Page not loaded due to incremental loading"};default:return{type:"nonUserText",value:"Page loaded"}}})())])})}return t}getAdditionalBadges(e){let t=[],r=this.sceneGraphValidationInfo?.generateBadges(e);r&&t.push(...r);let n=this.scene.getNodeById(e);if(n?.isPage&&this.pagesList)switch((0,u.Fy)(this.pagesList,n.guid)){case a.xal.LOADED:break;case a.xal.REQUESTED:t.push({type:"warning",value:"LOADING",title:"Page loading in progress"});break;case a.xal.NOT_LOADED:t.push({type:"warning",value:"NOT LOADED",title:"Page not loaded due to incremental loading"})}return t}}class v extends f.X{constructor(e){super(),this.resource=e,this.nodesById=new Map,this.stylesById=new Map,this.variablesById=new Map,this.variableCollectionsById=new Map,this.searchDB=new I.H,this.isComplete=!0,this.totalMemoryUsage=this.rootNodes.reduce((e,t)=>e+t.treeMemoryUsage,0)}get document(){return this.rootNodes.find(e=>e.isDocument)}get pages(){return this.document.children}get internalCanvas(){return this.pages.find(e=>e.nodeChange.internalOnly)??null}get rootNodes(){return this.fetchNodesFromFullscreen(()=>a.Hcu.getRootNodes())}getNodeById(e){return this.getNodeFromCache(e)||this.fetchNodeFromFullscreen(()=>a.Hcu.getNode(T(e)))}getNodeByGuid(e){return this.fetchNodeFromFullscreen(()=>a.Hcu.getNodeByGuid(e))}getChildrenByParentGuid(e){return this.fetchNodesFromFullscreen(()=>a.Hcu.getChildrenByParentGuid(e))}getStyleByStyleId(e){return this.getStyleFromCache(e)||this.fetchNodeFromFullscreen(()=>a.Hcu.getStyle(e))}getVariableByVariableId(e){return this.getVariableFromCache(e)||this.fetchNodeFromFullscreen(()=>a.Hcu.getVariable(e))}getVariableCollectionByCollectionId(e){return this.getVariableCollectionFromCache(e)||this.fetchNodeFromFullscreen(()=>a.Hcu.getVariableCollection(e))}getStyleConsumers(e){return this.fetchNodesFromFullscreen(()=>a.Hcu.getStyleConsumers(e))}getConsumedStyles(e){return this.fetchNodesFromFullscreen(()=>a.Hcu.getConsumedStyles(T(e)))}getConsumedVariables(e){return this.fetchNodesFromFullscreen(()=>a.Hcu.getConsumedVariables(T(e)))}getVariablesInCollection(e){return this.fetchNodesFromFullscreen(()=>a.Hcu.getVariablesInCollection(e))}getNodesWithExplicitModeForVariableSet(e){return this.fetchNodesFromFullscreen(()=>a.Hcu.getNodesWithExplicitModeForVariableSet(e))}getVariableConsumers(e){return this.fetchNodesFromFullscreen(()=>a.Hcu.getVariableConsumers(e))}getDirectVariableDependenciesToVariable(e){return this.fetchNodesFromFullscreen(()=>a.Hcu.getDirectVariableDependenciesToVariable(e))}getPropDefs(e){return a.Hcu.getPropDefs(T(e))}getCombinedPropAssignments(e){return a.Hcu.getCombinedPropAssignments(T(e))}getTransitiveDependencyPaths(e,t){return a.Hcu.getTransitiveDependencyPaths(T(e),t)}getAllOverridesForLayer(e){return a.Hcu.getLayerOverrides(T(e)).map(e=>({...e,fields:n.w.decodeMessage(e.fields).nodeChanges[0]}))}getAllSublayerInfoForImmutableFrame(e){return a.Hcu.getImmutableFrameSubLayerInfo(T(e))}getOverrideStash(e){return a.Hcu.getOverrideStash(T(e)).map(e=>({...e,overrides:e.overrides.map(e=>({...e,fields:n.w.decodeMessage(e.fields).nodeChanges[0]}))}))}getTextInsertionStyle(e){let t;let r=a.Hcu.getTextInsertionStyle(T(e));if(0===r.length)return null;try{t=n.w.decodeMessage(r).nodeChanges}catch(e){return console.warn("FigmaScope: error decoding node changes",e),null}return t?t.length>1?(console.warn("FigmaScope: more than one node change found for text insertion style"),null):t[0]:(console.warn("FigmaScope: buffer did not contain node changes"),null)}getBlobByIndex(e){return m.y}getNodeByKiwiOverridePath(e,t){let r=[e,...g.dB.fromKiwi(t)];return this.getNodeById(C(r))}get supportsNodePreviews(){switch(this.resource.type){case"editor":return!0;case"viewer":return!1;case"standalone":return"hide"!==this.resource.sensitiveTextPolicy}}getNodeFromCache(e){return this.nodesById.get(e)??null}getStyleFromCache(e){return this.stylesById.get(e)??null}getVariableFromCache(e){return this.variablesById.get(e)??null}getVariableCollectionFromCache(e){return this.variableCollectionsById.get(e)??null}fetchNodeFromFullscreen(e){let t=null;try{t=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return t?this.createAndCacheNode(t):null}fetchNodesFromFullscreen(e){let t=[];try{t=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return t.map(e=>this.createAndCacheNode(e)).filter(s.isNotNullish)}createAndCacheNode(e){let t;try{t=n.w.decodeNodeChange(e.nodeChange)}catch(e){return console.error("FigmaScope: error decoding node changes",e),null}let r=g.dB.fromStrings(e.stablePath),i=C(r),s=this.nodesById.get(i);if(s)return s;let a=new S(i,{...e,nodeChange:t,stablePath:r},this);return this.nodesById.set(a.id,a),a.styleId&&this.stylesById.set(a.styleId,a),a.isVariable&&a.variableId&&this.variablesById.set(a.variableId,a),a.isVariableCollection&&a.variableCollectionId&&this.variableCollectionsById.set(a.variableCollectionId,a),"standalone"===this.resource.type&&a.isPrimaryInstance&&l.q.instance.get(a.guid)?.materializeDescendants(),a}getSearch(e){if(this._indexedSearchDB)return this._indexedSearchDB;let t=0,r=this.rootNodes,n=async()=>{await scheduler.postTask(async()=>{let i=Date.now();for(;Date.now()-i<100;){let n=r.pop();if(!n)return;e&&++t%5e3==0&&e(t),this.searchDB.indexObject(n),r.push(...n.children.filter(e=>e.guid))}await n()})},i=n().then(()=>this.searchDB);return this._indexedSearchDB=i}}class S extends h.E{constructor(e,t,r){super(e,t.nodeChange,r),this.id=e,this.data=t,this.scene=r}get type(){return this.isNestedInstance?"NESTED_INSTANCE":super.type}get parent(){return this.parentGuid?this.scene.getNodeByGuid(this.parentGuid):null}get children(){return this.scene.getChildrenByParentGuid(this.guid)}get consumedStyleIds(){return this.scene.getConsumedStyles(this.id).map(e=>e.styleId).filter(s.isNotNullish)}get consumedStyles(){return this.scene.getConsumedStyles(this.id)}get consumedVariableIds(){return this.consumedVariables.map(e=>e.variableId).filter(s.isNotNullish)}get consumedVariables(){return this.scene.getConsumedVariables(this.id)}get key(){return super.key??a.Egt.getAssetKeyForPublish(this.guid)}get stablePath(){return this.data.stablePath}get isTracked(){return 1===this.stablePath.length}get isUntracked(){return this.stablePath.length>1}get containingTrackedNode(){return this.isTracked?this:this.parent?.containingTrackedNode??null}get isPrimaryInstance(){return this.isInstance&&this.isTracked}get containingInstance(){return this.findAncestor(e=>e.isInstance)}get containingPrimaryInstance(){return this.findAncestor(e=>e.isPrimaryInstance)}get containingImmutableFrame(){return this.findAncestor(e=>e.isImmutableFrame)}get isInstanceSublayer(){return null!=this.containingInstance}get isImmutableFrameSublayer(){return null!=this.containingImmutableFrame}get isNestedInstance(){return this.isInstance&&this.isInstanceSublayer}get isSwappedNestedInstance(){return this.isNestedInstance&&null!=this.nodeChange.overriddenSymbolID}get ownMemoryUsage(){return this._ownMemoryUsage=this._ownMemoryUsage??a.Hcu.getNodeMemoryUsage(this.stablePath)}get treeMemoryUsage(){return this._treeMemoryUsage=this._treeMemoryUsage??a.Hcu.getSubtreeMemoryUsage(this.stablePath)}generateDisplayProperties(){return{...super.generateDisplayProperties(),secondaryId:this.stablePath.length>1?g.dB.format(this.stablePath.slice(1)):this.overrideKey?g.c1.format(this.overrideKey):null,memoryFraction:(0,c.KV)(this.treeMemoryUsage,this.scene.totalMemoryUsage)}}generateRawProperties(){return[{label:"Tracked fields",children:super.generateRawProperties(),expandByDefault:!0},{label:"Untracked fields",children:this.generateNonKiwiFieldProperties(this.data.untrackedFields),expandByDefault:!0},{label:"Derived properties",children:this.generateNonKiwiFieldProperties(this.data.derivedProperties),expandByDefault:!0}]}generateNonKiwiFieldProperties({jsonSerialized:e,stringSerialized:t}){let r=[];for(let[t,n]of Object.entries(e))null!=n&&r.push(this.scene.generateNodeFieldItem((0,o.Cb)(t),n));for(let[e,n]of Object.entries(t))r.push({label:e,value:{type:"error",value:"No toJson() support"},children:[(0,p.B_)("Debug string",{type:"nonUserText",value:n,sensitive:!1})]});return r.filter(s.isNotNullish)}generateComputedProperties(){let e=(0,p.QB)([...super.generateComputedProperties(),this.generateMemoryUsageItem(),this.generateTextInfoItem()]),t=this.generateNodePreviewItem();return t&&e.push(t),e}generateMemoryUsageItem(){return{label:"Memory usage",children:[(0,p.B_)("Own data",{type:"numeric",value:this.ownMemoryUsage}),(0,p.B_)("Tree data",{type:"numeric",value:this.treeMemoryUsage})],expandByDefault:!0}}generateDesignSystemsInfoItem(){return(0,p.Sv)(super.generateDesignSystemsInfoItem(),[this.generateComponentPropDefsItem(),this.generateComponentPropAssignmentsItem(),this.generateSymbolDependencyPathsItem(a.Uze.FROM),this.generateSymbolDependencyPathsItem(a.Uze.TO),this.generateLayerOverridesSection()])}generateTextInfoItem(){if("TEXT"!==this.type)return null;let e=this.scene.getTextInsertionStyle(this.id);return{label:"Text info",children:(0,p.QB)([e&&(0,p.o8)({label:"Text insertion style",object:e,generateChild:this.scene.generateNodeFieldItem,showChildCount:!0})])}}generateNodePreviewItem(){return this.scene.supportsNodePreviews&&this.isRenderingNode&&!this.isStateGroup?{label:"Node preview",children:[(0,p.B_)("",{type:"nodeThumbnail",value:this.guidObj})]}:null}generateOverrideItem(e,t){let r=this.scene.getNodeByKiwiOverridePath(e.guid,t.guidPath??{});return{...super.generateOverrideItem(e,t),value:r?{type:"nodeGuid",value:r.guid,scene:this.scene}:void 0}}generateComponentPropDefsItem(){if(!this.isSymbol&&!this.isStateGroup)return null;let e=this.scene.getPropDefs(this.id),t=this.isState?this.parentGuid:null;return{label:"Component prop defs",children:e.map(e=>({label:g.c1.format(e.defID),value:{type:"userInputtedText",value:e.name,scene:this.scene},children:[(0,p.B_)("Is explicit",{type:"boolean",value:e.isExplicit}),(0,p.B_)("Default value",this.generateComponentPropValue(e.propType,e.defaultValue)),...this.generateComponentPropProperties(e,t)]}))}}generateComponentPropAssignmentsItem(){if(!this.isInstance)return null;let e=this.scene.getCombinedPropAssignments(this.id),t=this.backingStateGroup?.guid??null;return{label:"Component prop assignments (combined)",children:e.map(e=>({label:g.c1.format(e.assignmentID),value:{type:"userInputtedText",value:e.name,scene:this.scene},children:[(0,p.B_)("Value",this.generateComponentPropValue(e.propType,e.assignmentValue)),(0,p.B_)("Is mixed",{type:"boolean",value:e.isMixed}),...this.generateComponentPropProperties(e,t)]}))}}generateComponentPropProperties(e,t){let{error:r,propType:n,explicitDefID:i,refNodes:s}=e;return(0,p.QB)([!!r&&(0,p.B_)("Error",{type:"error",value:r}),!!n&&(0,p.B_)("Prop type",{type:"nonUserText",value:(0,d.xb)(n)}),!!i&&(0,p.B_)("Explicit def ID",{type:"genericGuid",value:g.c1.fromString(i)}),t&&this.scene.generateNodeLinkItem("Containing state group",t),(0,p.$7)({label:"Ref Nodes",list:s,generateChild:(e,t)=>this.generateRefNodeItem(e,t)})])}generateComponentPropValue(e,t){switch(e){case a.J0O.BOOL:return{type:"boolean",value:t.boolValue};case a.J0O.TEXT:return{type:"userInputtedText",value:t.textValue};case a.J0O.INSTANCE_SWAP:return{type:"nodeGuid",value:g.c1.fromString(t.instanceSwapValue),scene:this.scene};default:return t.untypedValue?{type:"nonUserText",value:t.untypedValue}:{type:"error",value:"Unknown prop type"}}}generateRefNodeItem(e,t){return{label:e,children:[this.scene.generateNodeLinkItem("Ref node",g.c1.fromString(t.refNodeGuid)),(0,p.B_)("Ref field",{type:"nonUserText",value:t.nodeField})],expandByDefault:!0}}generateSymbolDependencyPathsItem(e){return this.isPrimaryInstance||this.isSymbol?(0,p.$7)({label:e===a.Uze.FROM?"Symbol Dependencies":"Symbol Dependents",list:this.scene.getTransitiveDependencyPaths(this.id,e),generateChild:(t,{edges:r})=>({label:t,value:{type:"nodeGuid",value:g.c1.fromString(e===a.Uze.FROM?r[r.length-1].toGuid:r[0].fromGuid),scene:this.scene},children:1===r.length?this.generateSymbolDependencyProperties(r[0],!1):[(0,p.B_)("Type",{type:"nonUserText",value:"Transitive"}),(0,p.$7)({label:"Edges",list:r,generateChild:(e,t)=>({label:e,children:this.generateSymbolDependencyProperties(t,!0),expandByDefault:!0}),expandByDefault:!0})]})}):this.isStateGroup?(0,p.$7)({label:e===a.Uze.FROM?"Symbol dependencies by state":"Symbol dependents by state",list:this.children,generateChild:(t,r)=>({...r.generateSymbolDependencyPathsItem(e),label:`State ${t}`,value:{type:"nodeGuid",value:r.guid,scene:this.scene}})}):null}generateSymbolDependencyProperties({fromGuid:e,toGuid:t,type:r,pathToOverride:n,propDefId:s},l){let o=[(0,p.B_)("Type",{type:"nonUserText",value:(()=>{switch(r){case a.SoG.PRIMARY_INSTANCE_BACKED_BY_SYMBOL:return"Primary instance backed by symbol";case a.SoG.PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL:return"Primary instance with nested swap to symbol";case a.SoG.PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with top level prop assignment to symbol";case a.SoG.PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with nested prop assignment to symbol";case a.SoG.PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL:return"Product component with prop def to symbol";case a.SoG.STATE_WITH_PROP_DEF_TO_SYMBOL:return"State with prop def to symbol";case a.SoG.SYMBOL_CONTAINING_PRIMARY_INSTANCE:return"Symbol containing primary instance";case a.SoG.INVALID:return"Invalid";default:(0,i.assertNever)(r)}})()})];return l&&(o.push(this.scene.generateNodeLinkItem("From",g.c1.fromString(e))),o.push(this.scene.generateNodeLinkItem("To",g.c1.fromString(t)))),n.length>1&&o.push((0,p.B_)("Path to override",{type:"guidPath",value:g.dB.fromStrings(n)})),s&&g.c1.isValid(s)&&o.push((0,p.B_)("Prop def id",{type:"genericGuid",value:g.c1.fromString(s)})),o}generateLayerOverridesSection(){if(!this.isInstance&&!this.isInstanceSublayer)return null;let e=this.scene.getAllOverridesForLayer(this.id),t={};for(let{primaryInstanceId:r,containingSymbolId:n,fields:i,savedLevel:s,inheritanceLevel:a}of e)for(let[e,l]of Object.entries(i))t[e]=t[e]||[],t[e][a]={primaryInstanceId:r,containingSymbolId:n,value:l,savedLevel:s};let r=Object.keys(t).sort();return 0===r.length?null:(0,p.$7)({label:"Layer overrides",list:r,expandByDefault:!1,generateChild:(e,r)=>{let n=t[r],i=n.findIndex(s.isNotNullish),a=n[i].value;return{label:r,value:{type:"metadata",value:0===i?"Direct override":"Inherited override"},expandByDefault:!1,children:[{...this.scene.generateNodeFieldItem(r,a),label:"Resolved value"},{label:"Sources",expandByDefault:!1,children:(0,p.QB)(n.map(({primaryInstanceId:e,containingSymbolId:t,value:n,savedLevel:i},s)=>({label:0===s?"Direct override":"Inherited from",key:`Level ${s}`,value:t?{type:"nodeGuid",value:g.c1.fromString(t),scene:this.scene}:void 0,children:(0,p.QB)([{...this.scene.generateNodeFieldItem(r,n),label:"Value"},i>0&&(0,p.B_)("Saved level",{type:"numeric",value:i}),this.scene.generateNodeLinkItem("Primary instance",g.c1.fromString(e))])})))}]}}})}}function C(e){return g.SW.fromString(e.join(";"))}function T(e){return g.dB.fromStrings(e.split(";"))}},785131:(e,t,r)=>{r.d(t,{U:()=>m,H:()=>h});var n=r(677469),i=r.n(n),s=r(776250),a=r(852438);let l={id:["nodeId"],guid:[],parentGuid:["parent","parentId"],type:["nodeType"],field:["property"],phase:[],overrideKey:["okey"],backingSymbolId:["symbol","symbolId"],consumedStyleIds:["consumedStyleId","consumedStyle","consumedStyles"],name:[],text:[],key:[],version:["assetVersion","sharedSymbolVersion"],publishId:[],imageHashes:[],symbolId:["symbol"],stateGroupId:["stateGroup"],styleId:["style"],variableId:["variable"],variableCollectionId:["variableSetId","collectionId","variableCollection","variableSet"],editScopeLabel:["editScope"],startSequenceNumber:["start","startSequence"],endSequenceNumber:["end","endSequence"],userId:["user"],createdAt:["created","date","time"]};var o=r(752568);class c{constructor(){this.children=new Map,this.value=[]}}class u{constructor(){this.root=new c}insert(e,t){let r=this.root;for(let t=0;t<e.length;t++){let n=e.charAt(t),i=r.children.get(n);i||r.children.set(n,i=new c),r=i}r.value.push(t)}prefixFind(e){let t=[];for(let r of this.keysWithPrefix(e)){let e=this.find(r);if(e)for(let r of e)t.push(r)}return t}find(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t.value}keysWithPrefix(e){let t=[],r=this.findNode(e);return this.collect(r,function(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);t.push(n)}return t}(e),t),t}collect(e,t,r){if(e)for(let n of(e.value.length>0&&r.push(t.join("")),Array.from(e.children.keys())))t.push(n),this.collect(e.children.get(n),t,r),t.pop()}findNode(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t}}class d{constructor({property:e,aliases:t=[]}){this.trie=new u,this.exactMatches=new o._,this.property=e,this.aliases=t}search({value:e,isExact:t}){let r=this.exactMatches.get(e);if(t)return r;let n=this.trie.prefixFind(e.toLowerCase()).filter(e=>!r.some(t=>t.object===e.object));return[...r,...n]}indexObject(e){let t=e.searchProperties[this.property];if(t){if(Array.isArray(t))for(let r of t)this.indexValue(r,e);else this.indexValue(t,e)}}indexValue(e,t){this.exactMatches.add(e,{value:e,object:t,property:this.property,isExact:!0}),this.trie.insert(e.toLowerCase(),{value:e,object:t,property:this.property,isExact:!1})}}class h{constructor(){this.indices=Object.entries(l).map(([e,t])=>new d({property:e,aliases:t}))}indexObject(e){for(let t of this.indices)t.indexObject(e)}indexObjects(e){for(let t of this.indices)for(let r of e)t.indexObject(r)}searchWithText(e){return this.search(function(e){let t,r=[];e=e.trim();let n=/([a-zA-Z0-9_.]+=)?("[^"]*"|'[^']*'|[^\s]+)/g;for(;t=n.exec(e);){var i;let e=t[1]?.slice(0,-1)||void 0,{value:n,isExact:s}=(i=t[2]).startsWith("'")&&i.endsWith("'")||i.startsWith('"')&&i.endsWith('"')?{value:i.slice(1,-1),isExact:!0}:{value:i,isExact:!1};r.push({property:e,value:n,isExact:s})}return r.length>1&&(r=function(e){let t=[],r=e[0],n=e[1],i=2;for(;;)if(n)r.property||n.property||r.isExact||n.isExact?(t.push(r),r=n):r={property:void 0,value:`${r.value} ${n.value}`,isExact:!1},n=e[i++];else{t.push(r);break}return t}(r)),r}(e))}searchWithProperties(e){return this.search(function(e){let t=[];for(let[r,n]of Object.entries(e))if(n){if(Array.isArray(n))for(let e of n)t.push({property:r,value:e,isExact:!0});else t.push({property:r,value:n,isExact:!0})}return t}(e))}search(e){let t;for(let r of(s.az.trackDefinedEvent("figmascope.search",{used_operators:e.length>1||null!=e[0].property}),e)){let e=new Map;for(let t of this.getIndicesToSearchForToken(r))for(let n of t.search(r)){let{object:t,...r}=n;e.has(t)?e.get(t).matches.push(r):e.set(t,{object:t,matches:[r]})}t=t?(0,a.wD)(t,e,(e,t,r)=>({object:e,matches:t.matches.concat(r.matches)})):e}return t?i()(Array.from(t.values())).sort(g):[]}getIndicesToSearchForToken({property:e}){return null==e?this.indices.filter(e=>"parentGuid"!==e.property):(e=e.toLowerCase(),this.indices.filter(t=>{if(t.property.toLowerCase()===e)return!0;for(let r of t.aliases)if(r.toLowerCase()===e)return!0;return!1}))}}class m{constructor(e){this.dbs=e}searchWithText(e){return i()(this.dbs.map(t=>t.searchWithText(e))).sort(g)}searchWithProperties(e){return i()(this.dbs.map(t=>t.searchWithProperties(e))).sort(g)}}function g(e,t){let r=e.matches.filter(e=>e.isExact).length;return t.matches.filter(e=>e.isExact).length-r||t.matches.length-e.matches.length}},617520:(e,t,r)=>{r.d(t,{Cc:()=>c,lX:()=>u,lu:()=>l});var n=r(966159),i=r(38580),s=r(288706),a=r(586459);let l=(0,i.eU)((0,n.Ok)()),o=(0,i.eU)(e=>{let t=e(l);if(t.status!==a.r.SUCCESS)throw Error("FigmaScope internal code is running but no FigmaScope resources are set. This is a bug - please report in #figmascope.");return t.value}),c=(0,s.mg)(o,e=>e.primaryResource),u=(0,s.mg)(o,e=>e.diffResource)},752568:(e,t,r)=>{r.d(t,{_:()=>i,d:()=>s});class n{constructor(){this.map=new Map}has(e){return this.map.has(e)}get size(){return this.map.size}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}}class i extends n{constructor(e){if(super(),e)for(let t of e)this.add(t[0],t[1])}add(e,t){this.has(e)?this.map.get(e).push(t):this.map.set(e,[t])}get(e){return this.map.get(e)??[]}}class s extends n{constructor(e){if(super(),e)for(let t of e)this.add(t[0],t[1])}add(e,t){this.has(e)?this.map.get(e).add(t):this.map.set(e,new Set([t]))}get(e){return this.map.get(e)??new Set}}},506563:(e,t,r)=>{r.d(t,{e:()=>n});let n="https://go/figmascope-docs"},749070:(e,t,r)=>{r.d(t,{rf:()=>a,tV:()=>l,zG:()=>s});var n=r(411855),i=r(278733);function s(){return n.createElement(l,null,n.createElement("p",null,"Reading file..."))}function a({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),n.createElement(l,null,n.createElement("p",{style:i.sx.colorTextOndanger.colorBgDanger.p16.font20.$},t))}function l({children:e}){return n.createElement("div",{style:i.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$},e)}},796832:(e,t,r)=>{r.d(t,{J:()=>rU});var n=r(411855),i=r(723215),s=r(776250),a=r(189430),l=r(374626),o=r(646240),c=r(498750),u=r(586459),d=r(470504),h=r(278733),m=r(175290),g=r(809840),p=r(841563),f=r.n(p),y=r(38580),E=r(617520),I=r(188507),b=r(44948),v=r(738269),S=r(356390),C=r(611978),T=r(640855),N=r(799507),D=r(645337),P=(e=>(e.Position="Position",e.Name="Name",e.Memory="Memory",e.NodeId="Node ID",e))(P||{});let x=(0,l.E3)("figmascope-settings",{followSelection:!1,sortOrder:"Position",middlePanelExpandedProperties:{},middlePanelPinnedProperties:{},rightPanelExpandedProperties:{},rightPanelPinnedProperties:{}}),{valueAtom:O,undoAtom:_,redoAtom:A,historyAtom:B}=(0,l.xP)(T.SW.fromString("0:0")),w=(0,y.eU)(e=>{let t=e(E.Cc),r=e(O);return t.getObject(r)}),L=(0,y.eU)(e=>e(x).followSelection,(e,t,r)=>t(x,e=>({...e,followSelection:r})));function F({children:e,appSelection:t,setAppSelection:r}){let i=(0,l.md)(E.Cc);return r&&i instanceof D.G2?n.createElement(V,{resource:i,appSelection:t,setAppSelection:r},e):n.createElement(n.Fragment,null,e,n.createElement(R,null))}function R(){let e=(0,I.wA)(),t=(0,C._6)(),[r,i]=(0,l.fp)(O),s=n.useRef(!0);return n.useEffect(()=>{(0,N.E)(t)&&(s.current?(s.current=!1,t.selection&&i(T.SW.fromString(t.selection))):r!==t.selection&&e(v.$T({...t,selection:r})))},[t,r,i,e]),null}let k=n.createContext({selectInApp:void 0,canSelectInApp:void 0});function V({resource:e,appSelection:t,setAppSelection:r,children:i}){let s=e.scene,a=(0,l.md)(L),[o,c]=(0,l.fp)(O),u=n.useCallback(e=>{let t=s.getNodeByGuid(T.c1.fromString(e));t&&c(t.id)},[c,s]);n.useEffect(()=>{S.Y5.setFigmascopeSelectedGuidCallback(u)},[u]);let d=o?s.getNodeById(o):null,h=(0,b.k9)(()=>d?M(d):null,[d]);n.useEffect(()=>{a&&r&&h&&r(h)},[a,r,h]),n.useEffect(()=>{a&&t?.guid&&u(t.guid)},[a,t?.guid,u]);let m=n.useMemo(()=>({canSelectInApp:e=>!!M(e),selectInApp:e=>{let t=M(e);t&&r(t)}}),[r]);return n.createElement(k.Provider,{value:m},i)}function M(e){if(!e.isInternalOnly)return{selectionType:"canvas",guid:e.guid};if(e.isStyle&&e.isLocalAsset){let t=e.nodeChange.styleType;if(t)return{selectionType:"local_style",guid:e.guid,styleType:t}}return null}var G=(e=>(e.None="No Diff",e.Layer="Layer Diff",e.Tree="Tree Diff",e.Full="Full Diff",e))(G||{});function $(e){return"Layer Diff"===e?"layer":"tree"}let U=(0,l.FZ)((0,y.eU)(null),(e,t,r)=>{let n,i;let a=new Date;if("clear"===t.type)return e&&s.az.trackDefinedEvent("figmascope.diff_end",{type:$(e.type),duration_seconds:(a.getTime()-e.time.getTime())/1e3}),null;if("start"===t.type?(n=t.id,i=t.diffType):"refresh"===t.type&&e&&(n=e.object.id,i=e.type),!n||!i)return null;let l=r(E.Cc).getObject(n)?.freeze();return l?(s.az.trackDefinedEvent("figmascope.diff_start",{type:$(i)}),{type:i,object:l,time:new Date}):null}),j=(0,y.eU)(e=>{let t=e(E.lX);return t?{type:"Full Diff",resource:t}:e(U)??{type:"No Diff"}}),H=(0,y.eU)(e=>{let t=e(O),r=e(j);switch(r.type){case"Layer Diff":return r.object;case"Tree Diff":return r.object.findDescendant(e=>e.id===t,{includeSelf:!0})??null;case"Full Diff":for(let e of r.resource.rootObjects){let r=e.findDescendant(e=>e.id===t,{includeSelf:!0});if(r)return r}return null;default:return null}});function Y(e,t,r=!1){return!e&&t?"REMOVED":!t&&e?"CREATED":e?.value&&t?.value&&(e.value.type!==t.value.type||!f()(e.value.value,t.value.value))?"MODIFIED":r?"CHILD_MODIFIED":void 0}var K=r(966159),W=r(27087),z=r(752568),X=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(X||{});let J=(0,y.eU)(e=>{let t=e(C.OC);return"fullscreen"===t.view?`/api/file/scenegraph_validations/${t.fileKey}`:(0,N.E)(t)&&t.urlParams?.type==="server_file"?`/api/admin/scenegraph_validations/${t.urlParams.key}`:null}),Q=(0,y.eU)(e=>null!=e(J)),q=(()=>{let e=(0,y.eU)((0,K.Ok)());return(0,y.eU)(t=>t(e),async(t,r)=>{let n;if(t(e).status===u.r.LOADING)return;let i=t(J);if(i){r(e,(0,K.ux)());try{n=await Z(i)}catch(t){r(e,(0,K.uW)(t));return}r(e,(0,K.NY)(n))}})})();async function Z(e){let t=await (0,W.GD)(e),r=new z._;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)r.add(t.guid,t.message);return r}var ee=r(749070),et=r(457473),er=r(806247),en=r(459401),ei=r(587670),es=r(461816),ea=r.n(es);function el(e,t,r){let n={...e},i=!1;for(let e of t)i=i||n[e]!==r,n[e]=r;return i?n:e}function eo(e,t){let r={...e},n=!1;for(let e of t)n=n||e in r,delete r[e];return n?r:e}var ec=(e=>(e[e.No=0]="No",e[e.Yes=1]="Yes",e))(ec||{});function eu(e,t,r,n=1){let i=[t,...r];return e[t]?n?eo(e,i):el(e,i,!1):el(e,i,!0)}function ed(e){return function(e=1,t=(0,y.eU)({})){return(0,y.eU)(e=>e(t),(r,n,i,s)=>{n(t,eu(r(t),i,s??[],e))})}(0,(0,y.eU)(t=>t(x)[e]??{},(t,r,n)=>r(x,t=>({...t,[e]:n}))))}let eh=ed("middlePanelExpandedProperties"),em=ed("middlePanelPinnedProperties"),eg=ed("rightPanelExpandedProperties"),ep=ed("rightPanelPinnedProperties");function ef(e,t,r){return[...e.getObject(r)?.mapDescendants(e=>e.id)??[],...t?.getObject(r)?.mapDescendants(e=>e.id)??[]]}let ey=(0,l.FZ)((0,y.eU)({}),(e,t,r)=>{let n=r(E.Cc),i=r(E.lX);switch(t.type){case"toggleExpanded":return eu(e,t.objectId,t.toggleSubtree?ef(n,i,t.objectId):[]);case"expandAncestors":return el(e,function(e,t,r){return[...e.getObject(r)?.mapAncestors(e=>e.id)??[],...t?.getObject(r)?.mapAncestors(e=>e.id)??[]]}(n,i,t.objectId),!0);case"expandDescendants":return el(e,[t.objectId,...ef(n,i,t.objectId)],!0);case"collapseDescendants":return eo(e,[t.objectId,...ef(n,i,t.objectId)])}}),eE=(0,y.eU)(e=>e(x).sortOrder,(e,t,r)=>t(x,e=>({...e,sortOrder:r}))),eI=(0,y.eU)(e=>{let t=[P.Position,P.Name,P.NodeId];return e(E.Cc).rootObjects[0]?.displayProperties.memoryFraction!=null&&t.push(P.Memory),t.sort(),t}),eb=(0,y.eU)(e=>{switch(e(eE)){case P.Position:return eS;case P.Name:return ev;case P.Memory:return eT;case P.NodeId:return eC}});function ev(e,t){return e.displayProperties.name.localeCompare(t.displayProperties.name)}function eS(e,t){let[r,n]=eN(e,t);if(r&&n){let e=r.parentIndex?.position,t=n.parentIndex?.position;if(null==e&&null==t)return 0;if(null==t)return 1;if(null==e)return -1;if(e<t)return -1;else if(e>t)return 1}return ev(e,t)}function eC(e,t){let[r,n]=eN(e,t);if(r&&n){let{sessionID:e,localID:t}=r.guid??{localID:-1,sessionID:-1},{sessionID:i,localID:s}=n.guid??{localID:-1,sessionID:-1};return e-i||t-s}return eS(e,t)}function eT(e,t){return(t.displayProperties.memoryFraction??0)-(e.displayProperties.memoryFraction??0)||eS(e,t)}function eN(e,t){return"nodeChange"in e&&"nodeChange"in t?[e.nodeChange,t.nodeChange]:[null,null]}var eD=r(331221),eP=r(397565);function ex({badges:e}){return n.createElement(m.Y,{width:"hug-contents"},e.map((e,t)=>n.createElement(eO,{key:t,badge:e})))}function eO({badge:e}){switch(e.type){case"type":return n.createElement(e$,{type:e.value});case"phase":return n.createElement(eK,{phase:e.value});case"change":return n.createElement(ej,{type:e.value});default:return n.createElement(ez,{...e})}}let e_=d.cx.px4.minW10.inlineBlock.bRadius4.h16.flex.alignCenter.justifyCenter.fontSemiBold,eA=e_.colorBgSecondary.colorText.$,eB=e_.colorBgBrandSecondary.colorTextOnbrand.$,ew=e_.colorBgBrand.colorTextOnbrand.$,eL=e_.colorBgSuccess.colorTextOnsuccess.$,eF=e_.colorBgWarning.colorTextOnwarning.$,eR=e_.colorBgDanger.colorTextOndanger.$,ek=e_.minW28.w28.colorBg.b1.h14,eV={[eP.SP.Editor]:ek.colorBorderDesign.colorTextDesignSecondary.$,[eP.SP.DesignSystems]:ek.colorBorderComponent.colorTextComponent.$,[eP.SP.FigJam]:ek.colorBorderFigjam.colorBorderFigjam.$,[eP.SP.Page]:ek.colorBorder.colorText.$,[eP.SP.Other]:ek.colorBorderSuccess.colorTextSuccessSecondary.$},eM={fontSize:9,lineHeight:"16px",fontStyle:"normal"},eG={fontSize:9,lineHeight:"14px",fontStyle:"normal"};function e$({type:e}){return n.createElement("div",{title:e,className:eV[(0,eP.p7)(e)],style:eG},eP.uy[e])}let eU={CREATED:eL,MODIFIED:eB,CHILD_MODIFIED:ew,REMOVED:eR};function ej({type:e}){return n.createElement("div",{title:e,className:eU[e],style:eM},eD.x[e])}let eH=e_.minW24.w24.colorBg.b1.h14,eY={CREATED:eH.colorBorderSuccess.colorTextSuccessSecondary.$,MODIFIED:eH.colorBorderBrand.colorTextBrandSecondary.$,REMOVED:eH.colorBorderDanger.colorTextDangerSecondary.$};function eK({phase:e}){return n.createElement("div",{title:e,className:eY[e],style:eG},eD.z[e])}let eW={info:eA,warning:eF,error:eR};function ez({type:e,value:t,title:r}){return n.createElement("div",{title:r,className:eW[e],style:eM},t)}var eX=r(566418),eJ=r(629019),eQ=r.n(eJ),eq=r(686759);let eZ="badge_display--canUnderline--aufN5";function e0({id:e}){let t=(0,l.md)(E.Cc),r=(0,l.md)(E.lX),i=t.getObject(e)??r?.getObject(e)??null;return n.createElement(tt,{target:i,text:e,errorIfMissing:!0})}function e1({guid:e,scene:t}){let r=t.getNodeByGuid(e);return n.createElement(tt,{target:r,errorIfMissing:t.isComplete,text:T.c1.format(e)})}function e5({styleId:e,scene:t}){let r=t.getStyleByStyleId(e);return n.createElement(tt,{target:r,errorIfMissing:t.isComplete,text:(0,T.r4)(e,eX.PK),fullText:eX.PK.toString(e)})}function e6({variableId:e,scene:t}){let r=t.getVariableByVariableId(e);return n.createElement(tt,{target:r,errorIfMissing:t.isComplete,text:(0,T.r4)(e,eX.sD),fullText:eX.sD.toString(e)})}function e7({variableCollectionId:e,scene:t}){let r=t.getVariableCollectionByCollectionId(e);return n.createElement(tt,{target:r,errorIfMissing:t.isComplete,text:(0,T.r4)(e,eX.gr),fullText:eX.gr.toString(e)})}function e4({id:e,secondary:t}){return n.createElement(tr,{colorStyle:t?2:1,text:e,isValid:!0})}function e8({guid:e}){return n.createElement(tr,{colorStyle:1,text:T.c1.format(e),isValid:T.c1.isValid(e)})}function e3({guidPath:e}){return n.createElement(tr,{colorStyle:1,text:T.dB.format(e),isValid:T.dB.isValid(e)})}var e2=(e=>(e[e.Invalid=0]="Invalid",e[e.Normal=1]="Normal",e[e.Seconary=2]="Seconary",e[e.Link=3]="Link",e))(e2||{});let e9=d.cx.inlineBlock,te={0:e9.colorTextDanger.$,1:e9.colorText.fontSemiBold.$,2:e9.colorTextSecondary.$,3:e9.colorTextFigjam.fontSemiBold.$};function tt({target:e,text:t,errorIfMissing:r,fullText:i}){let s=(0,o.Xr)(O);return null==e?n.createElement(tr,{colorStyle:r?0:3,text:t,copyOnClickText:i,isValid:!1}):n.createElement("span",{role:"button",className:eQ()(d.cx.inlineBlock.$,"badge_display--guidLink--3Avjv"),onClick:()=>s(e.id)},n.createElement(m.Y,{spacing:4},n.createElement(ex,{badges:e.displayProperties.leftBadges}),n.createElement("span",{className:eQ()(te[3],eZ)},t),n.createElement("span",{className:eQ()(te[3],eZ,d.cx.fontNormal.$)},e.displayProperties.name)))}function tr({colorStyle:e,text:t,copyOnClickText:r,isValid:i}){let s=te[i?e:0];return null==r?n.createElement("span",{className:s},t):n.createElement("span",{className:s,role:"button",onClick:()=>{(0,eq.Dk)(r).then(()=>window.alert(`Copied ${r} to clipboard`)).catch(()=>window.alert(r))}},t)}var tn=r(602126),ti=r(268537),ts=r(939863),ta=r(885456);let tl=ti.ms,to=ti.c$,tc=ti.wv;function tu({contextMenuData:{objectId:e,position:t},onClose:r}){let{canSelectInApp:i,selectInApp:s}=n.useContext(k),a=n.useRef(null);(0,tn.ww)(a,r);let c=(0,l.md)(E.Cc).getObject(e),u=c instanceof ta.E?c:null,[d,m]=(0,l.fp)(U),g=(0,o.Xr)(ey);if(null==c)return null;let p=e=>()=>{e(),r()},f=c.children.length>0,y=(()=>{if(i?.(c))return p(()=>s(c))})(),I=u&&(u.isInternalOnly||"DOCUMENT"===u.nodeType||"CANVAS"===u.nodeType),b=e=>p(()=>ei.glU.triggerAction(e,{guid:c.id})),v=d?.object.id===c.id;return n.createElement(tl,{style:{...h.sx.fixed.$,...t}},n.createElement("div",{ref:a},y&&n.createElement(to,{onClick:y},"Jump to node"),f&&n.createElement(to,{onClick:p(()=>g({type:"expandDescendants",objectId:e}))},"Expand descendants"),f&&n.createElement(to,{onClick:p(()=>g({type:"collapseDescendants",objectId:e}))},"Collapse descendants"),(y||f)&&n.createElement(tc,null),v&&n.createElement(to,{onClick:p(()=>m({type:"clear"}))},"Stop diffing against this node"),(!v||d?.type!==G.Layer)&&n.createElement(to,{onClick:p(()=>m({type:"start",diffType:G.Layer,id:e}))},"Layer diff against this node"),(!v||d?.type!==G.Tree)&&n.createElement(to,{onClick:p(()=>m({type:"start",diffType:G.Tree,id:e}))},"Tree diff against this node"),!I&&n.createElement(tc,null),!I&&y&&u&&"DOCUMENT"!==u.type&&"CANVAS"!==u.type&&n.createElement(to,{onClick:b("debug-print-as-test-code")},(0,ts.tx)("fullscreen_actions.debug-print-as-test-code")),!I&&y&&u&&"VECTOR"===u.type&&n.createElement(to,{onClick:b("debug-print-vector-network-as-test-code")},(0,ts.tx)("fullscreen_actions.debug-print-vector-network-as-test-code"))))}var td=r(358145),th=r(723325),tm=r(904794);let tg=n.createContext(()=>!1);function tp({children:e,className:t,style:r}){let i=n.useRef(null),s=n.useCallback(()=>!!i.current?.contains(document.activeElement),[]);return n.createElement(th.dP,{ref:i,className:t,style:r,allowVim:!0},n.createElement(tg.Provider,{value:s},e))}let tf="tree_row--expansionToggle--mYjsb";function ty({children:e,changeType:t,isExpanded:r,isLeaf:i,isPinned:s,isSelected:a,isChanging:l,indent:o,style:c,keyboardNavigationPath:u,toggleExpanded:d,togglePinned:h,select:m,onContextMenu:g,onMouseEnter:p,onMouseLeave:f}){let{setKeyboardNavigationElement:y,keyboardNavigationItem:E,isFocused:I}=(0,th.M3)({path:u}),b=n.useContext(tg),v=(0,td.ZC)(a);n.useEffect(()=>{!v&&a&&!I&&b()&&E?.focus()},[I,v,a,E,b]);let S=n.useRef(!1),C=n.useCallback(e=>e.target instanceof Element&&"BUTTON"===e.target.tagName,[]),T=n.useCallback(e=>!!(e.target instanceof Element&&(e.target.classList.contains(tf)||e.target.parentElement?.classList.contains(tf))),[]);return n.createElement("button",{ref:y,style:c,className:eQ()("tree_row--treeItem--6gIYH",{"tree_row--selected--url1U":a||I,"tree_row--changing--E9CSm":l}),onFocus:m,onMouseDown:e=>{(C(e)||T(e))&&e.detail>1&&e.preventDefault(),T(e)?S.current=e.detail>1:S.current=!0},onClick:e=>{S.current?S.current=!1:d(e.metaKey||e.altKey),e.currentTarget.focus()},onMouseEnter:p,onMouseLeave:f,onDoubleClick:e=>{T(e)||d(e.metaKey)},onKeyDown:e=>{(r&&(0,th.yn)(e.code,!0)||!r&&(0,th.lv)(e.code,!0))&&d(e.metaKey)},onContextMenu:g},n.createElement(tm.Y,null,n.createElement(tE,{indent:o,isLeaf:i,isExpanded:r}),e,h&&n.createElement(tI,{isPinned:!!s,togglePinned:h}),t&&n.createElement(ej,{type:t})))}function tE({indent:e,isLeaf:t,isExpanded:r}){return n.createElement("div",{className:eQ()(tf,!t&&"tree_row--clickable--ttIc9"),style:{paddingLeft:14*e,width:14,minHeight:14}},n.createElement("span",null,t?"":r?"\u25BC":"\u25B6"))}function tI({isPinned:e,togglePinned:t}){return n.createElement("span",{onClick:t,className:e?"tree_row--unpinToggle--CU4-x tree_row--_pinToggleBase--W1djM":"tree_row--pinToggle--wbULT tree_row--_pinToggleBase--W1djM"},e?"Unpin":"Pin")}let tb=n.memo(function({diffType:e,id:t,primaryId:r,secondaryId:i,leftBadges:s,indent:a,index:l,isExpanded:o,isLeaf:c,isSelected:u,memoryFraction:h,rightBadges:g,additionalBadges:p,name:f,style:y,select:E,toggle:I,showContextMenu:b}){let v=n.useCallback(e=>{e.preventDefault(),b({objectId:t,position:{left:e.clientX,top:e.clientY}})},[t,b]);return n.createElement(ty,{changeType:e,keyboardNavigationPath:[l],isSelected:u,isLeaf:c,isExpanded:o,indent:a,style:y,select:()=>E(t),toggleExpanded:e=>I(t,e),onContextMenu:v,onMouseEnter:()=>{ei.Ez5&&ei.Ez5.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{ei.Ez5&&ei.Ez5.editorState().figmaScopeHighlightedNode.set("")}},n.createElement(ex,{badges:s}),n.createElement(e4,{id:r}),i&&n.createElement(e4,{id:i,secondary:!0}),n.createElement("div",{title:f,className:d.cx.ellipsis.noWrap.overflowHidden.$},f),n.createElement(m.M,null),n.createElement(ex,{badges:g}),p&&n.createElement(ex,{badges:p}),null!=h&&n.createElement("span",{className:d.cx.colorTextSecondary.$,title:"Node memory usage"},(100*h).toFixed(3),"%"))});function tv({style:e,data:{displayedObjects:t,selectedId:r,...i},index:s}){let a=t[s],l=(0,b.zN)(e);return n.createElement(tb,{...a,...i,isSelected:r===a.id,style:l,index:s})}function tS(){let e=(0,l.md)(tC),[t,r]=(0,l.fp)(O),[i,s]=n.useState(null),a=n.useRef(null);n.useEffect(()=>{let r=e.findIndex(e=>e.id===t);r>=0&&a.current?.scrollToItem(r,"smart")},[e,t]);let c=(0,o.Xr)(ey);n.useEffect(()=>{c({type:"expandAncestors",objectId:t})},[c,t]);let u=n.useCallback((e,t)=>{c({type:"toggleExpanded",objectId:e,toggleSubtree:t})},[c]);return 0===e.length?n.createElement("div",null,"Empty Scene"):n.createElement(n.Fragment,null,n.createElement(et.A,{disableWidth:!0},({height:i})=>n.createElement(er.Y1,{itemSize:18,itemCount:e.length,height:i,ref:a,itemData:{displayedObjects:e,selectedId:t,select:r,toggle:u,showContextMenu:s},width:"100%"},tv)),i&&n.createElement(tu,{contextMenuData:i,onClose:()=>{s(null)}}))}let tC=(0,y.eU)(e=>{let t=e(E.Cc),r=t.rootObjects,n=e(j),i=e(ey),s=e(eb),a=(()=>{switch(n.type){case G.Tree:return[n.object];case G.Full:return n.resource.rootObjects;default:return[]}})(),l={resource:t,sortFn:s,expandedIds:i};return ea()(r,e=>{if(!e)return[];if(0===a.length)return tT(e,0,l);let t=tD(e,a);return t?tN(e,t,0,l):function e(t,r,n,i){let s=t.id,a=t.children,l=0===a.length,o=!!i.expandedIds[s],c=!1,u=ea()(a,t=>{let s=(()=>{let s=tD(t,r);if(s)return tN(t,s,n+1,i);let a=r.filter(e=>e.someAncestor(e=>e.id===t.id,{includeSelf:!0}));return a.length>0?e(t,a,n+1,i):tT(t,n+1,i)})();return c=c||s[0]?.diffType!=null,s}),d={...t.displayProperties,diffType:c?"CHILD_MODIFIED":void 0,additionalBadges:i.resource.getAdditionalBadges?.(s)??[],id:s,indent:n,isExpanded:o,isLeaf:l};return o?[d,...u]:[d]}(e,a,0,l)})});function tT(e,t,r){let n=e.id,i=e.children,s=0===i.length,a=!!r.expandedIds[n],l={...e.displayProperties,diffType:void 0,additionalBadges:r.resource.getAdditionalBadges?.(n)??[],id:n,indent:t,isExpanded:a,isLeaf:s};return a?[l,...ea()(tP(i,r.sortFn),e=>tT(e,t+1,r))]:[l]}function tN(e,t,r,n){let i=e??t;if(!i)throw Error("Diffing two nothings");if(e&&t&&e.id!==t.id)throw Error("Diffing nodes with mismatched keys");let s=i.id,a=tP(e?.children??[],n.sortFn),l=tP(t?.children??[],n.sortFn),o=(0,en.mergeArrays)(a,l,e=>e.id),c=!1,u=ea()(o,({left:e,right:t})=>{let i=tN(e,t,r+1,n);return c=c||i[0]?.diffType!=null,i}),d=function(e,t,r=!1){if(!e)return"REMOVED";if(!t)return"CREATED";let n=e.rawProperties,i=t.rawProperties;if(n.length!==i.length)return"MODIFIED";for(let e=0;e<n.length;e++)if(void 0!==function e(t,r){let n=Y(t,r);if(void 0!==n)return n;let i=t.children,s=r.children;if(i.length!==s.length)return"CHILD_MODIFIED";for(let t=0;t<i.length;t++)if(void 0!==e(i[t],s[t]))return"CHILD_MODIFIED"}(n[e],i[e]))return"MODIFIED";return r?"CHILD_MODIFIED":void 0}(e,t,c),h=e?.displayProperties.name,m=t?.displayProperties.name,g=null!=h&&null!=m&&h!==m?`${h} <=> ${m}`:i.displayProperties.name,p=!!n.expandedIds[s],f={...i.displayProperties,diffType:d,additionalBadges:n.resource.getAdditionalBadges?.(s)??[],id:s,indent:r,isExpanded:p,isLeaf:0===o.length,name:g};return p?[f,...u]:[f]}function tD(e,t){return t.find(t=>t.id===e.id)}function tP(e,t){return e.slice().sort(t)}var tx=r(865618),tO=r(752795),t_=r(297666),tA=r(875917);function tB({searchRef:e}){let t=(0,l.md)(E.Cc),r=(0,o.Xr)(O),i=(0,l.md)(B),s=n.useMemo(()=>i.map(e=>t.getObject(e)).filter(tO.isNotNullish).map(e=>({object:e,matches:[]})).reverse(),[t,i]),{searchState:a,requestSearch:c,clearSearchResults:u,showRecentSelections:h,indexingCount:m}=function(e,t){let[r,i]=n.useState({status:"initial"}),s=n.useRef(0),[a,l]=n.useState(0),o=n.useMemo(()=>(0,t_.s)(t=>{let r=++s.current,n=new TaskController({priority:"user-visible"});scheduler.postTask(()=>i({status:"indexing"}),{signal:n.signal,delay:300}).catch(()=>{}),e.getSearch(l).then(e=>e.searchWithText(t)).then(e=>{n.abort(),r===s.current&&i({status:"success",results:e})}).catch(e=>{n.abort(),r===s.current&&i({status:"failure",error:e})})}),[e]),c=n.useCallback(()=>i({status:"initial"}),[]),u=n.useCallback(()=>i({status:"recent",results:t}),[t]);return{searchState:r,requestSearch:n.useCallback(e=>{c(),o(e)},[c,o]),showRecentSelections:u,clearSearchResults:c,indexingCount:a}}(t,s),g=n.useRef(null);(0,tn.ww)(g,u);let p=n.useCallback(e=>{u(),r(e.object.id)},[u,r]);return n.createElement(th.dP,{className:d.cx.flex1.$,ref:g,allowVim:!0},n.createElement(tw,{searchRef:e,requestSearch:c,showRecentSelections:h}),"initial"!==a.status&&n.createElement(tL,{searchState:a,selectResult:p,indexingCount:m,sensitiveTextPolicy:t.sensitiveTextPolicy}))}function tw({searchRef:e,requestSearch:t,showRecentSelections:r}){let{setKeyboardNavigationElement:i}=(0,th.M3)({path:[0,0],id:"input"}),s=e=>{let n=e.target.value;n?t(n):r()};return n.createElement("input",{ref:t=>{i(t),e.current=t},type:"text",placeholder:"Search",className:"search_bar--searchBar--qnpUm",onFocus:s,onChange:s})}function tL({searchState:e,selectResult:t,indexingCount:r,sensitiveTextPolicy:i}){return n.createElement("div",{className:d.cx.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"}},"indexing"===e.status&&n.createElement(tF,{text:`Indexing search results (this may take a moment)... ${r?`[${r}/???]`:""}`}),"failure"===e.status&&n.createElement(tF,{text:`Error: ${e.error}.`}),"recent"===e.status&&e.results.map((e,r)=>n.createElement(tR,{key:r,result:e,index:r,onClick:()=>t(e)})),"success"===e.status&&(0===e.results.length?n.createElement(tF,{text:["No results.","With view-only permissions, nodes are not loaded until their page is opened.","show"===i?"":"Searching by name or text is disabled because text is being redacted."]}):e.results.map((e,r)=>n.createElement(tR,{key:r,result:e,index:r,onClick:()=>t(e)}))))}function tF({text:e}){return n.createElement(n.Fragment,null,(Array.isArray(e)?e:[e]).map((e,t)=>n.createElement("div",{key:t,className:d.cx.colorBg.colorTextSecondary.px8.py4.$},e)))}function tR({result:e,index:t,onClick:r}){let{object:i,matches:s}=e,{displayProperties:a}=i,{setKeyboardNavigationElement:l,keyboardNavigationItem:o,isFauxFocused:c}=(0,th.M3)({path:[1,t],id:i.id});return n.useEffect(()=>{o&&0===t&&o.fauxFocus()},[o,t]),n.createElement("button",{ref:l,className:eQ()(d.cx.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"search_bar--searchResult--0iOvc",c&&"search_bar--fauxFocus--BYHwu"),onClick:r},n.createElement(m.Y,{spacing:4},n.createElement(ex,{badges:a.leftBadges}),n.createElement(e4,{id:i.displayProperties.primaryId}),n.createElement(tA.R,{className:d.cx.overflowHidden.$,text:a.name}),n.createElement(m.M,null),s.filter(({property:e})=>!["id","guid","name","type","phase"].includes(e)).map(({property:e,value:t},r)=>n.createElement(m.Y,{key:r,spacing:4,width:"hug-contents"},n.createElement("div",null,e,":"),n.createElement("div",null,t)))))}var tk=r(163023);function tV({children:e}){return n.createElement("div",{className:d.cx.colorBorder.px8.py4.bb1.bSolid.$},n.createElement(m.Y,null,e))}function tM(e){let t={className:"toolbar_components--iconButton--1-XNe",children:n.createElement(tk.B,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?n.createElement("a",{...t,href:e.href,target:"blank"}):n.createElement("button",{...t,onClick:e.onClick,disabled:e.disabled})}var tG=r(444890),t$=r(816679),tU=r(167198),tj=r(247866);function tH({searchRef:e}){let t=(0,l.md)(Q),[r,i]=(0,l.fp)(_),[a,o]=(0,l.fp)(A),c=!!n.useContext(k).selectInApp,[u,d]=(0,l.fp)(L),[h,m]=(0,l.fp)(eE),g=(0,l.md)(eI);return n.createElement(tV,null,n.createElement(tB,{searchRef:e}),n.createElement("select",{name:"sort",title:"Sets the left panel sort order",onChange:e=>{let t=e.target.value;s.az.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case P.Position:return"position";case P.Name:return"name";case P.Memory:return"memory";case P.NodeId:return"node_id"}}(t)}),m(t)},defaultValue:h},g.map(e=>n.createElement("option",{key:e,value:e},e))),n.createElement(tM,{label:"Select Previous",onClick:()=>{i(),s.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!r,svg:tG.A}),n.createElement(tM,{label:"Select Next",onClick:()=>{o(),s.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!a,svg:t$.A}),c&&n.createElement(tx.S,{label:"Follow selection",checked:u,onChange:e=>{d(e.currentTarget.checked)}}),t&&n.createElement(tY,null))}function tY(){let[e,t]=(0,l.fp)(q),r=e.status===u.r.LOADING;return n.useEffect(()=>{t()},[t]),n.createElement(tM,{label:r?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:r?tU.A:tj.A})}var tK=r(91408),tW=r(837746);let tz=(0,tK.jz)(tW.HJx),tX=(0,tK.jz)(tW.EJM),tJ=new WeakMap;function tQ(e){let t=tJ.get(e);if(void 0!==t)return t;let[r,n]=ei.Vzr.generateThumbnailForNode(T.c1.fromKiwi(e),4*tX,4*tz,4,{forceContentsOnly:!0,isDetatchedComponentScene:!1});if(!n||0===n.length||!r)return tJ.set(e,null),null;let{width:i,height:s}=r,a={url:URL.createObjectURL(new Blob([n])),renderWidth:i/4,renderHeight:s/4};return tJ.set(e,a),a}var tq=r(634832),tZ=r(364898),t0=r(428654),t1=r(2685),t5=r(40963),t6=r(275725),t7=r(620722);let t4=(0,tK.jz)(tW.HJx),t8=(0,tK.jz)(tW.EJM);function t3({thumbnailInput:e}){let t=tQ(e),r=(0,t6.c6)(T.c1.fromKiwi(e));return t?n.createElement("div",{className:d.cx.wFull.flex.flexShrink1.itemsCenter.justifyCenter.$,style:r},n.createElement(t7.J,{className:"node_thumbnail_display--thumbnailPreview--9qgOD",src:t.url,width:t.renderWidth>t8?t8:t.renderWidth,height:t.renderHeight>t4?t4:t.renderHeight})):n.createElement("span",{className:d.cx.noWrap.colorTextDesign.$},"Error generating thumbnail")}function t2({value:e}){switch(e.type){case"blobIndex":return n.createElement(rm,{...e});case"userInputtedText":return n.createElement(rs,{...e});case"nonUserText":return n.createElement(ra,{...e});case"boolean":return n.createElement(ri,{...e});case"numeric":return n.createElement(rc,{...e});case"position":return n.createElement(rl,{...e});case"color":return n.createElement(ro,{...e});case"vector":return n.createElement(ru,{...e});case"matrix":return n.createElement(rd,{...e});case"objectId":return n.createElement(e0,{id:e.value});case"nodeGuid":return n.createElement(e1,{guid:e.value,scene:e.scene});case"styleId":return n.createElement(e5,{styleId:e.value,scene:e.scene});case"variableId":return n.createElement(e6,{variableId:e.value,scene:e.scene});case"variableCollectionId":return n.createElement(e7,{variableCollectionId:e.value,scene:e.scene});case"genericGuid":return n.createElement(e8,{guid:e.value});case"guidPath":return n.createElement(e3,{guidPath:e.value});case"imageHash":return n.createElement(rg,{...e});case"bytes":return n.createElement(rh,{...e});case"metadata":return n.createElement(ry,{...e});case"error":return n.createElement(rE,{...e});case"nodeThumbnail":return n.createElement(t3,{thumbnailInput:e.value});case"editScope":return n.createElement(rf,{...e});default:(0,tq.assertNever)(e)}}let t9=d.cx.noWrap,re=t9.colorTextDesign,rt=t9.colorTextSuccess,rr=t9.colorTextDanger,rn=t9.colorTextSecondary;function ri({value:e}){return n.createElement("span",{className:rt.$},e?"TRUE":"FALSE")}function rs({value:e}){let t=(0,l.md)(E.Cc),r=(0,t5.bU)(e,t.sensitiveTextPolicy);return n.createElement("span",{className:re.$},'"',r,'"')}function ra({value:e}){return n.createElement("span",{className:re.$},e)}function rl({value:e}){return n.createElement(m.Y,{width:"hug-contents"},n.createElement("span",{className:re.$},(0,tZ.PZ)(e)),n.createElement("span",{className:rn.$},"(compressed: `",e,"`)"))}function ro({value:e}){let t=t0.F.format(e);return n.createElement(m.Y,{width:"hug-contents"},n.createElement("span",{className:d.cx.inlineBlock.w12.h12.bRadius2.$,style:{backgroundColor:t}}),n.createElement("span",{className:re.$},t))}function rc({value:e}){return n.createElement("span",{className:rt.$},rI(e))}function ru({value:e}){return n.createElement("span",{className:rt.$},`<${rI(e.x||0)}, ${rI(e.y||0)}>`)}function rd({value:e}){let{m00:t,m01:r,m02:i,m10:s,m11:a,m12:l}=e;return n.createElement("span",{className:rt.$},"[",[[t,r,i],[s,a,l]].map(e=>`[${e.map(rI).join(", ")}]`).join(", "),"]")}function rh({value:e}){return n.createElement("span",{className:rt.$},rb(e))}function rm({value:e,scene:t}){let r=t.getBlobByIndex(e);return r===t1.y?n.createElement(ry,{value:`Blob ${e} :: [NOT SUPPORTED]`}):r?n.createElement("span",{className:rt.$},"Blob ",e," ::"," ","string"==typeof r?r:rb(r.bytes)):n.createElement(rE,{value:`Blob ${e} :: [MISSING]`})}function rg({value:e}){let t=rv(e,"");return n.createElement(n.Fragment,null,n.createElement("span",{className:rt.$},t),n.createElement("span",null,n.createElement(rp,{hash:t,name:"staging"})," | ",n.createElement(rp,{hash:t,name:"prod"})))}function rp({hash:e,name:t}){return n.createElement("a",{href:`https://${"staging"===t?"staging-":""}admin.figma.com/admin/image/${e}`},t)}function rf({value:e}){return n.createElement(m.Y,{width:"hug-contents"},n.createElement("span",{className:rt.$},e.type),n.createElement("span",{className:re.$},e.label),e.editorType&&n.createElement("span",{title:"The editor type active when this scope was opened",className:rn.$},"(",e.editorType.toLowerCase(),")"))}function ry({value:e}){return n.createElement("span",{className:rn.$},"(",e,")")}function rE({value:e}){return n.createElement("span",{className:rr.$},e)}function rI(e){return"bigint"==typeof e||e%1==0?e.toString():e.toFixed(4)}function rb(e){return`binary[${e.length}] = ${rv(e," ")}`}function rv(e,t){let r="";for(let n=0;n<e.length;++n){if(n>=30){r+="...";break}r+=function(e){let t=e.toString(16);return 1===t.length?"0"+t:t}(e[n])+t}return r}let rS=(0,tK.jz)(tW.hVg),rC=(0,tK.jz)(tW.k$X),rT=n.memo(function({panel:e,items:t,diffItems:r,extraItems:i}){let[s,a]=(0,l.fp)("middle"===e?eh:eg),[o,c]=(0,l.fp)("middle"===e?em:ep),u=n.useMemo(()=>{let e=[];for(let t of i??[])e=e.concat(rB(t,0,void 0,s,o));let n=r_(t??[],void 0,o),a=null!=r,l=r_(r??[],void 0,o);for(let t of(0,en.mergeArrays)(n,l,e=>rx(e,void 0)))e=a?e.concat(rw(t.left,t.right,0,void 0,s,o)):e.concat(rB(t.left??t.right,0,void 0,s,o));return e},[t,r,i,s,o]),d=n.createRef();function h(e){if(void 0!==u[e]){let t=u[e].value;if(t&&"nodeThumbnail"===t.type){let e=tQ(t.value);if(e)return e.renderHeight+rC}}return rS}return n.useEffect(()=>{d.current?.resetAfterIndex(0)},[d,u]),n.createElement(et.A,{disableWidth:!0},({height:t})=>n.createElement(er._m,{ref:d,itemSize:h,itemCount:u.length,height:t,itemKey:e=>u[e].expansionKey,itemData:{panel:e,displayedProperties:u,togglePropertyExpanded:a,togglePropertyPinned:c},width:"100%"},rN))});function rN({style:e,index:t,data:{panel:r,displayedProperties:i,togglePropertyExpanded:s,togglePropertyPinned:a}}){let l=i[t],o=(0,td.ZC)(l),[c,u]=n.useState(!1),d=n.useRef(void 0);n.useEffect(()=>{o&&null!=Y(o,l)&&(clearTimeout(d.current),u(!0),d.current=setTimeout(()=>u(!1),250))},[l,o]),n.useEffect(()=>()=>clearTimeout(d.current),[]);let h=(0,b.zN)(e);return n.createElement(rP,{...l,style:h,isChanging:c,panel:r,index:t,togglePropertyExpanded:s,togglePropertyPinned:a})}let rD=n.memo(function({diffValue:e,value:t}){return n.createElement(m.Y,{width:"hug-contents"},null!=e&&n.createElement(t2,{value:e}),null!=e&&n.createElement("span",null,"\u21E8"),null!=t&&n.createElement(t2,{value:t}))}),rP=n.memo(function({childExpansionKeys:e,expansionKey:t,indent:r,isExpanded:i,isChanging:a,isPinned:l,isLeaf:o,isImage:c,label:u,index:h,style:g,value:p,diffValue:f,diffType:y,panel:E,togglePropertyExpanded:I,togglePropertyPinned:b}){return n.createElement(ty,{keyboardNavigationPath:[h],isLeaf:o,isExpanded:i,isChanging:a,indent:c?0:r,style:c?{...g,height:"fit-content",width:"100%",alignItems:"flex-start"}:g,toggleExpanded:r=>{i||s.az.trackDefinedEvent("figmascope.expand_row",{field:u,panel:E}),I(t,r?e:[])},isPinned:l,togglePinned:c?void 0:()=>{l||s.az.trackDefinedEvent("figmascope.pin_row",{field:u,panel:E}),b(t)},changeType:y},c?n.createElement(rD,{diffValue:f,value:p}):n.createElement(n.Fragment,null,n.createElement("span",{className:d.cx.colorText.$},u),n.createElement("div",{className:d.cx.ellipsis.noWrap.overflowHidden.alignCenter.$},n.createElement(rD,{diffValue:f,value:p}))),n.createElement(m.M,null))}),rx=(e,t)=>{let r=e.key??e.label;return t?[t,r].join("."):r},rO=(e,t)=>!!t[e],r_=(e,t,r)=>[...e.filter(e=>rO(rx(e,t),r)),...e.filter(e=>!rO(rx(e,t),r))],rA=(e,t,r,n)=>{if(e)return!1;let i=n[t];return null!=i?i:r??!1},rB=(e,t,r,n,i)=>{let s=rx(e,r),a=0===e.children.length,l=e.value?.type==="nodeThumbnail",o=rA(a,s,e.expandByDefault,n),c=ea()(r_(e.children??[],s,i),e=>rB(e,t+1,s,n,i)),u={label:e.label,value:e.value,isExpanded:o,isLeaf:a,isImage:l,indent:t,expansionKey:s,childExpansionKeys:ea()(c,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rO(s,i)};return o?[u,...c]:[u]},rw=(e,t,r,n,i,s)=>{let a=e??t;if(!a)throw Error("Nothing to diff");if(e&&t&&rx(e,n)!==rx(t,n))throw Error("Mismatched keys");let l=rx(a,n),o=r_(e?.children??[],l,s),c=r_(t?.children??[],l,s),u=(0,en.mergeArrays)(o,c,e=>rx(e,l)),d=!1,h=ea()(u,({left:e,right:t})=>{let n=rw(e,t,r+1,l,i,s);return d=d||null!=n[0].diffType,n}),m=0===u.length,g=Y(e,t,d),p=rA(m,l,a.expandByDefault??!1,i),f=a.value?.type==="nodeThumbnail",y={label:a.label,value:a.value,diffValue:e&&t&&g?t?.value:void 0,isExpanded:p,isLeaf:m,isImage:f,indent:r,expansionKey:l,childExpansionKeys:ea()(h,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rO(l,s),diffType:g};return p?[y,...h]:[y]};var rL=r(946689),rF=r(506563),rR=r(91365),rk=r(630834);function rV({selectedObject:e,diffObject:t,onClose:r}){let[i,s]=(0,l.fp)(U);return n.createElement(tV,null,e?i&&t?n.createElement(r$,{selectedObject:e,diffObject:t,diffState:i,setDiffState:s}):n.createElement(rG,{object:e}):t?n.createElement(rG,{object:t}):n.createElement(m.M,null),n.createElement(tM,{label:"Help",href:rF.e,svg:rR.A}),r&&n.createElement(tM,{label:"Close FigmaScope",onClick:r,svg:rk.default}))}let rM=d.cx.flex1.ml10.my4.$;function rG({object:e}){return n.createElement("div",{className:rM},n.createElement("span",{className:d.cx.fontSemiBold.$},e.displayProperties.longName))}function r$({selectedObject:e,diffObject:t,diffState:r,setDiffState:i}){let s=(0,o.Xr)(O);return n.createElement("div",{className:d.cx.flex1.ml10.my4.$},n.createElement("div",null,n.createElement("span",{className:d.cx.colorTextSecondary.$},"Diffing "),n.createElement("span",{className:d.cx.fontSemiBold.$},e.displayProperties.longName),n.createElement("span",{className:d.cx.colorTextSecondary.$}," against "),n.createElement("span",{className:d.cx.fontSemiBold.$},t.displayProperties.longName)),r&&n.createElement("div",{className:d.cx.colorTextSecondary.mt8.$},n.createElement(m.Y,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},n.createElement("span",null,"Snapshot of"," ",n.createElement(rL.CY,{onClick:()=>s(r.object.id),className:d.cx.colorTextFigjam.fontSemiBold.$,trusted:!0},r.object.displayProperties.name),r.type===G.Tree&&" and full subtree"," was taken at"," ",r.time.toLocaleTimeString("en-US")),n.createElement(rL.CY,{onClick:()=>i({type:"refresh"}),className:d.cx.colorTextDesign.$,trusted:!0},"Refresh"),n.createElement(rL.CY,{onClick:()=>i({type:"clear"}),className:d.cx.colorTextDanger.$,trusted:!0},"Finish"))))}let rU=n.memo(function({embedded:e=!1,emptyStateContent:t,onClose:r,appSelection:i,setAppSelection:s}){let a=(0,l.md)(E.lu);switch(a.status){case u.r.INIT:return t??n.createElement(ee.zG,null);case u.r.LOADING:return n.createElement(ee.zG,null);case u.r.FAILURE:return n.createElement(ee.rf,{error:a.error});case u.r.SUCCESS:}if(0===a.value.primaryResource.rootObjects.length)return n.createElement(ee.rf,{error:"No root objects found. This is likely a bug - please report in #figmascope."});let o=n.createElement(rH,{appSelection:i,setAppSelection:s,onClose:r});return e?o:n.createElement(rj,null,o)});function rj({children:e}){let{name:t,metadata:r}=(0,l.md)(E.Cc);return n.createElement("div",{className:d.cx.hFull.$},n.createElement(m.Y,{direction:"vertical",width:"fill-parent",height:"fill-parent",padding:0,spacing:0},n.createElement(m.Y,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar"},t&&n.createElement(g.E,{fontWeight:"bold",color:"toolbar"},t),r&&Object.entries(r).map(([e,t])=>t&&n.createElement("span",{key:e},n.createElement(g.E,{color:"toolbar-secondary"},e,": "),n.createElement(g.E,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold"},t)))),e))}function rH({onClose:e,appSelection:t,setAppSelection:r}){let d=n.useRef(null),m=n.useRef(null),{windowInnerWidth:g}=(0,a.l)(),[p,f]=n.useState("35%"),[y,I]=n.useState("50%"),b=n.useRef(null),[v,S]=(0,i.i)({onDrag(e){let t=b.current?b.current.getBoundingClientRect().right:0,r=(e.clientX-t)/g;f(`${(100*r).toFixed(2)}%`)}}),[C,T]=(0,i.i)({onDrag(e){let t=m.current;if(!t)return;let r=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;I(`${(100*r).toFixed(2)}%`)}}),N=(0,o.Xr)(_),D=(0,o.Xr)(A),P=n.useCallback(e=>{let t=d.current;document.activeElement!==t&&(e.keyCode===c.Uz.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===c.Uz.BRACKET_LEFT?(s.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),N()):e.keyCode===c.Uz.BRACKET_RIGHT&&(s.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),D()))},[N,D]),x=(0,l.md)(E.Cc);window.figmaScope=x,window.figmaScopeScene=x,function(e){let[t,r]=(0,l.fp)(q);t.status===u.r.SUCCESS&&e?.setSceneGraphValidationInfo?.(t.value),(0,n.useEffect)(()=>{r()},[r])}(x);let B=(0,l.md)(O),L=(0,l.md)(w),R=(0,l.md)(H);return n.createElement(F,{appSelection:t,setAppSelection:r},n.createElement("div",{className:"main_view--root--uFXxy",style:h.sx.if(v||C,{cursor:"ew-resize"}).$,onKeyDown:P},n.createElement("div",{className:"main_view--left--HQbxu",style:{width:p}},n.createElement(tH,{searchRef:d}),n.createElement(tp,{className:"main_view--layersPanel---l3kd"},n.createElement("div",{...S({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(tS,null))),n.createElement("div",{className:"main_view--right--X5cs-"},n.createElement(rV,{selectedObject:L,diffObject:R,onClose:e}),(L||R)&&n.createElement("div",{className:"main_view--rightContents--to1Gi",ref:m},n.createElement(tp,{className:"main_view--nodeFieldsPanel--4n2yP",style:{width:y}},n.createElement("div",{...T({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(rT,{panel:"middle",items:L?.rawProperties,diffItems:R?.rawProperties,extraItems:void 0,key:B})),n.createElement(tp,{className:"main_view--computedPropertiesPanel--Dub7j"},n.createElement(rT,{panel:"right",items:L?.computedProperties,diffItems:R?.computedProperties,extraItems:x.getAdditionalProperties?.(B),key:B}))))))}}}]);

//# debugId=025d7440-ce11-556b-8234-03dad6f66122

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/24183f2d31cd1ff9e03457f87583e6d5aee5e795/6832-d77fe68c50f74a87.min.js.map